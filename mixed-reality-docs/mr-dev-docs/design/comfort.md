---
title: Комфорт
description: Во время естественного просмотра зрительная система человека использует несколько источников информации, или "подсказок", чтобы интерпретировать трехмерные фигуры и относительное положение объектов.
author: erickjpaul
ms.author: erpau
ms.date: 06/25/2020
ms.topic: article
ms.localizationpriority: high
keywords: Смешанная реальность, проектирование, комфорт, HoloLens 2, HoloLens (1-го поколения)
ms.openlocfilehash: f53c91b10f9dfc37678356c914e486f61eea6382
ms.sourcegitcommit: 9a489e8a3bf90b20f1b61606eea42c859c833424
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2020
ms.locfileid: "94340652"
---
# <a name="comfort"></a>Комфорт

## <a name="overview"></a>Обзор

Во время естественного просмотра зрительная система человека использует несколько источников информации, или "подсказок", чтобы интерпретировать трехмерные фигуры и относительное положение объектов. Некоторые подсказки предназначены только для одного глаза (монокулярные маркеры), в том числе [линейная перспектива](https://en.wikipedia.org/wiki/Perspective_(graphical)), [знакомый размер](https://en.wikipedia.org/wiki/Size#Perception_of_size), загораживание, [размытие глубины резкости](https://en.wikipedia.org/wiki/Depth_of_field) и [аккомодация](https://en.wikipedia.org/wiki/Accommodation_(eye)). Другие подсказки предназначены для обоих глаз и включают в себя [вергенцию](https://en.wikipedia.org/wiki/Vergence) (относительные движения глазных яблок для осмотра объекта) и [бинокулярную диспаратность](https://en.wikipedia.org/wiki/Stereopsis) (характер различий между проекциями сцены на заднюю стенку двух глаз). Чтобы обеспечить максимальное удобство использования виртуальных шлемов, важно, чтобы дизайнеры и разработчики создавали и представляли содержимое так, чтобы правильно имитировать подсказки из материального мира. С физической точки зрения также важно проектировать содержимое, которое не требует утомительных движений шеи или рук. В этой статье мы рассмотрим ключевые рекомендации, которые следует учесть для достижения этих целей.

## <a name="vergence-accommodation-conflict"></a>Конфликт между вергенцией и аккомодацией

Чтобы четко видеть объекты, человек должен [аккомодировать](https://en.wikipedia.org/wiki/Accommodation_%28eye%29) свои глаза к расстоянию до объекта, то есть сфокусировать их на нем. В то же время поворот обоих глаз должен [наводить взгляд](https://en.wikipedia.org/wiki/Convergence_(eye)) с учетом расстояния до объекта, чтобы изображения не двоилось. При естественном просмотре вергенция и аккомодация связаны. При взгляде на что-нибудь близкое (например, на комнатную муху, подлетевшую к носу) ваши глаза скрещиваются и аккомодируются на близкой точке. И наоборот, если вы смотрите на что-то, расположенное в оптической бесконечности (примерно в 6 метрах или дальше для нормального зрения), лучи зрения ваших глаз становятся параллельными, а зрачки аккомодируются к бесконечности. 

В большинстве головных дисплеев пользователи всегда будут аккомодироваться к фокусному расстоянию экрана (чтобы видеть четкое изображение), но фокусировать взгляд с учетом расстояния до интересующего объекта (чтобы видеть одну картинку). Когда пользователи аккомодируют и фокусируют взгляд для разных расстояний, естественную связь между этими двумя подсказками нужно нарушить, и это может привести к зрительному дискомфорту или усталости.

<br>

<iframe width="940" height="530" src="https://www.youtube.com/embed/-606oZKLa_s" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


### <a name="guidance-for-holographic-devices"></a>Рекомендации для голографических устройств

Дисплеи HoloLens настроены на оптическое расстояние примерно в 2 метра от пользователя. Поэтому, чтобы изображение на устройстве всегда было четким, пользователи должны аккомодировать взгляд для расстояния около 2 метров. Разработчики приложений могут помочь пользователям сводить глаза, размещая содержимое и голограммы на различной глубине. Дискомфорт от конфликта между вергенцией и аккомодацией можно устранить или свести к минимуму, располагая содержимое, на котором фокусируются пользователи, примерно в 2 метрах от пользователя (т. е. в сцене с большой глубиной размещайте интересующие области примерно на расстоянии 2 метров от пользователя, если это возможно). Если содержимое невозможно разместить на расстоянии 2 метров, дискомфорт от конфликта между вергенцией и аккомодацией значительно повышается, когда пользователь переводит взгляд с объектов, расположенных на разных расстояниях. Иными словами, гораздо комфортнее смотреть на неподвижную голограмму, которая остается в 50 сантиметрах от вас, чем на такую же голограмму, которая перемещается то к вам, то от вас.

![Оптимальное расстояние от пользователя для размещения голограмм.](images/distanceguiderendering-950px.png)<br>
*Оптимальное расстояние от пользователя для размещения голограмм*

### <a name="best-practices-for-hololens-1st-gen-and-hololens-2"></a>Рекомендации для HoloLens (1-го поколения) и HoloLens 2

Для достижения максимального комфорта **оптимальная зона для размещения голограмм составляет 1,25–5,0 м**. В любом случае проектировщикам следует создавать сцены с содержимым, предлагающие пользователям взаимодействовать с объектами на расстоянии от 1 метра (например, [изменить размер содержимого и параметры размещения по умолчанию](gaze-and-commit.md)). 

Хотя иногда содержимое требуется отображать ближе, чем в 1 метре, мы не советуем размещать голограммы ближе, чем в 40 сантиметрах от пользователя. Поэтому мы рекомендуем начинать **исчезание содержимого в 40 сантиметрах и поместить плоскость отсечения отрисовки в 30 сантиметрах** , чтобы избежать появления более близких объектов.

Объекты, которые перемещаются по глубине, вероятнее создадут дискомфорт от конфликта между вергенцией и аккомодацией, чем стационарные объекты. Точно так же, если пользователям приходится быстро переводить взгляд с близких объектов на дальние (и наоборот) (например, из-за всплывающей голограммы, с которой нужно взаимодействовать напрямую), это может вызвать зрительный дискомфорт и усталость. Следовательно, **нужно приложить все усилия, чтобы пользователи как можно реже просматривали содержимое, перемещающееся по глубине, или быстро переводили взгляд с близких голограмм на далекие (и наоборот)** . 

### <a name="additional-considerations-for-hololens-2-and-near-interaction-distances"></a>Дополнительные рекомендации для HoloLens 2 и расстояний близкого взаимодействия

При проектировании содержимого для прямого (близкого) взаимодействия в HoloLens 2 или **любом приложении, где содержимое должно размещаться ближе чем в 1 метре, следует уделить особое внимание, чтобы обеспечить комфорт пользователей**. Вероятность дискомфорта из-за конфликта между вергенцией и аккомодацией возрастает экспоненциально с уменьшением дистанции просмотра. Кроме того, при просмотре содержимого на расстоянии близкого взаимодействия пользователи могут видеть его размытым. Поэтому мы рекомендуем проверять содержимое, отображаемое как в зоне оптимального размещения голограмм, так и ближе (менее чем в 1 метре от плоскости обрезки), чтобы убедиться, что оно остается четким и комфортным для просмотра. 

**Рекомендуется создать для приложений "бюджет глубины" на основе времени, в течение которого пользователь должен просматривать содержимое, которое находится близко (ближе 1 метра) и перемещается по глубине**. Например, следует избегать возникновения таких ситуаций для пользователя в течение 75 % всего времени работы. При превышении бюджета глубины рекомендуется выполнить тщательное пользовательское тестирование, чтобы убедиться в сохранении удобства работы. 

Как правило, мы также рекомендуем тщательно протестировать все требования к взаимодействию (например, скорость перемещения, досягаемость и т. д.) на расстояниях близкого взаимодействия и убедиться, что они удобны для пользователей. 


### <a name="guidance-for-immersive-devices"></a>Руководство по иммерсивным устройствам

Указания и рекомендации для HoloLens относятся и к иммерсивным устройствам, но конкретные значения зоны комфорта смещаются в зависимости от расстояния до экрана. Как правило, фокусные расстояния до этих дисплеев составляют от 1,25 до 2,5 м. Если вы не уверены, старайтесь не допускать отображения интересующих объектов слишком близко к пользователям, располагая большинство содержимого в 1 метре или дальше.

## <a name="interpupillary-distance-and-vertical-offset"></a>Межзрачковое расстояние и вертикальное смещение

При просмотре цифрового содержимого на виртуальных шлемах очень важно расположение глаз зрителя относительно места отображения этого содержимого. В частности, для комфортного просмотра цифрового содержимого на виртуальных шлемах важны межзрачковое расстояние ([IPD](https://en.wikipedia.org/wiki/Pupillary_distance)) и вертикальное смещение (VO). 

Межзрачковое расстояние — это расстояние между зрачками, то есть центрами глаз человека. Вертикальное смещение — это потенциальное вертикальное смещение цифрового содержимого, отображаемого для каждого глаза, относительно горизонтальной оси глаз зрителя (это не то же самое, что горизонтальное смещение или биноклярная диспаратность). Если неправильно учесть один или два этих фактора для отдельного пользователя, это может не только обострить дискомфорт от конфликта между вергенцией и аккомодацией, но даже вызвать дискомфорт при минимизированном конфликте виртуальной или дополненной реальности (например, для содержимого, отображаемого в HoloLens на фокусном расстоянии в 2 метра). 

### <a name="guidance-for-holographic-devices"></a>Рекомендации для голографических устройств

#### <a name="hololens-1st-gen"></a>HoloLens (1-го поколения)

Для HoloLens (1-го поколения) межзрачковое расстояние оценивается и настраивается во время [калибровки](https://docs.microsoft.com/hololens/hololens-calibration) устройства. Для новых пользователей уже настроенного устройства необходимо выполнить калибровку или настроить межзрачковое расстояние. Вертикальное смещение полностью зависит от того, как устройство надето. В частности, чтобы минимизировать вертикальное смещение, устройство должно располагаться на голове пользователя, чтобы дисплеи были на одном уровне с осью его глаз. 

#### <a name="hololens-2"></a>HoloLens 2

Для HoloLens 2 межзрачковое расстояние оценивается и настраивается во время [калибровки](https://docs.microsoft.com/hololens/hololens-calibration) глаз и устройства. Для новых пользователей уже настроенного устройства необходимо выполнить калибровку, чтобы убедиться, что межзрачковое расстояние настроено правильно. Вертикальное смещение в HoloLens 2 учитывается автоматически. 

### <a name="guidance-for-immersive-devices"></a>Руководство по иммерсивным устройствам

В иммерсивных виртуальных шлемах Windows Mixed Reality нет автоматической калибровки межзрачкового расстояния или вертикального смещения. Межзрачковое расстояние можно задать вручную в программном обеспечении (в разделе параметров Портала смешанной реальности; ознакомьтесь с [калибровкой](https://docs.microsoft.com/hololens/hololens-calibration)). В некоторых виртуальных шлемах есть механический ползунок, позволяющий пользователю изменить расстояние между линзами до удобного положения (т. е. примерно до своего межзрачкового расстояния). 

## <a name="rendering-rates"></a>Частоты отрисовки

Приложения смешанной реальности являются уникальными, так как пользователи могут свободно перемещаться по миру и взаимодействовать с виртуальным содержимым как с реальными объектами. Чтобы обеспечить это ощущение, очень важно визуализировать голограммы так, чтобы они были стабильными в мире и плавно анимировались. Достичь этого помогает отрисовка с частотой [не менее 60 кадров в секунду](../develop/platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md). Существуют устройства смешанной реальности, поддерживающие отрисовку с частотой выше 60 кадров/с, и на этих устройствах настоятельно рекомендуется выполнять отрисовку с более высокой частотой кадров, чтобы обеспечить оптимальное взаимодействие с пользователем.

**Дальнейшее погружение**

Чтобы отрисовывать голограммы, выглядящие [стабильными в реальном и виртуальном мирах](../develop/platform-capabilities-and-apis/hologram-stability.md), приложения должны отображать изображения с учетом расположения пользователя. Так как отрисовка изображений занимает время, HoloLens и другие устройства Windows Mixed Reality прогнозирует, куда будет направлена голова пользователя при отображении изображений на дисплеях. Этот алгоритм прогнозирования является приблизительным. Алгоритмы и оборудование Windows Mixed Reality настраивают отрисованное изображение с учетом расхождений между прогнозируемым и фактическим положением головы. Благодаря этому пользователь видит изображение, как-будто оно было визуализировано из правильного расположения, и голограммы выглядят стабильными. Обновления лучше всего подходят для небольших изменений положения головы, и они не позволяют полностью учесть некоторые различия в отрисованных изображениях, например, вызванные двигательным параллаксом.

**Выполняя отрисовку с минимальной частотой в 60 кадров/с, вы выполняете две вещи, которые помогут отображать стабильные голограммы.**
1. Вы уменьшаете дрожание, характеризующееся неравномерным движением и двоением изображений. Чем быстрее перемещаются голограммы и чем ниже частота кадров отрисовки, тем заметнее дрожание. Следовательно, стараясь всегда поддерживать частоту в 60 кадров/с (или максимальную частоту кадров отрисовки устройства), вы сможете избежать дрожания.
2. Вы минимизируете общую задержку. В подсистеме с жесткой обработкой игрового потока и потока отрисовки, работающей с частотой 30 кадров/с, может возникнуть дополнительная задержка в 33,3 мс. Уменьшение задержки уменьшает погрешность прогнозирования и повышает стабильность голограмм.

**Анализ производительности**

Существует множество инструментов, которые можно использовать для оценки частоты кадров приложения, например:
* GPUView;
* отладчик графики Visual Studio;
* профилировщики, встроенные в подсистемы обработки трехмерной графики, например Frame Debugger в Unity.

## <a name="self-motion-and-user-locomotion"></a>Движение и перемещение

Единственное ограничение — это размеры физического пространства. Если вы хотите позволить пользователям перемещаться в виртуальной среде дальше, чем это возможно в реальных помещениях, необходимо реализовать исключительно виртуальное перемещение. Однако постоянное виртуальное перемещение, которое не соответствует реальному физическому перемещению пользователя, может вызвать эффект укачивания. Это происходит из-за того, что *визуальные подсказки* для передвижения пользователя в *виртуальном мире* конфликтуют с [вестибулярными подсказками](https://en.wikipedia.org/wiki/Vestibular_system) для перемещения в *реальном мире*.

К счастью, есть несколько советов о том, как реализовать передвижение пользователя, чтобы избежать этой проблемы.
* Всегда позволяйте пользователю управлять своими передвижениями. В частности, проблему вызывает неожиданное самостоятельное перемещение.
* Люди очень чувствительны к направлению силы тяжести. Поэтому особенно следует избегать вертикальных перемещений, которые не инициируются пользователем.

### <a name="guidance-for-holographic-devices"></a>Рекомендации для голографических устройств

Один из способов перемещения пользователя в другое место в большой виртуальной среде — создание впечатления, что он перемещает небольшой объект в сцене. Этого эффекта можно добиться следующим образом.
   1. Предоставьте интерфейс, в котором пользователь может выбрать место в виртуальной среде, куда ему нужно переместиться.
   2. После выбора уменьшите визуализацию сцены до круга вокруг нужной точки.
   3. Сохраняя фокус на выбранной точке, позвольте пользователю переместить ее, как будто это маленький объект. Тогда пользователь сможет переместить выбранную точку ближе к себе.
   4. После отмены выбора возобновите визуализацию всей сцены.

### <a name="guidance-for-immersive-devices"></a>Руководство по иммерсивным устройствам

Предыдущий подход работает на голографических устройствах не так хорошо, как на иммерсивном устройстве, так как приложение должно отображать большое черное пустое пространство или другую среду по умолчанию при перемещении "круга". А это нарушает погружение пользователя в среду. Одной из хитростей для передвижений пользователя в иммерсивной гарнитуре является "моргание". Этот подход обеспечивает пользователю контроль над движением и дает краткое ощущение перемещения, но делает это настолько быстро, что пользователь едва ли почувствует дезориентацию при исключительно виртуальном перемещении.
   1. Предоставьте интерфейс, в котором пользователь может выбрать место в виртуальной среде, куда ему нужно переместиться.
   2. После выбора места начните очень быструю (100 м/с) имитацию движения к нему, одновременно быстро выполняя исчезание визуализации.
   3. Восстановите визуализацию после завершения перехода.

## <a name="heads-up-displays"></a>HUD-дисплеи

В шутерах от первого лица HUD-дисплеи постоянно отображают такие сведения, как здоровье игрока, мини-карты и инвентарь, непосредственно на экране. HUD-дисплеи позволяют информировать игрока, не нарушая игрового процесса. В средах смешанной реальности HUD-дисплеи потенциально могут вызывать значительный дискомфорт и должны быть адаптированы к более иммерсивному окружению. В частности, HUD-дисплеи, которые жестко привязаны к положению головы пользователя, скорее всего, создадут дискомфорт. Если приложению требуется HUD-дисплей, рекомендуется привязать его к положению *тела* , а не головы. Это можно реализовать в виде набора экранов, которые мгновенно интерпретируются пользователем, но не поворачиваются вслед за его головой, пока не достигнут порог поворота. После такого поворота HUD-дисплей может повернуться, чтобы показывать информацию в поле зрения пользователя. Никогда не стоит реализовать поворот HUD-дисплея и головы пользователя один в один.

## <a name="text-legibility"></a>Читаемость текста

Оптимальная читаемость текста может уменьшить напряжение глазных мышц и обеспечить удобство работы пользователей, особенно в приложениях или сценариях, когда пользователи должны читать в виртуальном шлеме. Читаемость текста зависит от различных факторов, в том числе от следующих:
* свойства отображения, такие как плотность пикселей, яркость и контрастность; 
* свойства линзы, такие как хроматическая аберрация;
* свойства текста и шрифта, такие как толщина, межсимвольное расстояние, наличие засечек и цвет шрифта и фона.  

Как правило, рекомендуется тестировать читаемость в каждом приложении отдельно, чтобы сделать размер шрифта максимально удобным для чтения. Подробные рекомендации по использованию голографических и иммерсивных устройств см. в статьях [Верстка](typography.md) и [Текст в Unity](../develop/unity/text-in-unity.md).

## <a name="holographic-frame-considerations"></a>Рекомендации по кадрированию для голографических устройств

При наличии крупных объектов или большого числа объектов в средах смешанной реальности очень важно учитывать, как часто пользователю придется менять положение головы для взаимодействия с содержимым. Все среды можно разбить на три категории в аспекте требований к движению головы: 
* **горизонтальное** (из стороны в сторону);
* **вертикальное** (вверх и вниз);
* **иммерсивное** (горизонтально и вертикально).
 
При возможности ограничьте большинство взаимодействий горизонтальными или вертикальными движениями. В идеале большинство взаимодействий должны происходить в центре голографического кадра, когда голова пользователя находится в нейтральном положении. Избегайте взаимодействий, которые вынуждают пользователя постоянно смещать точку зрения в неестественное для головы положение (например, всегда смотреть вверх для доступа к главному меню).

![Оптимальная зона для содержимого — 0–35 градусов ниже горизонта](images/optimal-field-of-view-2.png)<br>
*Оптимальная зона для содержимого — 0–35 градусов ниже горизонта*

Движение головы по горизонтали больше подходит для частых взаимодействий, а движение по вертикали следует применять для редких действий. Например, в тех случаях, когда пользователь значительную часть времени проводит, двигая головой в горизонтальной плоскости, следует ограничить число взаимодействий с движением головы по вертикали (например, для открытия меню).

Мы рекомендуем реализовать взаимодействие с участием всего тела, а не только головы, путем размещения объектов в пространстве вокруг пользователя. При взаимодействиях с движущимися или крупными объектами следует уделять особое внимание движениям головы, особенно при высокой частоте таких движений по горизонтали и вертикали.

## <a name="gaze-direction"></a>Направление взгляда

Чтобы избежать перенапряжения глаз и шеи, необходимо разрабатывать содержимое таким образом, чтобы избежать чрезмерных движений глаз и шеи.
* **Избегайте** углов обзора выше 10 градусов над горизонтом (вертикальное перемещение).
* **Избегайте** углов обзора ниже 60 градусов под горизонтом (вертикальное перемещение).
* **Избегайте** поворотов шеи более чем на 45 градусов от центра (горизонтальное перемещение).

Оптимальным (покоящимся) считается угол взгляда в 10–20 градусов ниже линии горизонта, так как обычно голова слегка наклоняется вниз, особенно во время выполнения каких-либо действий.

## <a name="arm-positions"></a>Положения рук

Мышечная усталость может накапливаться, если пользователи должны держать руку навесу во время работы. Усталость также может возникнуть, если пользователю приходится часто повторять жесты касания. Поэтому рекомендуется, чтобы пользователю не приходилось постоянно применять ввод жестами. Для этого можно добавить короткие перерывы или предложить сочетание жестов и речевого ввода для взаимодействия с приложением.

## <a name="next-discovery-checkpoint"></a>Следующий этап

Если вы следуете изложенному нами [плану обучения](../discover/get-started-with-mr.md), сейчас вы находитесь в середине своего пути знакомства с основами смешанной реальности. Отсюда вы можете перейти к следующей основной теме: 

> [!div class="nextstepaction"]
> [Как пользователь видит мир (голографический экран)](../design/holographic-frame.md)

## <a name="see-also"></a>См. также статью
* [Взгляд](gaze-and-commit.md)
* [Стабильность голограммы](../develop/platform-capabilities-and-apis/hologram-stability.md)
* [Инстинктивное взаимодействие](interaction-fundamentals.md)
* [Голографический кадр](holographic-frame.md)
* [Калибровка](https://docs.microsoft.com/hololens/hololens-calibration)
