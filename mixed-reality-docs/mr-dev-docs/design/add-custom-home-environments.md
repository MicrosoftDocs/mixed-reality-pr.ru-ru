---
title: Разработка собственных иммерсивных сред
description: В дополнение к домашним средам Windows Mixed Reality мы предоставляем, вы можете поэкспериментировать с созданием и использованием собственных.
author: thmignon
ms.author: thmignon
ms.date: 04/30/2018
ms.topic: article
keywords: Windows Mixed Reality, Смешанная реальность, виртуальная реальность, VR, MR, Главная, пользовательские среды, места, Клифф House, скилофт, пользователь, создание, гарнитура смешанной реальности, гарнитура Windows Mixed, гарнитура Virtual Reality, HoloLens, МРТК, набор средств смешанной реальности
ms.openlocfilehash: 3b5862c6ba4ec1a0549b751cf2982247b6501201
ms.sourcegitcommit: 4f3ef057a285be2e260615e5d6c41f00d15d08f8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2020
ms.locfileid: "94703020"
---
# <a name="design-your-own-immersive-environments"></a>Разработка собственных иммерсивных сред

>[!NOTE]
>Это экспериментальная функция. Попробуйте и протестируйте его, но не удивитсь, если все работает не так, как ожидалось. Мы оцениваем жизнеспособность этой функции и предлагаем вам ее использовать, поэтому Расскажите нам о своем опыте (и всех обнаруженных ошибках) на [форумах разработчиков](https://forums.hololens.com/categories/custom-home-environments).

Начиная с [обновления Windows 10 от апреля 2018](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/release-notes-april-2018)г. Мы включили экспериментальную функцию, позволяющую добавлять пользовательские среды в средство выбора мест (в меню Пуск) для использования в качестве [домашней страницы Windows Mixed Reality](../discover/navigating-the-windows-mixed-reality-home.md). В Windows Mixed Reality есть две среды по умолчанию — Клифф House и Скилофт, которые можно выбрать в качестве домашней. Создание пользовательских сред позволяет развернуть этот список с помощью собственных операций создания. Мы предоставляем эту возможность в раннем состоянии, чтобы оценить интерес от создателей и разработчиков, узнать, какие типы миров вы создаете, и понять, как работать с различными средствами разработки.

При использовании пользовательской среды вы заметите, что телеперенос, взаимодействие с приложениями и размещение голограмм работает так же, как и в Клифф House и Скилофт. Вы можете просматривать веб-сайт в фэнтези альбоме или заполнять футуристическихй город с голограммами. возможности бесконечно!

## <a name="device-support"></a>Поддержка устройств

<table>
    <colgroup>
    <col width="33%" />
    <col width="33%" />
    <col width="33%" />
    </colgroup>
    <tr>
        <td><strong>Возможность</strong></td>
        <td><a href="https://docs.microsoft.com/hololens/hololens2-hardware"><strong>HoloLens</strong></a></td>
        <td><a href="../discover/immersive-headset-hardware-details.md"><strong>Иммерсивные гарнитуры</strong></a></td>
    </tr>
     <tr>
        <td>Пользовательские домашние среды</td>
        <td>❌</td>
        <td>✔️</td>
    </tr>
</table>

## <a name="trying-a-sample-environment"></a>Попытка использования примера среды

Мы создали пример среды, который показывает некоторые творческие возможности пользовательских домашних сред. Выполните следующие действия, чтобы испытать это:
1. [Скачайте наш пример фэнтези среды](https://download.microsoft.com/download/B/2/5/B25C1AEF-40CD-4B03-A596-4BCA3D33035A/Fantasy_Island.exe) (ссылки на самораспаковывающийся исполняемый файл).

    ![Пример среды фэнтези](images/FantasyLand.jpg)<br>
    *Пример среды фэнтези*<br>

2. Запустите только что скачанный файл **Fantasy_Island.exe** .

    > [!NOTE]
    > При попытке запустить exe-файл, скачанный из Интернета (например, этот), может появиться всплывающее окно «защищенный компьютер Windows». Чтобы запустить Fantasy_Island.exe из этого всплывающего окна, выберите **Дополнительные сведения** , а затем **выполните все равно**. Этот параметр безопасности предназначен для защиты от загрузки файлов, которые не следует доверять, поэтому выбирайте этот параметр только в том случае, если вы доверяете источнику файла.

3. Откройте **проводник** и перейдите к папке Environments, вставляя следующую строку в адресной строке: `%LOCALAPPDATA%\Packages\EnvironmentsApp_cw5n1h2txyewy\LocalState` .
4. Скопируйте образец окружения, скачанный в эту папку.
5. Перезапустите **портал смешанной реальности**. Это приведет к обновлению списка сред в средстве выбора мест.
6. Установите на гарнитуру. Когда Вы находитесь на домашней странице, откройте **меню Пуск** с помощью кнопки Windows вашего контроллера.
7. Щелкните значок **мест** над списком закрепленных приложений, чтобы выбрать домашнюю среду.
8. Вы найдете среду острова фэнтези, скачанную в списке мест. Выберите **остров фэнтези** , чтобы ввести новую пользовательскую домашнюю среду!

## <a name="creating-your-own-custom-environment"></a>Создание собственной настраиваемой среды

Помимо использования наших примеров сред вы можете экспортировать собственные среды, используя любимое программное обеспечение трехмерного редактирования. 

### <a name="modeling-guidelines"></a>Рекомендации по моделированию

При моделировании среды учитывайте следующие рекомендации. Это поможет обеспечить правильную ориентацию пользователя в белиеваблим мире:

1. Пользователи будут порождаться в 0, 0, 0, чтобы по центру, куда вы хотите поначаль, посередине происхождения.
2. Для рабочих единиц должно быть задано значение измерительные единицы, чтобы ресурсы можно было создавать в масштабе мира.
3. Для оси up должно быть задано значение "Y".
4. Ресурс должен иметь значение "Forward", направленное на положительную ось Z.
5. Все сетки не нужно объединять, но рекомендуется при использовании устройств с ограниченными ресурсами.

### <a name="exporting-your-environment"></a>Экспорт среды

Windows Mixed Reality использует двоичный Глтф (. GLBA) в качестве формата доставки ресурсов для сред. Глтф — это прямой бесплатный открытый стандарт для доставки трехмерных ресурсов, поддерживаемый группой Кхронос. Так как Глтф развивается как промышленный стандарт для взаимодействия с трехмерным содержимым, корпорация Майкрософт будет поддерживать формат для приложений и интерфейсов Windows.

Первый шаг в экспорте ресурсов для использования в качестве пользовательских домашних сред — создание модели Глтф 2,0. Рабочая группа Глтф содержит [список поддерживаемых экспортов и конвертеров](https://github.com/KhronosGroup/glTF/blob/master/README.md#converters-and-exporters) для создания модели глтф 2,0. Чтобы приступить к работе, используйте одну из программ, перечисленных на этой странице, для создания и экспорта модели Глтф 2,0 или преобразования существующей модели с помощью одного из поддерживаемых преобразователей.

Кроме того, ознакомьтесь с [этой полезной статьей](https://www.khronos.org/blog/art-pipeline-for-gltf) , в которой приводится обзор рабочего процесса для экспорта моделей Глтф из Blend и 3ds Max напрямую. 

### <a name="environment-limits"></a>Ограничения среды

Все среды должны иметь < 256 МБ. В средах, превышающих 256 MBS, не удастся загрузиться и будет возвращаться к пустому миру с помощью скибокс по умолчанию, окружающего пользователя. При создании моделей имейте в виду, что этот размер файла не имеет значения. Кроме того, если вы планируете оптимизировать среду с помощью Виндовсмрассетконвертер, как описано ниже, то компания cognizant, что размер текстуры увеличится, так как оптимизатор создает текстуры с большим размером файла, но быстрее загружается. 

### <a name="optimizing-your-environment"></a>Оптимизация среды

Windows Mixed Reality поддерживает ряд дополнительных оптимизаций, которые значительно снижают время загрузки сред. Это может быть особенно важно для сред со многими текстурами, так как иногда время ожидания истекает при загрузке. Как правило, этот шаг рекомендуется для всех ресурсов, однако небольшие среды с небольшим или низким разрешением не всегда занимают этого. 

Чтобы упростить этот процесс, мы создали [конвертер активов Windows Mixed Reality (доступный на сайте GitHub)](https://github.com/Microsoft/glTF-Toolkit/releases) для оптимизации. Это средство использует набор служебных программ, доступных в Microsoft Глтф Toolkit, для оптимизации любых стандартных 2,0 Глтф или. GLBA, выполняя дополнительную упаковку, сжатие и разрешающее масштабирование текстуры. 

Сейчас преобразователь поддерживает ряд флагов, позволяющих настроить точное поведение оптимизации. Для достижения лучших результатов рекомендуется использовать следующие флаги:

Флаг|Рекомендуемые значения|Описание
---|---|---
-Max-текстура-размер|1024 или 2048| Настройте его, чтобы улучшить качество текстур, по умолчанию — 512 x 512. Обратите внимание, что большее значение значительно влияет на размер файла окружения, поэтому необходимо учитывать ограничение в 256 МБ.
-min-Version|1803|Пользовательские среды поддерживаются только в версиях Windows >= 1803. Этот флаг приведет к удалению текстур для более старых версий и уменьшению размера файла окончательного ресурса

Пример:

```cmd
WindowsMRAssetConverter FileToConvert.gltf -max-texture-size 1024 -min-version 1803
```

### <a name="testing-your-environment"></a>Тестирование среды

Создав окончательную среду. GLBA, вы готовы протестировать ее на гарнитуре. Начните с шага 2 в разделе ["попытка выборки среды"](#trying-a-sample-environment) , чтобы использовать пользовательскую среду в качестве домашней среды смешанной реальности. 

## <a name="feedback"></a>Обратная связь

Хотя мы оцениваем эту экспериментальную функцию, мы заинтересованы в изучении того, как вы используете пользовательские среды, какие ошибки могут возникнуть и как вам нравится эта функция. Поделитесь всеми отзывами о создании и использовании пользовательских домашних сред на [форумах разработчиков](https://forums.hololens.com/categories/custom-home-environments).

## <a name="troubleshooting-and-tips"></a>Устранение неполадок и советы

### <a name="how-do-i-change-the-name-of-the-environment"></a>Разделы справки изменить имя окружения?

Имя файла в папке среды будет использоваться в средстве выбора мест. Чтобы изменить имя среды, просто переименуйте имя файла среды, а затем перезапустите портал смешанной реальности.

### <a name="how-do-i-remove-custom-environments-from-my-places-picker"></a>Разделы справки удалить пользовательские среды из средства выбора "Мои расположения"?

Чтобы удалить пользовательскую среду, откройте папку среды на компьютере ( `%LOCALAPPDATA%\Packages\EnvironmentsApp_cw5n1h2txyewy\LocalState` ) и удалите среду. После перезапуска портала смешанной реальности эта среда больше не будет отображаться в средстве выбора мест. 

### <a name="how-do-i-default-to-my-favorite-custom-environment"></a>Разделы справки по умолчанию в мою любимую пользовательскую среду?

В настоящее время вы не можете изменить среду по умолчанию. Каждый раз, когда вы перезапустите портал смешанной реальности, вы вернетесь в среду Клифф House. 

### <a name="i-spawn-into-a-blank-space"></a>Я попытался создать пустое пространство

Windows Mixed Reality [не поддерживает среды, размер которых превышает 256 МБ](#environment-limits). Если среда превышает это ограничение, вы попадете на пустое поле перевозки без модели.

### <a name="it-takes-a-long-time-to-load-my-environment"></a>Загрузка моей среды занимает много времени

В среду можно добавить дополнительные оптимизации, чтобы ускорить загрузку. Дополнительные сведения см. [в разделе "Оптимизация среды"](#optimizing-your-environment) .

### <a name="the-scale-of-my-environment-is-incorrect"></a>Неправильная шкала моей среды

Windows Mixed Reality преобразует единицы Глтф в один счетчик при загрузке сред. Если среда загружает непредвиденный масштаб, дважды проверьте свой экспорт, чтобы убедиться, что вы выполняете моделирование на одной шкале измерения. 

### <a name="the-spawn-location-in-my-environment-is-incorrect"></a>Неверное место порождения в моей среде

Расположение порождений по умолчанию находится в среде 0, 0, 0. В настоящее время его невозможно настроить, поэтому необходимо изменить порожденную точку, экспортировав среду с исходным расположением в нужной точке порождения.

### <a name="the-audio-doesnt-sound-correct-in-the-environment"></a>Звук не звучит правильно в окружении

При создании пользовательской среды будет использоваться моделирование визуализации акустических характеристик, не совпадающее с созданным физическим пространством. Звук может поступать из неправильных направлений и может показаться муффледным. 

## <a name="see-also"></a>См. также
* [Конвертер активов Windows Mixed Reality (на GitHub)](https://github.com/Microsoft/glTF-Toolkit/releases)

