---
title: 211. Ввод в смешанной реальности — жест
description: Выполните приведенное ниже пошаговое руководство по программированию с помощью Unity, Visual Studio и HoloLens, чтобы узнать о концепциях жестов.
author: keveleigh
ms.author: kurtie
ms.date: 10/22/2019
ms.topic: article
keywords: холотулкит, микседреалититулкит, микседреалититулкит-Unity, Academy, руководство, жест, HoloLens, Mixed Reality, Unity, гарнитура смешанной реальности, гарнитура Windows Mixed Reality, гарнитура виртуальной реальности, Windows 10
ms.openlocfilehash: 9f83e2f3b02cf8d83b2fb58a3a0d05dc8576b0e8
ms.sourcegitcommit: dd13a32a5bb90bd53eeeea8214cd5384d7b9ef76
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/17/2020
ms.locfileid: "94678293"
---
# <a name="mr-input-211-gesture"></a>211. Ввод в смешанной реальности: жесты

>[!NOTE]
>Руководства Mixed Reality Academy были разработаны для иммерсивных гарнитур HoloLens (1-го поколения) и иммерсивных гарнитур Mixed Reality.  Поэтому мы считаем, что важно оставить эти руководства для разработчиков, которые ищут рекомендации по разработке для этих устройств.  Данные руководства **_не_** будут обновляться с учетом последних наборов инструментов или возможностей взаимодействия для HoloLens 2.  Они будут сохранены для работы на поддерживаемых устройствах. Опубликован [новый цикл руководств](../../../mr-learning-base-01.md) для HoloLens 2.

[Жесты](../../../design/gaze-and-commit.md#composite-gestures) применяют намерение пользователя к действию. С помощью жестов пользователи могут взаимодействовать с голограммами. В этом курсе мы расскажем, как контролировать руки пользователя, реагировать на вводимые пользователем данные и предоставлять отзыв пользователю в зависимости от состояния и местоположения.

>[!VIDEO https://www.youtube.com/embed/c9zlpfFeEtc]

В статье об [основных принципах MR 101](../../../develop/unity/tutorials/holograms-101.md)мы использовали простой жест касания для взаимодействия с нашими голограммами. Теперь мы перейдем к жесту в области воздушного касания и изучим новые концепции:

* Обнаружение времени трассировки пользователя и предоставление отзыва пользователю.
* Используйте жест навигации для поворота голограмм.
* Предоставьте отзыв о том, когда пользователь перейдет из режима руки.
* Используйте события манипуляции, чтобы позволить пользователям перемещать голограммы с помощью их руки.

В этом курсе мы будем посещать **Обозреватель моделей** проектов Unity, который мы создали в [MR input 210](holograms-210.md). Наш-космонавтамный дружественный подход назад поможет нам в исследовании новых концепций жестов.

>[!IMPORTANT]
>Видеоматериалы, внедренные в каждую из приведенных ниже глав, были записаны с использованием более старой версии Unity и набора средств Mixed Reality. Хотя пошаговые инструкции являются точными и актуальными, в соответствующих видеоматериалах могут отображаться сценарии и визуальные элементы, которые являются неактуальными. Видеоматериалы по-прежнему включены в постерити, так как эти концепции все еще применимы.

## <a name="device-support"></a>Поддержка устройств

<table>
<tr>
<th>Курс</th><th style="width:150px"> <a href="../../../hololens-hardware-details.md">HoloLens</a></th><th style="width:150px"> <a href="../../../discover/immersive-headset-hardware-details.md">Иммерсивные гарнитуры</a></th>
</tr><tr>
<td>211. Ввод в смешанной реальности: жесты</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td>
</tr>
</table>

## <a name="before-you-start"></a>Перед началом работы

### <a name="prerequisites"></a>Предварительные требования

* КОМПЬЮТЕР с Windows 10, на котором [установлены правильные средства](../../../develop/install-the-tools.md).
* Некоторые основные возможности программирования на C#.
* Вы должны были выполнить [Основные сведения о MR 101](../../../develop/unity/tutorials/holograms-101.md).
* Необходимо завершить [Ввод MR 210](holograms-210.md).
* Устройство HoloLens, [настроенное для разработки](../../../develop/platform-capabilities-and-apis/using-visual-studio.md#enabling-developer-mode).

### <a name="project-files"></a>Файлы проекта

* Скачайте [файлы](https://github.com/Microsoft/HolographicAcademy/archive/Holograms-211-Gesture.zip) , необходимые для проекта. Требуется Unity 2017,2 или более поздней версии.
* Отмена архивации файлов на Рабочий стол или другого места для удобства доступа.

>[!NOTE]
>Если вы хотите просмотреть исходный код перед загрузкой, он [доступен на сайте GitHub](https://github.com/Microsoft/HolographicAcademy/tree/Holograms-211-Gesture).

### <a name="errata-and-notes"></a>Ошибки и примечания

* Параметр "Enable Только мой код" должен быть отключен (*снят*) в Visual Studio в разделе "сервис->параметры" — >Отладка для попадания в код точек останова в коде.

## <a name="chapter-0---unity-setup"></a>Глава 0-Установка Unity

### <a name="instructions"></a>Инструкции

1. Запустите Unity.
2. Щелкните **Open**(Открыть).
3. Перейдите к папке **жестов** , для которой был отменен Архив.
4. Найдите и выберите **начальную** / папку **обозревателя моделей** .
5. Нажмите кнопку **выбрать папку** .
6. На панели **проект** разверните папку **сцены** .
7. Дважды щелкните **моделексплорер** сцену, чтобы загрузить его в Unity.

### <a name="building"></a>Сборка

1. В Unity выберите **файл > параметры сборки**.
2. Если « **сцены» или «моделексплорер** » в окне « **Построение**» не отображаются, щелкните **Добавить открытые сцены** , чтобы добавить сцену.
3. Если вы специально разрабатываете для HoloLens, задайте для параметра **целевое устройство** значение **HoloLens**. В противном случае оставьте его на **любом устройстве**.
4. Убедитесь, что для **типа сборки** задано значение **D3D** и **пакет SDK** установлен в значение " **Последняя установленная версия** " (это должен быть пакет SDK 16299 или более поздней версии).
5. Щелкните **Построить**.
6. Создайте **новую папку** с именем App.
7. Щелкните папку **приложения** одним щелчком мыши.
8. Нажмите кнопку **выбрать папку** , и Unity начнет создавать проект для Visual Studio.

После завершения Unity появится окно проводника.

1. Откройте папку **приложения** .
2. Откройте **решение Моделексплорер Visual Studio**.

При развертывании в HoloLens:

1. С помощью верхней панели инструментов в Visual Studio измените целевой объект с отладка на **выпуск** и с ARM на **x86**.
2. Щелкните стрелку раскрывающегося списка рядом с кнопкой локальный компьютер и выберите **Удаленный компьютер**.
3. Введите **IP-адрес устройства HoloLens** и задайте для режима проверки подлинности значение **универсальный (незашифрованный протокол)**. Нажмите кнопку **Выбрать**. Если вы не узнаете IP-адрес устройства, проверьте **параметры > сеть & интернет > дополнительные параметры**.
4. В верхней строке меню щелкните **Отладка-> начать без отладки** или нажмите клавиши **CTRL + F5**. Если вы впервые развертываете на устройстве, вам потребуется [связать его с Visual Studio](../../../develop/platform-capabilities-and-apis/using-visual-studio.md#pairing-your-device).
5. После развертывания приложения закройте **фитбокс** с помощью **жеста выбора**.

При развертывании на иммерсивное головной телефон:

1. С помощью верхней панели инструментов в Visual Studio измените целевой объект с отладка на **выпуск** и с ARM на **x64**.
2. Убедитесь, что для целевого объекта развертывания задано значение **локальный компьютер**.
3. В верхней строке меню щелкните **Отладка-> начать без отладки** или нажмите клавиши **CTRL + F5**.
4. После развертывания приложения закройте **фитбокс** , изменив триггер на контроллере движения.

>[!NOTE]
>Вы можете заметить некоторые красные ошибки на панели ошибок Visual Studio. Их можно спокойно игнорировать. Переключитесь на панель вывода для просмотра фактического хода построения. Ошибки на панели вывода потребует внесения исправления (чаще всего они вызваны ошибкой в скрипте).

## <a name="chapter-1---hand-detected-feedback"></a>Глава 1. обнаружена обратная связь

>[!VIDEO https://www.youtube.com/embed/D1FcIyuFTZQ]

### <a name="objectives"></a>Цели

* Подпишитесь на события отслеживания.
* Используйте обратную связь курсора для отображения пользователей при отслеживании руки.

>[!NOTE]
>В HoloLens 2 обнаруженные руки срабатывают каждый раз, когда видны руки (а не только при наведении указателя мыши на палец).

### <a name="instructions"></a>Инструкции

* На панели **Иерархия** разверните объект **InputManager** .
* Найдите и выберите объект **жестуресинпут** .

Сценарий **InteractionInputSource.CS** выполняет следующие действия:

1. Подписывается на события Интерактионсаурцедетектед и Интерактионсаурцелост.
2. Задает состояние Ханддетектед.
3. Отменяет подписывание событий Интерактионсаурцедетектед и Интерактионсаурцелост.

Далее мы будем обновлять наш курсор с [MR Input 210](holograms-210.md) на тот, который отображает отзыв в зависимости от действий пользователя.

1. На панели **Иерархия** выберите объект **курсора** и удалите его.
2. На панели **проект** найдите **курсорвисфидбакк** и перетащите его на панель **Иерархия** .
3. Щелкните **InputManager** на панели **Иерархия** , а затем перетащите объект **Курсорвисфидбакк** из **иерархии** в поле **курсора** InputManager **симплесинглепоинтерселектор** в нижней части **инспектора**.
4. Щелкните **курсорвисфидбакк** в **иерархии**.
5. На панели **инспектора** раскройте **данные о состоянии курсора** в скрипте **объект курсора** .

**Данные о состоянии курсора** работают следующим образом:

* Любое состояние **наблюдения** означает, что не обнаружена рука, и пользователь просто смотрит на экран.
* Любое состояние **взаимодействия** означает, что обнаружена рука или контроллер.
* Любое состояние **наведения указателя** означает, что пользователь смотрит на голограмму.

### <a name="build-and-deploy"></a>Построение и Развертывание

* В Unity используйте **параметры сборки File >** для перестроения приложения.
* Откройте папку **приложения** .
* Откройте **решение Моделексплорер Visual Studio**, если оно еще не открыто.
  * (Если вы уже создали и развернули этот проект в Visual Studio во время настройки, то можете открыть этот экземпляр VS и нажать кнопку "перезагрузить все" при появлении соответствующего запроса).
* В Visual Studio щелкните **Отладка-> начать без отладки** или нажмите клавиши **CTRL + F5**.
* После развертывания приложения в HoloLens закройте фитбокс с помощью жеста касания.
* Переместите руку в режим просмотра и наведите указатель пальца на положение "небесно", чтобы начать отслеживание.
* Переместите руку влево, вправо, вверх и вниз.
* Посмотрите, как меняется вид курсора при обнаружении и утере руки.
* Если вы используете иммерсивное головной телефон, вам потребуется подключиться к контроллеру и отключить его. Этот отзыв становится менее интересным на иммерсивное устройство, так как подключенный контроллер всегда будет "доступен".

## <a name="chapter-2---navigation"></a>Глава 2. Навигация

>[!VIDEO https://www.youtube.com/embed/sm-kxtKksSo]

### <a name="objectives"></a>Цели

* Используйте события жестов навигации для вращения-космонавтам.

### <a name="instructions"></a>Инструкции

Чтобы использовать жесты навигации в нашем приложении, мы собираемся изменить **GestureAction.CS** для поворота объектов при появлении жеста навигации. Кроме того, мы добавим отзыв к курсору, который будет отображаться, когда доступна Навигация.

1. На панели **Иерархия** разверните узел **курсорвисфидбакк**.
2. В папке **голограмм** найдите ресурс **скроллфидбакк** .
3. Перетащите **скроллфидбакк** prefab на **Курсорвисфидбакк** GameObject в **иерархии**.
4. Щелкните **курсорвисфидбакк**.
5. На панели **инспектора** нажмите кнопку **Добавить компонент** .
6. В меню введите **курсорфидбакк** в поле поиска. Выберите результат поиска.
7. Перетащите объект **скроллфидбакк** из **иерархии** в свойство игровое поле, **обнаруженное прокруткой** в окне " **отзыв курсора** " в **инспекторе**.
8. На панели **Иерархия** выберите объект **астроман** .
9. На панели **инспектора** нажмите кнопку **Добавить компонент** .
10. В меню введите **действие жеста** поля поиска. Выберите результат поиска.

Затем откройте **GestureAction.CS** в Visual Studio. В написании упражнения 2. c измените сценарий, чтобы сделать следующее:

1. **Поворот объекта астроман** при выполнении жеста навигации.
2. Вычислите **ротатионфактор** , чтобы управлять объемом вращения, применяемого к объекту.
3. **Поворот объекта** вокруг оси y, когда пользователь перемещает руку влево или вправо.

Выполните кодирование упражнений 2. c в скрипте или замените код завершенным решением ниже:

```cs
using HoloToolkit.Unity.InputModule;
using UnityEngine;

/// <summary>
/// GestureAction performs custom actions based on
/// which gesture is being performed.
/// </summary>
public class GestureAction : MonoBehaviour, INavigationHandler, IManipulationHandler, ISpeechHandler
{
    [Tooltip("Rotation max speed controls amount of rotation.")]
    [SerializeField]
    private float RotationSensitivity = 10.0f;

    private bool isNavigationEnabled = true;
    public bool IsNavigationEnabled
    {
        get { return isNavigationEnabled; }
        set { isNavigationEnabled = value; }
    }

    private Vector3 manipulationOriginalPosition = Vector3.zero;

    void INavigationHandler.OnNavigationStarted(NavigationEventData eventData)
    {
        InputManager.Instance.PushModalInputHandler(gameObject);
    }

    void INavigationHandler.OnNavigationUpdated(NavigationEventData eventData)
    {
        if (isNavigationEnabled)
        {
            /* TODO: DEVELOPER CODING EXERCISE 2.c */

            // 2.c: Calculate a float rotationFactor based on eventData's NormalizedOffset.x multiplied by RotationSensitivity.
            // This will help control the amount of rotation.
            float rotationFactor = eventData.NormalizedOffset.x * RotationSensitivity;

            // 2.c: transform.Rotate around the Y axis using rotationFactor.
            transform.Rotate(new Vector3(0, -1 * rotationFactor, 0));
        }
    }

    void INavigationHandler.OnNavigationCompleted(NavigationEventData eventData)
    {
        InputManager.Instance.PopModalInputHandler();
    }

    void INavigationHandler.OnNavigationCanceled(NavigationEventData eventData)
    {
        InputManager.Instance.PopModalInputHandler();
    }

    void IManipulationHandler.OnManipulationStarted(ManipulationEventData eventData)
    {
        if (!isNavigationEnabled)
        {
            InputManager.Instance.PushModalInputHandler(gameObject);

            manipulationOriginalPosition = transform.position;
        }
    }

    void IManipulationHandler.OnManipulationUpdated(ManipulationEventData eventData)
    {
        if (!isNavigationEnabled)
        {
            /* TODO: DEVELOPER CODING EXERCISE 4.a */

            // 4.a: Make this transform's position be the manipulationOriginalPosition + eventData.CumulativeDelta
        }
    }

    void IManipulationHandler.OnManipulationCompleted(ManipulationEventData eventData)
    {
        InputManager.Instance.PopModalInputHandler();
    }

    void IManipulationHandler.OnManipulationCanceled(ManipulationEventData eventData)
    {
        InputManager.Instance.PopModalInputHandler();
    }

    void ISpeechHandler.OnSpeechKeywordRecognized(SpeechEventData eventData)
    {
        if (eventData.RecognizedText.Equals("Move Astronaut"))
        {
            isNavigationEnabled = false;
        }
        else if (eventData.RecognizedText.Equals("Rotate Astronaut"))
        {
            isNavigationEnabled = true;
        }
        else
        {
            return;
        }

        eventData.Use();
    }
}
```

Вы заметите, что другие события навигации уже заполнены некоторыми сведениями. Мы принудительно GameObject в модальный стек Инпутсистем'с в наборе, поэтому пользователю не нужно поддерживать фокус на-космонавтам после начала вращения. Соответственно, при завершении жеста GameObjectся из стека.

### <a name="build-and-deploy"></a>Построение и Развертывание

1. Перестройте приложение в Unity, а затем выполните сборку и развертывание из Visual Studio, чтобы запустить его в HoloLens.
2. Взгляните на-космонавтам, на обеих сторонах курсора должны появиться две стрелки. Этот новый визуальный элемент означает, что-космонавтам можно поворачивать.
3. Поместите руку в готовую позицию (указатель пальца, указывающий на перевозки), чтобы HoloLens начал отслеживать свою руку.
4. Чтобы повернуть-космонавтам, уменьшите индекс пальца до позиции сжатия, а затем переместите руку влево или вправо, чтобы активировать жест Навигатионкс.

## <a name="chapter-3---hand-guidance"></a>Глава 3. Руководство по использованию

>[!VIDEO https://www.youtube.com/embed/ULzlVw4e14I]

### <a name="objectives"></a>Цели

* Используйте **оценку руководства** для прогнозирования того, что отслеживание будет потеряно.
* Оставить **отзыв о курсоре** , чтобы показать, когда рука пользователя приближается к границе представления.

### <a name="instructions"></a>Инструкции

1. На панели **Иерархия** выберите объект **курсорвисфидбакк** .
2. На панели **инспектора** нажмите кнопку **Добавить компонент** .
3. В меню введите в поле **поиска.** Выберите результат поиска.
4. В папке **голограммы** на панели **проекта** найдите ресурс **хандгуиданцефидбакк** .
5. Перетащите ресурс **хандгуиданцефидбакк** в свойство **индикатор "рука** " на панели **инспектора** .

### <a name="build-and-deploy"></a>Построение и Развертывание

* Перестройте приложение в Unity, а затем выполните сборку и развертывание из Visual Studio для работы с приложением в HoloLens.
* Перенесите руку, чтобы просмотреть и подать указатель на палец.
* Начните вращение-космонавтам с помощью жеста навигации (сжатие индекса и палец вместе).
* Переместите руку налево, вправо, вверх и вниз.
* По мере того, как приближается граница рамки жеста, рядом с курсором должна появиться стрелка, чтобы предупредить, что отслеживание будет потеряно. Стрелка указывает направление движения руки, чтобы предотвратить потерю отслеживания.

## <a name="chapter-4---manipulation"></a>Глава 4. Управление

>[!VIDEO https://www.youtube.com/embed/f3m8MvU60-I]

### <a name="objectives"></a>Цели

* Используйте события манипуляции для перемещения-космонавтам с помощью стрелок.
* Предоставьте отзыв о курсоре, чтобы пользователь мог понять, когда можно использовать манипуляцию.

### <a name="instructions"></a>Инструкции

GestureManager.cs и AstronautManager.cs позволят нам выполнить следующие действия:

1. Используйте ключевое слово "**Move-космонавтам**" для распознавания речи, чтобы включить жесты **манипуляции** и "**повернуть-космонавтам**", чтобы отключить их.
2. Переключитесь на реакцию **распознавателя жестов манипуляции**.

Давайте начнем.

1. На панели **Иерархия** создайте новый пустой GameObject. Назовите его "**астронаутманажер**".
2. На панели **инспектора** нажмите кнопку **Добавить компонент** .
3. В меню введите **-космонавтам Manager** в поле поиска. Выберите результат поиска.
4. На панели **инспектора** нажмите кнопку **Добавить компонент** .
5. В меню введите в поле поиска **речевой вход источник**. Выберите результат поиска.

Теперь мы добавим речевые команды, необходимые для управления состоянием взаимодействия-космонавтам.

1. Разверните раздел **Ключевые слова** в **инспекторе**.
2. Щелкните в **+** правой части, чтобы добавить новое ключевое слово.
3. Введите ключевое слово как **Move-космонавтам**. При необходимости вы можете добавить сочетание клавиш.
4. Щелкните в **+** правой части, чтобы добавить новое ключевое слово.
5. Введите ключевое слово " **повернуть-космонавтам**". При необходимости вы можете добавить сочетание клавиш.
6. Соответствующий код обработчика можно найти в **GestureAction.CS** в обработчике **испичхандлер. онспичкэйвордрекогнизед** .

![Настройка источника речевого ввода в главе 4](images/holograms211-speech.png)

Далее мы назовем обратную связь по манипуляции с курсором.

1. В папке **голограммы** на панели **проекта** найдите ресурс **пасингфидбакк** .
2. Перетащите **пасингфидбакк** prefab на объект **курсорвисфидбакк** в **иерархии**.
3. На панели **Иерархия** щелкните **курсорвисфидбакк**.
4. Перетащите объект **пасингфидбакк** из **иерархии** на обнаруженное пользователем свойство **игрового объекта** в компоненте **обратной связи** в **инспекторе**.

Теперь необходимо добавить код в **GestureAction.CS** , чтобы включить следующие возможности:

1. Добавьте код в функцию **иманипулатионхандлер. онманипулатионупдатед** , которая переместит-космонавтам при обнаружении жеста **манипуляции** .
2. Вычислите **вектор перемещения** , чтобы определить, куда следует переместить-космонавтам в зависимости от положения.
3. **Переместите** -космонавтам в новое положение.

Завершите написание упражнения 4. a в **GestureAction.CS** или используйте наше завершенное решение ниже:

```cs
using HoloToolkit.Unity.InputModule;
using UnityEngine;

/// <summary>
/// GestureAction performs custom actions based on
/// which gesture is being performed.
/// </summary>
public class GestureAction : MonoBehaviour, INavigationHandler, IManipulationHandler, ISpeechHandler
{
    [Tooltip("Rotation max speed controls amount of rotation.")]
    [SerializeField]
    private float RotationSensitivity = 10.0f;

    private bool isNavigationEnabled = true;
    public bool IsNavigationEnabled
    {
        get { return isNavigationEnabled; }
        set { isNavigationEnabled = value; }
    }

    private Vector3 manipulationOriginalPosition = Vector3.zero;

    void INavigationHandler.OnNavigationStarted(NavigationEventData eventData)
    {
        InputManager.Instance.PushModalInputHandler(gameObject);
    }

    void INavigationHandler.OnNavigationUpdated(NavigationEventData eventData)
    {
        if (isNavigationEnabled)
        {
            /* TODO: DEVELOPER CODING EXERCISE 2.c */

            // 2.c: Calculate a float rotationFactor based on eventData's NormalizedOffset.x multiplied by RotationSensitivity.
            // This will help control the amount of rotation.
            float rotationFactor = eventData.NormalizedOffset.x * RotationSensitivity;

            // 2.c: transform.Rotate around the Y axis using rotationFactor.
            transform.Rotate(new Vector3(0, -1 * rotationFactor, 0));
        }
    }

    void INavigationHandler.OnNavigationCompleted(NavigationEventData eventData)
    {
        InputManager.Instance.PopModalInputHandler();
    }

    void INavigationHandler.OnNavigationCanceled(NavigationEventData eventData)
    {
        InputManager.Instance.PopModalInputHandler();
    }

    void IManipulationHandler.OnManipulationStarted(ManipulationEventData eventData)
    {
        if (!isNavigationEnabled)
        {
            InputManager.Instance.PushModalInputHandler(gameObject);

            manipulationOriginalPosition = transform.position;
        }
    }

    void IManipulationHandler.OnManipulationUpdated(ManipulationEventData eventData)
    {
        if (!isNavigationEnabled)
        {
            /* TODO: DEVELOPER CODING EXERCISE 4.a */

            // 4.a: Make this transform's position be the manipulationOriginalPosition + eventData.CumulativeDelta
            transform.position = manipulationOriginalPosition + eventData.CumulativeDelta;
        }
    }

    void IManipulationHandler.OnManipulationCompleted(ManipulationEventData eventData)
    {
        InputManager.Instance.PopModalInputHandler();
    }

    void IManipulationHandler.OnManipulationCanceled(ManipulationEventData eventData)
    {
        InputManager.Instance.PopModalInputHandler();
    }

    void ISpeechHandler.OnSpeechKeywordRecognized(SpeechEventData eventData)
    {
        if (eventData.RecognizedText.Equals("Move Astronaut"))
        {
            isNavigationEnabled = false;
        }
        else if (eventData.RecognizedText.Equals("Rotate Astronaut"))
        {
            isNavigationEnabled = true;
        }
        else
        {
            return;
        }

        eventData.Use();
    }
}
```

### <a name="build-and-deploy"></a>Построение и Развертывание

* Перестройте в Unity, а затем выполните сборку и развертывание из Visual Studio, чтобы запустить приложение в HoloLens.
* Переместите руку перед HoloLens и поднимите палец указателя, чтобы его можно было относить.
* Сосредоточьте курсор на-космонавтам.
* Скажите "Move-космонавтам", чтобы переместить-космонавтам с помощью жеста манипуляции.
* Вокруг курсора должны появиться четыре стрелки, чтобы показать, что программа будет реагировать на события манипуляции.
* Уменьшите индекс пальца до бегунка и сохраните их вместе.
* Когда вы перемещаете свою руку,-космонавтам тоже перемещается (это манипуляция).
* Поднимите указатель пальца, чтобы прерывать работу-космонавтам.
* Примечание. Если вы не говорите "Move-космонавтам" перед перемещением руки, вместо этого будет использоваться жест навигации.
* Скажите "повернуть-космонавтам", чтобы вернуться к состоянию ротатабле.

## <a name="chapter-5---model-expansion"></a>Глава 5-расширение модели

>[!VIDEO https://www.youtube.com/embed/dA11P4P0VO8]

### <a name="objectives"></a>Цели

* Разверните модель-космонавтам на несколько небольших частей, с которыми может взаимодействовать пользователь.
* Перемещение каждого элемента по отдельности с помощью жестов навигации и манипуляций.

### <a name="instructions"></a>Инструкции

В этом разделе мы будем выполнять следующие задачи:

1. Добавьте новое ключевое слово "**развернуть модель**", чтобы развернуть модель-космонавтам.
2. Добавьте новое ключевое слово "**сбросить модель**", чтобы вернуть модель в исходную форму.

Это делается путем добавления еще двух ключевых слов в источник речевого ввода из предыдущей главы. Мы также покажем другой способ для работы с событиями распознавания.

1. Щелкните назад в **астронаутманажер** в **инспекторе** и разверните раздел **Ключевые слова** в **инспекторе**.
2. Щелкните в **+** правой части, чтобы добавить новое ключевое слово.
3. Введите ключевое слово как **развернуть модель**. При необходимости вы можете добавить сочетание клавиш.
4. Щелкните в **+** правой части, чтобы добавить новое ключевое слово.
5. Введите ключевое слово как **Сброс модели**. При необходимости вы можете добавить сочетание клавиш.
6. На панели **инспектора** нажмите кнопку **Добавить компонент** .
7. В меню введите **обработчик речевого ввода** для поля поиска. Выберите результат поиска.
8. Проверьте **глобальный прослушиватель**, так как мы хотим, чтобы эти команды работали независимо от GameObject, на который мы работаем.
9. Нажмите кнопку **+** и выберите **развернуть модель** в раскрывающемся списке ключевое слово.
10. Щелкните в **+** разделе ответ и перетащите **Астронаутманажер** из **иерархии** в поле **None (Object) (нет (объект))** .
11. Теперь щелкните раскрывающийся список **без функции** , выберите **астронаутманажер**, а затем **експандмоделкомманд**.
12. Нажмите кнопку обработчик речевого ввода **+** и выберите **сбросить модель** из раскрывающегося списка ключевых слов.
13. Щелкните в **+** разделе ответ и перетащите **Астронаутманажер** из **иерархии** в поле **None (Object) (нет (объект))** .
14. Теперь щелкните раскрывающийся список **без функции** , выберите **астронаутманажер**, а затем **ресетмоделкомманд**.

![Настройка источника речевого ввода и обработчика для главы 5](images/holograms211-speechhandler.png)

### <a name="build-and-deploy"></a>Построение и Развертывание

* Тестирование Выполните сборку и развертывание приложения в HoloLens.
* Например, **разверните модель** , чтобы увидеть развернутую модель-космонавтам.
* Используйте **навигацию** для вращения отдельных частей-космонавтам масти.
* Скажем, **переместить-космонавтам** , а затем использовать **манипуляции** для перемещения отдельных частей-космонавтам масти.
* Например, **поверните-космонавтам** , чтобы снова повернуть шашки.
* Произнесите **Сброс модели** , чтобы вернуть-космонавтам к исходной форме.

## <a name="the-end"></a>Конец

Поздравляем! Теперь вы выполнили **Ввод MR 211: жест**.

* Вы узнали, как обнаруживать события отслеживания, навигации и манипуляции, а также реагировать на них.
* Вы понимаете разницу между жестами навигации и манипуляциями.
* Вы узнаете, как изменить курсор, чтобы обеспечить визуальную обратную связь при обнаружении руки, когда рука собирается потеряться и когда объект поддерживает различные взаимодействия (Навигация и манипуляция).