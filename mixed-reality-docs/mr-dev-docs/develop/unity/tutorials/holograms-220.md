---
title: 220. HoloLens (1-го поколения). Пространство —пространственный звук
description: выполните приведенное ниже пошаговое руководство по программированию с помощью Unity, Visual Studio и HoloLens, чтобы узнать о концепциях пространственных звуков.
author: keveleigh
ms.author: kurtie
ms.date: 10/22/2019
ms.topic: article
keywords: холотулкит, микседреалититулкит, микседреалититулкит-unity, academy, руководство, пространственный звук, HoloLens, academyная реальность, unity, гарнитура смешанной реальности, гарнитура windows mixed reality, гарнитура виртуальной реальности, Windows 10
ms.openlocfilehash: 57aa9d87c783b28c438b81824fad3ca788fa1938
ms.sourcegitcommit: bea83261bf9ce7a27a618e5bc54dc4d7711f5435
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2021
ms.locfileid: "130155545"
---
# <a name="hololens-1st-gen-spatial-220-spatial-sound"></a>HoloLens (1-й общий) пространственный 220: пространственный звук

>[!IMPORTANT]
>учебники по смешанной реальности Academy были разработаны с учетом HoloLens (1-го поколения), Unity 2017 и впечатляющих головных телефонов смешанной реальности.  Поэтому мы считаем, что важно оставить эти руководства для разработчиков, которые ищут рекомендации по разработке для этих устройств. эти учебники **_не_** будут обновлены с использованием последних наборов инструментов или взаимодействий, используемых для HoloLens 2 и могут быть несовместимы с более новыми версиями Unity.  Они будут сохранены для работы на поддерживаемых устройствах. Опубликован [новый цикл руководств](mrlearning-base.md) для HoloLens 2.

[Пространственный звук](../../../design/spatial-sound.md) бреасес в голограммы и дает им присутствие в нашей жизни. Голограммы состоят из светлого и звукового, и если вы не сможете понять, что вы видите голограммы, пространственный звук поможет вам найти их. Пространственный звук не похож на типичный звук, который вы услышите на Радио, это звук, расположенный в трехмерном пространстве. Благодаря пространственному звучанию голограммы могут выглядеть так, как они находятся за вами, рядом с вами или даже на головном компьютере. В этом курсе будут:

* Настройка среды разработки для использования пространственного звука Майкрософт.
* Используйте Пространственный звук для улучшения взаимодействия.
* Использование пространственного звука в сочетании с [пространственным сопоставлением](../../../design/spatial-mapping.md).
* Общие сведения о проектировании звука и смешении рекомендаций.
* Используйте звук для улучшения специальных эффектов и перенесите пользователя в мир смешанной реальности.

## <a name="device-support"></a>Поддержка устройств

<table>
<tr>
<th>Курс</th><th style="width:150px"> <a href="/hololens/hololens1-hardware">HoloLens</a></th><th style="width:150px"> <a href="../../../discover/immersive-headset-hardware-details.md">Иммерсивные гарнитуры</a></th>
</tr><tr>
<td>220. Пространство в смешанной реальности: пространственный звук</td><td style="text-align: center;"> ✔️</td><td style="text-align: center;"> ✔️</td>
</tr>
</table>

## <a name="before-you-start"></a>Прежде чем начать

### <a name="prerequisites"></a>Предварительные условия

* Windows 10 пк, настроенный с [установленными инструментами](../../../develop/install-the-tools.md).
* Некоторые основные возможности программирования на C#.
* Вы должны были выполнить [Основные сведения о MR 101](../../../develop/unity/tutorials/holograms-101.md).
* устройство HoloLens, [настроенное для разработки](../../../develop/advanced-concepts/using-visual-studio.md#enabling-developer-mode).

### <a name="project-files"></a>Файлы проекта

* Скачайте [файлы](https://github.com/Microsoft/HolographicAcademy/archive/Holograms-220-SpatialSound.zip) , необходимые для проекта. Требуется Unity 2017,2 или более поздней версии.
  * Если вам по-прежнему требуется поддержка Unity 5,6, используйте [Этот выпуск](https://github.com/Microsoft/HolographicAcademy/archive/v1.5.6-220.zip). Этот выпуск может больше не быть обновлен.
  * Если вам по-прежнему требуется поддержка Unity 5,5, используйте [Этот выпуск](https://github.com/Microsoft/HolographicAcademy/archive/v1.5.5-220.zip). Этот выпуск может больше не быть обновлен.
  * Если вам по-прежнему требуется поддержка Unity 5,4, используйте [Этот выпуск](https://github.com/Microsoft/HolographicAcademy/archive/v1.5.4-220.zip). Этот выпуск может больше не быть обновлен.
* Отмена архивации файлов на Рабочий стол или другого места для удобства доступа.

>[!NOTE]
>Если вы хотите просмотреть исходный код перед загрузкой, он будет [доступен на GitHub](https://github.com/Microsoft/HolographicAcademy/tree/Holograms-220-SpatialSound).

### <a name="errata-and-notes"></a>Ошибки и примечания

* параметр "включить Только мой код" должен быть отключен (*снят*) в Visual Studio в разделе сервис->параметры — >отладка для попадания в код точек останова в коде.

## <a name="chapter-1---unity-setup"></a>Глава 1. Установка Unity

### <a name="objectives"></a>Задачи

* Измените конфигурацию звука Unity, чтобы использовать пространственный звук Майкрософт.
* Добавьте трехмерный звук в объект в Unity.

### <a name="instructions"></a>Инструкции

* Запустите Unity.
* Выберите **Открыть**.
* Перейдите к рабочему столу и найдите папку, для которой был отменен Архив.
* Щелкните папку **стартинг\деЦибел** , а затем нажмите кнопку **Выбор папки** .
* Дождитесь загрузки проекта в Unity.
* на панели **Project** откройте **сценес\деЦибел.унити**.
* На панели **Иерархия** разверните узел **Холограмколлектион** и выберите **P0LY**.
* В инспекторе разверните узел **аудиосаурце** и обратите внимание, что флажок **спатиализе** не установлен.

По умолчанию Unity не загружает подключаемый модуль спатиализер. Следующие шаги позволят включить Пространственный звук в проекте.

* в верхнем меню Unity перейдите в раздел **Edit > Project Параметры > Audio**.
* Найдите раскрывающийся список **подключаемого модуля спатиализер** и выберите **MS хртф спатиализер**.
* На панели **Иерархия** выберите **холограмколлектион > P0LY**.
* На панели **инспектора** найдите компонент **источник аудио** .
* Установите флажок **спатиализе** .
* Перетащите ползунок **пространственного смешения** на **3D** или введите **1** в поле ввода.

Теперь создадим проект в Unity и настроим решение в Visual Studio.

1. в Unity выберите **файл > сборка Параметры**.
2. Щелкните **Добавить открытые сцены** , чтобы добавить сцену.
3. выберите **универсальная платформа Windows** в списке **платформа** и щелкните **параметр платформа**.
4. если вы специально разрабатываете для HoloLens, задайте для параметра **целевое устройство** значение **HoloLens**. В противном случае оставьте его на **любом устройстве**.
5. Убедитесь, что для **типа сборки** задано значение **D3D** и **пакет SDK** установлен в значение " **Последняя установленная версия** " (это должен быть пакет SDK 16299 или более поздней версии).
6. Щелкните **Построить**.
7. Создайте **новую папку** с именем App.
8. Щелкните папку **приложения** одним щелчком мыши.
9. Нажмите кнопку **выбрать папку**.

После завершения Unity появится окно проводника.

1. Откройте папку **приложения** .
2. откройте **решение шкала Visual Studio**.

При развертывании в HoloLens:

1. с помощью верхней панели инструментов в Visual Studio измените целевой объект с отладка на **выпуск** и с ARM на **x86**.
2. Щелкните стрелку раскрывающегося списка рядом с кнопкой локальный компьютер и выберите **Удаленный компьютер**.
3. введите **IP-адрес устройства HoloLens** и задайте для параметра режим проверки подлинности значение **универсальный (незашифрованный протокол)**. Нажмите кнопку **Выбрать**. если вы не знакомы с IP-адресом устройства, найдите **Параметры > сеть & интернет > дополнительные параметры**.
4. В верхней строке меню щелкните **Отладка-> начать без отладки** или нажмите клавиши **CTRL + F5**. При первом развертывании на устройстве необходимо [связать его с Visual Studio](../../../develop/advanced-concepts/using-visual-studio.md#pairing-your-device).

При развертывании на иммерсивное головной телефон:

1. с помощью верхней панели инструментов в Visual Studio измените целевой объект с отладка на **выпуск** и с ARM на **x64**.
2. Убедитесь, что для целевого объекта развертывания задано значение **локальный компьютер**.
3. В верхней строке меню щелкните **Отладка-> начать без отладки** или нажмите клавиши **CTRL + F5**.

## <a name="chapter-2---spatial-sound-and-interaction"></a>Глава 2 — Пространственный звук и взаимодействие

### <a name="objectives"></a>Задачи

* Улучшайте реальную голограмму с помощью звука.
* Направление взгляда пользователя с помощью звука.
* Обеспечение обратной связи с жестами с помощью звука.

### <a name="part-1---enhancing-realism"></a>Часть 1. улучшение режима реального времени

#### <a name="key-concepts"></a>Основные понятия

* Спатиализе голограммы.
* Звуковые источники должны размещаться в соответствующем месте на голограмме.

Соответствующее расположение звука зависит от голограммы. Например, если голограмма является человеком, то источник звука должен располагаться рядом с рот, а не с ножками.

#### <a name="instructions"></a>Инструкции

Приведенные ниже инструкции присоединяют Пространственный звук к голограмме.

* На панели **Иерархия** разверните узел **Холограмколлектион** и выберите **P0LY**.
* На панели **инспектора** в **аудиосаурце** щелкните окружность рядом с элементом **аудиоклип** и выберите пункт с помощью **мыши** в раскрывающемся списке.
* Щелкните окружность рядом с элементом **выходные данные** и выберите **саундеффектс** во всплывающем окне.

Project Шкала использует компонент **Аудиомиксер** Unity, чтобы включить настройку уровней звука для групп звуков. Группируя звуки таким образом, можно настроить общий том, сохраняя относительный объем каждого звука.

* в **аудиосаурце** раскройте **3d Sound Параметры**.
* Задайте для **уровня Doppler** значение **0**.

Если установить для уровня Doppler значение 0, изменения в пошаговом режиме переопределяются движением (какой-либо голограммой или пользователем). Классический пример Doppler — это быстрый автомобиль. Когда автомобиль приближается к стационарному прослушивателю, его шаг растет. Когда прослушиватель проходит, шаг уменьшается на расстояние.

### <a name="part-2---directing-the-users-gaze"></a>Часть 2. Направление взгляда пользователя

#### <a name="key-concepts"></a>Основные понятия

* Используйте звук для привлечения внимания к важным голограммам.
* Ушки помогает непосредственно искать глаза.
* Мозг имеет некоторые полученные ожидания.

Одним из примеров полученных ожиданий является то, что птиц обычно находится над головами людей. Если пользователь слышит звук с высоты птичьего полета, его первоначальная реакция заключается в поиске. Размещение высоты под пользователем может привести к тому, что они будут направлены на правильное направление звука, но не смогут найти голограмму в зависимости от того, что нужно найти.

#### <a name="instructions"></a>Instructions

Следующие инструкции позволяют P0LY скрываться за вас, чтобы можно было использовать звук для нахождение голограммы.

* На панели **Иерархия** выберите **Диспетчеры**.
* На панели **инспектора** найдите **обработчик речевого ввода**.
* В **обработчике речевого ввода** разверните узел **Скрыть**.
* Не изменяйте **функцию** на **действия с гохиде**.

![Ключевое слово: Hide](images/gohide.png)

### <a name="part-3---gesture-feedback"></a>Часть 3. Обратная связь по жестам

#### <a name="key-concepts"></a>Основные понятия

* Предоставление пользователю положительного подтверждения жеста с помощью звука
* Не перегружать пользователей с помощью звуковых эффектов
* Небольшие звуки работают наилучшим образом — не конфликтовали опыт работы

#### <a name="instructions"></a>Инструкции

* На панели **Иерархия** разверните узел **холограмколлектион**.
* Разверните узел **енергихуб** и выберите **базовый**.
* На панели **инспектора** щелкните **Добавить компонент** и добавить **обработчик звука жестов**.
* В **обработчике звука жеста** щелкните окружность рядом с элементом **Навигация начатый** клип и **Навигация обновленный клип** , а затем в раскрывающемся списке выберите **ротатекликк** .
* Дважды щелкните "Жестуресаундхандлер", чтобы загрузить в Visual Studio.

Обработчик звука жестов выполняет следующие задачи:

* Создание и настройка **аудиосаурце**.
* Поместите **аудиосаурце** в расположение соответствующего **GameObject**.
* Воспроизводит **аудиоклип** , связанный с жестом.

#### <a name="build-and-deploy"></a>Построение и Развертывание

1. в Unity выберите **файл > сборка Параметры**.
2. Щелкните **Построить**.
3. Щелкните папку **приложения** одним щелчком мыши.
4. Нажмите кнопку **выбрать папку**.

Убедитесь, что на панели инструментов указано "выпуск", "x86" или "x64", а также "удаленное устройство". В противном случае это экземпляр кода Visual Studio. Возможно, потребуется повторно открыть решение из папки приложения.

* При появлении запроса перезагрузите файлы проекта.
* Как и ранее, выполните развертывание из Visual Studio.

После развертывания приложения:

* Посмотрите, как изменяется звук при перемещении вокруг P0LY.
* Скажите *«Скрыть»* , чтобы P0LY переместиться в нужное место. Найдите его по звуковому сигналу.
* Взгляните на основу концентратора энергии. Нажмите и перетащите влево или вправо, чтобы повернуть голограмму, и обратите внимание на то, как щелчок звука подтверждает жест.

Примечание. есть панель текста, которая будет помечаться вместе с вами. В этом курсе будут содержаться доступные голоса команды, которые можно использовать в рамках этого курса.

## <a name="chapter-3---spatial-sound-and-spatial-mapping"></a>Глава 3 — Пространственный звук и пространственное сопоставление

### <a name="objectives"></a>Задачи

* Проверьте взаимодействие между голограммами и реальным миром с помощью звука.
* Окклуде звук с помощью физического мира.

### <a name="part-1---physical-world-interaction"></a>Часть 1. взаимодействие физического мира

#### <a name="key-concepts"></a>Основные понятия

* Физические объекты обычно выявляются звуком при обнаружении поверхности или другого объекта.
* Звук должен соответствовать контексту в рамках интерфейса.

Например, при настройке кружка в таблице должен быть скрыт звуковой сигнал, чем удаление Баулдер на куске металла.

#### <a name="instructions"></a>Instructions

* На панели **Иерархия** разверните узел **холограмколлектион**.
* Разверните узел **енергихуб**, выберите **базовый**.
* На панели **инспектора** щелкните **Добавить компонент** и добавить **касание, чтобы поместить звук и действие**.
* **Коснитесь, чтобы поместить звук и действие**:
  * Установите флажок " **родительский элемент" для TAP**.
  * Задание **звукового сопровождения** **для** размещения.
  * Установка **звука подбора** для **отправки**.
  * Нажмите кнопку + в правом нижнем углу в разделе **действие отправки** и **действие при размещении**. Перетащите Енергихуб из сцены в поля **нет (объект)** .
    * В разделе **действие при отправке** щелкните **нет функции**  ->  **енергихуббасе**  ->  **ресетаниматион**.
    * В разделе **действие при размещении** щелкните **нет функции**  ->  **енергихуббасе**  ->  **OnSelect**.

![Коснитесь, чтобы поместить звук и действие](images/holograms220-taptoplace.png)

### <a name="part-2---sound-occlusion"></a>Часть 2. звук перекрытия

#### <a name="key-concepts"></a>Основные понятия

* Звук, как и Light, может быть перекрыто.

Классический пример — это концертный зал. Если прослушиватель находится за пределами зал, а дверца закрыта, музыка звучит муффлед. Также обычно уменьшается объем тома. Когда дверца открыта, весь спектр звуковых значений будет слышен на самом томе. Обычно звуки с высокой частотой обрабатываются более низкой частотой.

#### <a name="instructions"></a>Instructions

* На панели **Иерархия** разверните узел **Холограмколлектион** и выберите **P0LY**.
* На панели **инспектора** щелкните **Добавить компонент** и добавить **аудио передатчик**.

Класс аудио передатчика предоставляет следующие возможности.

* Восстанавливает все изменения в томе **аудиосаурце**.
* Выполняет объект **физик. райкастноналлок** из расположения пользователя в направлении **GameObject** , к которому присоединена **аудиоемиттер** .

Метод Райкастноналлок используется в качестве оптимизации производительности для ограничения распределения, а также количества возвращаемых результатов.

* Для каждого обнаруженного **иаудиоинфлуенцер** вызывает метод **апплеффект** .
* Для всех предыдущих **иаудиоинфлуенцер** , которые больше не встречаются, вызовите метод **ремовиффект** .

Обратите внимание, что Аудиоемиттер обновляет шкалы времени, а не на основе каждого кадра. Это делается потому, что люди обычно не перемещаются достаточно быстро, чтобы их обновление выполнялось чаще, чем каждый квартал или половина секунды. Голограммы, что телепортироваться быстро из одного места в другое может привести к нарушению иллюзии.

* На панели **Иерархия** разверните узел **холограмколлектион**.
* Разверните узел **енергихуб** и выберите **блобаутсиде**.
* На панели **инспектора** щелкните **Добавить компонент** и добавить **Audio окклудер**.
* В **Audio окклудер** задайте для параметра **частота отсечки** значение **1500**.

Этот параметр ограничивает частоту Аудиосаурце до 1500 Гц и ниже.

* Задайте для параметра **Volume сквозное** значение **0,9**.

Этот параметр сокращает объем Аудиосаурце до 90% от текущего уровня.

Audio Окклудер реализует Иаудиоинфлуенцер для:

* Примените перекрытияный результат с помощью **аудиоловпассфилтер** , который подключается к **Аудиосаурце** управления купить **аудиоемиттер**.
* Применяет ослабление громкости к Аудиосаурце.
* Отключает действие, устанавливая независимую частоту отсечки и отключая фильтр.

Частота, используемая как нейтральная, — 22 кГц (22000 Гц). Эта частота была выбрана по причине превышения номинальной максимальной частоты, которая может быть продолжена от человеческого звучания, что не повлияет на звук.

* На панели **Иерархия** выберите **спатиалмаппинг**.
* На панели **инспектора** щелкните **Добавить компонент** и добавить **Audio окклудер**.
* В **Audio окклудер** задайте для параметра **частота отсечки** значение **750**.

Если между пользователем и **аудиоемиттер** находится несколько окклудерс, к фильтру применяется самая низкая частота.

* Задайте для параметра **Volume сквозное** значение **0,75**.

Если в пути между пользователем и **аудиоемиттер** находится несколько окклудерс, то этот том применяется аддитивно.

* На панели **Иерархия** выберите **Диспетчеры**.
* На панели **инспектора** разверните **обработчик речевого ввода**.
* В **обработчике речевого ввода** раскройте раздел **плата за начисление**.
* Не изменяйте **функцию** на **действия с гочарже**.

![Ключевое слово: плата за подставку](images/gocharge.png)

* Разверните **здесь**.
* Не изменяйте **функцию** на **действия с комебакк**.

![Ключевое слово:](images/comehere.png)

#### <a name="build-and-deploy"></a>Построение и Развертывание

* Как и ранее, создайте проект в Unity и разверните его в Visual Studio.

После развертывания приложения:

* Скажите *«выставить плату»* , чтобы у P0LY был вход в центр энергии.

Обратите внимание на изменение звука. Он должен звучит муффлед и немного тихо. Если вы можете разместить себя на стене или другом объекте между вами и концентратором энергии, вы должны заметить еще один муффлинг звука из-за перекрытия в реальном мире.

* Скажем, *"Приходите сюда"* , чтобы P0LY не выходить из концентратора энергии и располагать его в начале работы.

Обратите внимание, что звуковой перекрытия удаляется после того, как P0LY выходит из концентратора энергии. Если вы по-прежнему слышите перекрытия, P0LY может быть перекрыто в реальном мире. Попробуйте переместить, чтобы убедиться, что у вас есть четкое представление о P0LY.

### <a name="part-3---room-models"></a>Часть 3. модели комнаты

#### <a name="key-concepts"></a>Основные понятия

* Размер пространства предоставляет очереди сублиминал, которые способствуют локализации звука.
* Модели комнаты задаются для каждого **аудиосаурце**.
* [Микседреалититулкит для Unity](https://github.com/Microsoft/MixedRealityToolkit-Unity) предоставляет код для настройки модели комнаты.
* Для возможностей смешанной реальности выберите модель комнаты, которая лучше всего соответствует реальному пространству.

При создании сценария виртуальной реальности выберите модель комнаты, которая лучше подходит для виртуальной среды.

## <a name="chapter-4---sound-design"></a>Глава 4. Создание звуковых эффектов

### <a name="objectives"></a>Задачи

* Общие сведения о эффективной разработке звука.
* Узнайте, как смешивать методики и рекомендации.

### <a name="part-1---sound-and-experience-design"></a>Часть 1. проектирование звука и опыта

В этом разделе обсуждаются ключевые моменты и рекомендации по проектированию.

#### <a name="normalize-all-sounds"></a>Нормализовать все звуки

Это позволяет избежать необходимости в специальном коде, чтобы настроить уровень громкости для звука, что может занимать много времени и ограничивает возможность простого обновления звуковых файлов.

#### <a name="design-for-an-untethered-experience"></a>Проектирование для неинтерактивного интерфейса

HoloLens — это полностью автономный компьютер с неустановленным модемом holographic. Ваши пользователи могут и будут использовать ваши возможности во время перемещения. Не забудьте протестировать звуковой микшер, прополнив обход.

#### <a name="emit-sound-from-logical-locations-on-your-holograms"></a>Выдавать звук из логических расположений на голограммах

В реальной жизни собака не лай от своего заключительного фрагмента, а речь не поступает из своих метров. Старайтесь не создавать звуки на основе непредвиденных частей голограмм.

Для небольших голограмм целесообразно, чтобы звук выдавался из центра геометрии.

#### <a name="familiar-sounds-are-most-localizable"></a>Привычные звуки являются наиболее подлежат локализации

Возможность локализации с человеческого голоса и музыки очень проста. Если кто-то вызывает ваше имя, вы сможете точно определить, откуда поступило направление голоса и с какого края. Короткие, неизвестные звуки сложнее локализовать.

#### <a name="be-cognizant-of-user-expectations"></a>Компания cognizant ожидания пользователей

Жизненный цикл играет определенную часть в возможности определения местоположения звука. Это одна из причин, по которой человеческий разговор особенно прост в локализации. При помещении звуков важно помнить о предполагаемых изменениях пользователя.

Например, когда кто-то слышит песню с заполнением, обычно они ищутся, так как птиц, как правило, находится над линией (перелетаем или в дереве). Нередко пользователь может включить правильное направление звука, но взгляните на неправильное вертикальное направление и не будет путать или разочаровано, если не удается найти голограмму.

#### <a name="avoid-hidden-emitters"></a>Избегайте скрытых передатчиков

В реальной жизни, если мы слышите звук, можно, как правило, найти объект, который порождает звук. Это также должно иметь значение true в своих впечатлениях. Это может быть очень неудобно для пользователей услышать звук, знать, откуда поступает звук и не удается увидеть объект.

В этой рекомендации есть некоторые исключения. Например, окружающие звуки, такие как криккетс в поле, не должны быть видимыми. Жизненный цикл позволяет нам ознакомиться с источником этих звуков без необходимости его просмотра.

### <a name="part-2---sound-mixing"></a>Часть 2. Микширование звука

#### <a name="target-your-mix-for-70-volume-on-the-hololens"></a>Нацеливание на набор томов на 70% на HoloLens

Опыт работы в смешанной реальности позволяет видеть голограммы в реальном мире. Они также должны позволять слышать реальные звуки. Целевой объект тома 70% позволяет пользователю слышать мир по всему миру, а также звуковое сопровождение.

#### <a name="hololens-at-100-volume-should-drown-out-external-sounds"></a>HoloLens на 100% тома должны drown внешние звуки

Уровень громкости 100% связан с возможностями виртуальной реальности. Визуально пользователь переносится в другой мир. То же самое должно содержаться в значении true воспроизвести.

#### <a name="use-the-unity-audiomixer-to-adjust-categories-of-sounds"></a>Настройка категорий звуков с помощью Unity Аудиомиксер

При проектировании Mix часто бывает полезно создавать категории звуковых сигналов и иметь возможность увеличивать или уменьшать объем тома как единое целое. Это позволяет хранить относительные уровни каждого звука, одновременно позволяя быстро и легко вносить изменения в общий набор. К общим категориям относятся: звуковые эффекты, окружение, голосовое переработка и фоновая музыка.

#### <a name="mix-sounds-based-on-the-users-gaze"></a>Смешивание звуков на основе взгляда пользователя

Часто может оказаться полезным изменить звуковой микшер в зависимости от того, где находится пользователь (или нет). Одним из распространенных способов использования этой методики является уменьшение уровня громкости для голограмм, находящихся за пределами holographic, чтобы облегчить пользователю сосредоточиться на информации перед ними. Другой способ — увеличить громкость звука, чтобы привлечь внимание пользователя к важному событию.

#### <a name="building-your-mix"></a>Создание набора

При создании сочетания рекомендуется начать с фонового звука и добавить слои на основе важности. Часто это приводит к громкости каждого слоя, отличного от предыдущего.

При мнимой комбинации в виде инвертированной воронки с наименьшим важным (и обычно тихим звуком) в нижней части рекомендуется структурировать сочетание, похожее на следующую диаграмму.

![Структура звукового микшера](images/soundlevels.png)

Наработка голоса является интересным сценарием. В зависимости от того, что вы создаете, вам может потребоваться стерео (не локализованный) звук или спатиализе голоса. Два опубликованных в корпорации Майкрософт опыта иллюстрируют отличные примеры каждого сценария.

[Холотаур](https://www.microsoft.com/store/p/holotour/9nblggh5pj87) использует стерео голосовое по. Когда экранный диктор описывает просматриваемое расположение, звук будет единообразным и не меняется в зависимости от положения пользователя. Это позволяет экранному диктору описывать сцену, не отвлекаясь от пространственных звуков среды.

[Фрагменты](https://www.microsoft.com/store/p/fragments/9nblggh5ggm8) используют пространственный Voice в виде выявляющий. Голосовое выявляющий используется для того, чтобы привлечь внимание пользователя к важной подсчету, как если бы реальный человек находился в комнате. Это позволяет даже лучше понять, как погрузиться в возможности решения загадкы.

### <a name="part-3--performance"></a>Часть 3. производительность

#### <a name="cpu-usage"></a>Загрузка ЦП

При использовании пространственного звука 10-12 передатчиков будет потреблять примерно 12% ресурсов ЦП.

#### <a name="stream-long-audio-files"></a>Потоковая передача длинных звуковых файлов

Звуковые данные могут быть большими, особенно в общих частотах выборки (44,1 и 48 кГц). Общее правило заключается в потоковой передаче звуковых файлов дольше 5-10 секунд, чтобы сократить использование памяти приложения.

В Unity можно пометить звуковой файл для потоковой передачи в параметрах импорта файла.

![Настройки импорта звука](images/audioimportsettings.png)

## <a name="chapter-5---special-effects"></a>Глава 5-Специальные эффекты

### <a name="objectives"></a>Задачи

* Добавьте глубину в "магическое Windows".
* Перенесите пользователя в виртуальный мир.

### <a name="magic-windows"></a>Волшебное Windows

#### <a name="key-concepts"></a>Основные понятия

* Создание представлений в скрытом мире является визуально привлекательным.
* Улучшайте реальные последствия, добавляя звуковые эффекты, когда голограмма или пользователь находится ближе к скрытому миру.

#### <a name="instructions"></a>Instructions

* На панели **Иерархия** разверните узел **холограмколлектион** и выберите пункт незаполненный **мир**.
* Разверните узел " **подсветка** " и выберите **воицесаурце**.
* На панели **инспектора** щелкните **Добавить компонент** и добавить **Пользовательский речевой эффекты**.

В **воицесаурце** будет добавлен компонент **аудиосаурце** .

* В **аудиосаурце** задайте для параметра **Output** значение **UserVoice (Mixer)**.
* Установите флажок **спатиализе** .
* Перетащите ползунок **пространственного смешения** на **3D** или введите **1** в поле ввода.
* раскройте **3d Sound Параметры**.
* Задайте для **уровня Doppler** значение **0**.
* В поле **Пользовательский видеорезультат** задайте для параметра **родительский объект** значение подсветкой из сцены. 
* Установите **Максимальное расстояние** равным **1**.

Установка параметра **Max Distance** сообщает **пользователю** о том, как закрыть пользователя к родительскому объекту до того, как будет включен этот результат.

* В окне " **Пользовательский Видеорезультат**" разверните узел **Параметры чорус**.
* Задайте для свойства **Depth** значение **0,1**.
* Установите **касание тома 1**, **Коснитесь 2 тома** и **коснитесь 3 тома** на **0,8**.
* Установите для параметра **исходный звуковой том** значение **0,5**.

Предыдущие параметры настраивают параметры **Аудиочорусфилтер** Unity, используемые для добавления богатости в речь пользователя.

* В окне " **Пользовательский Видеорезультат**" разверните **Параметры Echo**.
* Установить **задержку** в **300**
* Установите **соотношение Decay** к **0,2**.
* Установите **0** в качестве **исходного звукового тома** .

Предыдущие параметры настраивают параметры **Аудиоечофилтер** Unity, которые приводят к эхо голоса пользователя.

Сценарий пользовательского голоса отвечает за следующее:

* Измерение расстояния между пользователем и **GameObject** , к которому присоединен скрипт.
* Определение того, находится ли пользователь в **GameObject**.

Для включения этого действия пользователь должен быть направлен на GameObject, независимо от расстояния.

* Применение и настройка **аудиочорусфилтер** и **аудиоечофилтер** для **аудиосаурце**.
* Отключение этого действия путем отключения фильтров.

В голосовом режиме для пользователя используется компонент выбора потока MIC из [микседреалититулкит для Unity](https://github.com/Microsoft/MixedRealityToolkit-Unity), чтобы выбрать высококачественный голосовой поток и направить его в звуковую систему Unity.

* На панели **Иерархия** выберите **Диспетчеры**.
* На панели **инспектора** разверните **обработчик речевого ввода**.
* В **обработчике речевого ввода** разверните узел **Показывать подсветку**.
* Не изменяйте **функцию** на **Ундерворлдбасе. OnEnable**.

![Ключевое слово: показывать подсветку](images/showunderworld.png)

* Разверните узел **Скрыть подсветку**.
* Не изменяйте **функцию** на **Ундерворлдбасе. ondisable**.

![Ключевое слово: Скрыть подсветку](images/hideunderworld.png)

#### <a name="build-and-deploy"></a>Построение и Развертывание

* Как и ранее, создайте проект в Unity и разверните его в Visual Studio.

После развертывания приложения:

* Лицевая поверхность (стена, этаж, таблица) и скажите *«Показывать подсветку»*.

Будет отображена подсветка, а все остальные голограммы будут скрыты. Если вы не видите подсветку, убедитесь, что вы используете реальную поверхность.

* Подход в пределах 1 индикатора немалой голограммы и начните говорить.

Теперь на ваш голос применяются звуковые эффекты!

* Отключитесь от подсветки и обратите внимание на то, как это действие больше не применяется.
* Скажите *«Скрыть подсветку»* , чтобы скрыть подсветку.

Подсветка будет скрыта, и ранее скрытые голограммы будут отображаться снова.

## <a name="the-end"></a>Конец

Поздравляем! Теперь вы завершили выполнение пространственного **пространственного 220: Пространственный звук**.

Прослушайтесь в мире и поработайте со звуком!