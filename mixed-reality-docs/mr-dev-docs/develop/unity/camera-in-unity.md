---
title: Камера в Unity
description: Узнайте, как настроить и использовать основную камеру Unity для разработки Windows Mixed Reality для работы с Holographic.
author: keveleigh
ms.author: kurtie
ms.date: 10/22/2019
ms.topic: article
keywords: холотулкит, микседреалититулкит, микседреалититулкит-Unity, holographic, holographic, впечатляющий, захватывающий пункт, буфер глубины, только ориентация, Позиционированный, непрозрачный, прозрачный, зажим, гарнитура смешанной реальности, гарнитура Windows Mixed Reality, гарнитура виртуальной реальности
ms.openlocfilehash: 865d19482e5f612eab95fa2f74cb2bad59171496
ms.sourcegitcommit: 97815006c09be0a43b3d9b33c1674150cdfecf2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101759770"
---
# <a name="camera-in-unity"></a>Камера в Unity

При износе гарнитуры смешанной реальности он станет центром в holographic-мире. Компонент [камеры](https://docs.unity3d.com/Manual/class-Camera.html) Unity автоматически обрабатывает стереоскопикную визуализацию и поддерживайте свое головное перемещение и вращение. Однако, чтобы полностью оптимизировать качество визуальных элементов и [стабильность](../platform-capabilities-and-apis/hologram-stability.md), необходимо задать параметры камеры, описанные ниже.

## <a name="setup"></a>Установка

1. В разделе " **другие параметры** " окна " **Параметры проигрывателя магазина Windows** "
2. Выберите **Windows Mixed Reality** в качестве устройства, которое может быть указано как **Windows holographic** в более ранних версиях Unity.
3. Выбрать **поддерживаемую виртуальную реальность**

>[!NOTE]
>Эти параметры должны применяться к камере в каждой сцене приложения.
>
>По умолчанию при создании новой сцены в Unity она будет содержать главную GameObject камеры в иерархии, которая включает компонент камеры, но не имеет правильно примененных параметров.

## <a name="holographic-vs-immersive-headsets"></a>Более holographic и впечатляющие гарнитуры

Параметры по умолчанию для компонента камеры Unity предназначены для традиционных трехмерных приложений, которым требуется скибокс фон, так как у них нет реального мира.

* При работе на **[иммерсивного гарнитуре](../../discover/immersive-headset-hardware-details.md)** вы получаете все, что видит пользователь, и поэтому вам, скорее всего, потребуется скибокс.
* Однако при работе на **гарнитуре holographic** , такой как [HoloLens](/hololens/hololens1-hardware), реальный мир должен отображаться позади всей визуализации камеры. Установите прозрачный фон камеры (в HoloLens, черный отображается как прозрачный) вместо текстуры Скибокс:
    1. Выбор основной камеры на панели Иерархия
    2. На панели инспектора найдите компонент Камера и измените раскрывающийся список нечетких флагов с Скибокс на сплошной цвет.
    3. Выберите средство выбора цвета фона и измените значения RGBA на (0, 0, 0, 0).

Вы можете использовать код скрипта, чтобы определить во время выполнения, является ли гарнитура увлекательной или holographic, проверив [холографиксеттингс. исдисплайопакуе](https://docs.unity3d.com/ScriptReference/XR.WSA.HolographicSettings.IsDisplayOpaque.html).

## <a name="positioning-the-camera"></a>Размещение камеры

Если вы представиме начальную точку пользователя как (X: 0, Y: 0, Z: 0), будет проще размещать приложение. Так как основная камера отслеживает перемещение заголовка пользователя, начальное расположение пользователя можно задать, установив начальную точку основной камеры.

1. На панели Иерархия выберите Главная камера.
2. На панели инспектора найдите компонент преобразование и измените его расположение с (X: 0, Y: 1, Z:-10) на (X: 0, Y: 0, Z: 0).

   ![Камера на панели инспектора в Unity](images/maincamera-350px.png)  
   *Камера на панели инспектора в Unity*

## <a name="clip-planes"></a>Резкие плоскости

Визуализация содержимого слишком близко к пользователю может быть неудобно в смешанной реальности. В компоненте камеры можно настроить [близкие и более далекое плоскости](../platform-capabilities-and-apis/hologram-stability.md#hologram-render-distances) .

1. Выбор основной камеры на панели Иерархия
2. На панели инспектора найдите компонент камеры обтравочные плоскости и измените значение поля NEAR TextBox с 0,3 на 0,85. Содержимое, отображаемое еще ближе, может привести к дискомфорт пользователя, и его следует избегать в соответствии с [рекомендациями по расстоянию при визуализации](../platform-capabilities-and-apis/hologram-stability.md#hologram-render-distances).

## <a name="multiple-cameras"></a>Несколько камер

Если в сцене имеется несколько компонентов камеры, Unity знает, какая камера будет использоваться для отрисовки стереоскопик и отслеживания головок в зависимости от того, какой GameObject имеет тег Маинкамера.

## <a name="recentering-a-seated-experience"></a>Перецентрирование опыта работы

Если вы создаете [опыт](../../design/coordinate-systems.md)в области, вы можете изменить центр по всему миру в текущей позиции головного пользователя, вызвав **[XR. Метод Инпуттраккинг. recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html)** .

## <a name="reprojection-modes"></a>Режимы РЕПРОЕКЦИИ

Как HoloLens, так и иммерсивное гарнитуры будут перестраивать каждый кадр, отображаемый приложением, для коррекции неверного предсказания фактического расположения пользователя при выдаче фотоны.

По умолчанию:

* Если приложение предоставляет буфер глубины для данного кадра **, то** позаботится о позиционированном перепроецировании. Иммерсивное гарнитура также настраивают голограммы для неверного предсказания как в положении, так и на ориентации. Если буфер глубины не указан, система будет исправлять только неправильные прогнозы по ориентации.
* **Holographic** , например HoloLens, позаботится о том, предоставляет ли приложение свой буфер глубины.  Позиционированное перестановка возможно без буферов глубины в HoloLens, так как отрисовка часто является разреженной с стабильным фоном, обеспечиваемым реальным миром.

Если вы знаете, что вы создаете [интерфейс только для ориентации](coordinate-systems-in-unity.md#building-an-orientation-only-or-seated-scale-experience) с содержимым, защищенным телом (например, с содержимым видео 360-градуса), можно явно задать для режима РЕПРОЕКЦИИ ориентацию только путем установки [холографиксеттингс. репрожектионмоде](https://docs.unity3d.com/ScriptReference/XR.WSA.HolographicSettings.ReprojectionMode.html) в [холографикрепрожектионмоде. ориентатиононли](https://docs.unity3d.com/ScriptReference/XR.WSA.HolographicSettings.HolographicReprojectionMode.html).

## <a name="sharing-your-depth-buffers-with-windows"></a>Совместное использование буферов глубины с Windows

Предоставление общего доступа к буферу глубины приложения в Windows. Каждый кадр обеспечит ваше приложение одним из двух усовершенствований в голограммах, в зависимости от типа гарнитуры, для которой выполняется подготовка.

* **Захватывающие головные телефоны** могут позаботиться о позиционированном перепроецировании при наличии буфера глубины, настраивая голограммы для неверного предсказания как на позиции, так и на ориентации.
* У более **holographic гарнитур** есть несколько различных методов. HoloLens 1 автоматически выберет [точку фокусировки](focus-point-in-unity.md) при указании буфера глубины, оптимизируя голограмму на уровне, пересекающую наибольшее содержимое. HoloLens 2 будет стабилизировать содержимое, используя [глубину ЛСР (см. примечания)](/uwp/api/windows.graphics.holographic.holographiccamerarenderingparameters.setfocuspoint).

Чтобы задать, будет ли приложение Unity предоставлять буфер глубины для Windows:

1. Выберите **изменить**  >  **Параметры проекта**  >  **проигрыватель**  >  **универсальная платформа Windows параметры табуляции**  >  **XR**.
2. Разверните элемент **пакет SDK для Windows Mixed Reality** .
3. Установите или снимите флажок **включить общий доступ к буферу глубины** .  Включить совместное использование буфера глубины по умолчанию проверяется в новых проектах, так как эта функция была добавлена в Unity и будет снята по умолчанию для старых проектов, которые были обновлены.

Буфер глубины может улучшить качество визуального элемента до тех пор, пока Windows может точно сопоставлять нормализованные значения глубины в буфере глубины с расстояниями на расстоянии в метрах с помощью ближайших и дальнеих плоскостей, заданных в Unity на основной камере.  Если отрисовка передает значения глубины обычным способом, то, как правило, следует полагаться на этот случай, хотя прозрачная прорисовка передает данные в буфер глубины, а затем с помощью существующих цветовых пикселов может привести к путанице при перепроецировании.  Если известно, что в ходе отрисовки будут выходить большое количество пикселов с неточной глубиной, скорее всего, вы получите лучшее визуальное качество, отменив флажок "включить совместное использование буфера глубины".

## <a name="automatic-scene-and-camera-setup-with-mixed-reality-toolkit"></a>Автоматическая настройка сцены и камеры с помощью набора средств Mixed Reality 

Следуйте [пошаговому руководству,](tutorials/mr-learning-base-01.md) чтобы добавить набор средств Mixed Reality в проект Unity, и он автоматически настроит проект. Можно также вручную настроить проект, не МРТК с руководством в разделе ниже.

## <a name="next-development-checkpoint"></a>Следующий этап разработки

Если вы пойдете из пути разработки Unity, мы собрались, что вы в состоянии изучить стандартные блоки МРТК Core. Отсюда вы можете перейти к следующему стандартному блоку:

> [!div class="nextstepaction"]
> [Взгляд](gaze-in-unity.md)

Или перейдите к возможностям и API платформы смешанной реальности:

> [!div class="nextstepaction"]
> [общие возможности](shared-experiences-in-unity.md);

Вы можете в любой момент вернуться к [этапам разработки для Unity](unity-development-overview.md#2-core-building-blocks).

## <a name="see-also"></a>См. также раздел

* [Стабильность голограммы](../platform-capabilities-and-apis/hologram-stability.md)
* [Микседреалититулкит Главная камера. prefab](https://github.com/Microsoft/MixedRealityToolkit-Unity/tree/htk_release/Assets/HoloToolkit/Input/Prefabs)