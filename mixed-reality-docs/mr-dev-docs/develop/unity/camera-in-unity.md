---
title: Настройка камеры в Unity
description: узнайте, как настроить и использовать основную камеру Unity для Windows Mixed Reality разработки до holographic.
author: keveleigh
ms.author: kurtie
ms.date: 03/25/2021
ms.topic: article
keywords: холотулкит, микседреалититулкит, микседреалититулкит-Unity, holographic, holographic, впечатляющий, захватывающий пункт, буфер глубины, только ориентация, Позиционированный, непрозрачный, прозрачный, зажим, гарнитура смешанной реальности, гарнитура Windows Mixed Reality, гарнитура виртуальной реальности
ms.openlocfilehash: b2b3438f0cf85aa4300eac74b03dac737c03bb88
ms.sourcegitcommit: bea83261bf9ce7a27a618e5bc54dc4d7711f5435
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/19/2021
ms.locfileid: "130153575"
---
# <a name="camera-setup-in-unity"></a>Настройка камеры в Unity

При износе гарнитуры смешанной реальности он станет центром в holographic-мире. Компонент [камеры](https://docs.unity3d.com/Manual/class-Camera.html) Unity автоматически обрабатывает стереоскопикную визуализацию и поддерживайте свое головное перемещение и вращение. Однако, чтобы полностью оптимизировать качество визуальных элементов и [стабильность](../advanced-concepts/hologram-stability.md), необходимо задать параметры камеры, описанные ниже.

## <a name="hololens-vs-vr-immersive-headsets"></a>HoloLensные головные телефоны vs VR

Параметры по умолчанию для компонента камеры Unity предназначены для традиционных трехмерных приложений, которым требуется скибокс фон, так как у них нет реального мира.

* При работе на **[иммерсивного гарнитуре](../../discover/immersive-headset-hardware-details.md)** вы получаете все, что видит пользователь, и поэтому вам, скорее всего, потребуется скибокс.
* однако при работе на **гарнитуре holographic** , такой как [HoloLens](/hololens/hololens2-hardware), реальный мир должен отображаться позади всей визуализации камеры. установите прозрачный фон камеры (в HoloLens, черный отображается как прозрачный) вместо текстуры скибокс:
    1. Выбор основной камеры на панели Иерархия
    2. На панели инспектора найдите компонент Камера и измените раскрывающийся список нечетких флагов с Скибокс на сплошной цвет.
    3. Выберите средство выбора цвета фона и измените значения RGBA на (0, 0, 0, 0).
        1. При задании этого значения из кода можно использовать [`Color.clear`](https://docs.unity3d.com/ScriptReference/Color-clear.html)

[!INCLUDE[](includes/camera/opaque-camera-include.md)]

## <a name="camera-setup"></a>Настройка камеры

Какой бы опыт вы разрабатываете, основная камера всегда является основным компонентом для отображения стерео, подключенным к подключенному к головному дисплею устройства. Если вы представиме начальную точку пользователя как (X: 0, Y: 0, Z: 0), будет проще размещать приложение. Так как основная камера отслеживает перемещение заголовка пользователя, начальное расположение пользователя можно задать, установив начальную точку основной камеры.

вам нужно выбрать, следует ли разрабатывать впечатляющие головные телефоны HoloLens или VR. После этого перейдите в любой раздел установки.

### <a name="hololens-camera-setup"></a>настройка камеры HoloLens

для HoloLens приложений необходимо использовать привязки для всех объектов, которые необходимо заблокировать в среде сцены. Для повышения стабильности и создания привязок в нескольких комнатах рекомендуется использовать неограниченный объем памяти.

[!INCLUDE[](includes/camera/hololens-setup-include.md)]

### <a name="vr-camera-setup"></a>Настройка камеры VR

Windows Mixed Reality поддерживает приложения в различных [масштабах](../../design/coordinate-systems.md#mixed-reality-experience-scales), начиная с приложений с ориентацией на страницы и до крупномасштабных приложений. на HoloLens вы можете создавать приложения для мирового уровня, которые позволяют пользователям проходить более чем за 5 метров, изучая целый этаж здания и за его пределами.

Первым шагом в создании смешанной реальности в Unity является определение того, для чего будет работать [масштабирование](../../design/coordinate-systems.md) приложения.

* [Ориентация или установленный масштаб](../../design/coordinate-systems.md#building-an-orientation-only-or-seated-scale-experience)
* [С фиксированным или комнатным масштабированием](../../design/coordinate-systems.md#building-a-standing-scale-or-room-scale-experience)
* [Масштаб мира](../../design/coordinate-systems.md#building-a-world-scale-experience)

#### <a name="room-scale-or-standing-experiences"></a>Комната — масштабирование или фиксированное взаимодействие

> [!NOTE]
> При создании для HL2 рекомендуется создать интерфейс на уровне глаз или рассмотреть возможность использования [сцены для понимания](scene-understanding-sdk.md) основания сцены.

[!INCLUDE[](includes/camera/vr-setup-standing-include.md)]

#### <a name="seated-experiences"></a>Опыт работы в рабочее место

[!INCLUDE[](includes/camera/vr-setup-seated-include.md)]

### <a name="setting-up-the-camera-background"></a>Настройка фона камеры

Если вы используете МРТК, фон камеры автоматически настраивается и управляется. для XR SDK или устаревших проектов WSA мы рекомендуем задать для фона камеры сплошной черный цвет на HoloLens и сохранить скибокс для VR.

## <a name="using-multiple-cameras"></a>Использование нескольких камер

Если в сцене имеется несколько компонентов камеры, Unity знает, какая камера будет использоваться для отрисовки стереоскопик на основе того, в какой GameObject есть тег Маинкамера. В устаревшем XR он также использует этот тег для синхронизации головного отслеживания. В пакете SDK для XR отслеживание головного элемента осуществляется с помощью сценария Траккедпоседривер, подключенного к камере.

## <a name="sharing-depth-buffers"></a>Совместное использование буферов глубины

предоставление общего доступа к буферу глубины приложения для Windows каждый кадр обеспечит ваше приложение одним из двух усовершенствований в голограммах, в зависимости от типа гарнитуры, для которой выполняется визуализация:

* При постановке в буфер глубины иммерсивное виртуальная **гарнитура** может позаботиться о позиционированном перепроецировании, настраивая голограммы для неверного предсказания как на позиции, так и на ориентации.
* **HoloLens гарнитуры** имеют несколько различных методов. HoloLens 1 автоматически выберет [контрольную точку](focus-point-in-unity.md) при указании буфера глубины, оптимизируя ее стабильность на плоскости, которая пересекает наибольшее содержимое. HoloLens 2 будет стабилизировать содержимое с помощью [глубины лср (см. примечания)](/uwp/api/windows.graphics.holographic.holographiccamerarenderingparameters.setfocuspoint).

[!INCLUDE[](includes/camera/depth-buffer-include.md)]

## <a name="using-clipping-planes"></a>Использование отсечения плоскостей

Визуализация содержимого слишком близко к пользователю может быть неудобно в смешанной реальности. В компоненте камеры можно настроить [близкие и более далекое плоскости](../advanced-concepts/hologram-stability.md#hologram-render-distances) .

1. Выбор **основной камеры** на панели **Иерархия**
2. На панели **инспектора** найдите компонент **камеры** **обтравочные плоскости** и измените значение поля **NEAR** TextBox с **0,3** на **0,85**. Содержимое, отображаемое еще ближе, может привести к дискомфорт пользователя, и его следует избегать в соответствии с [рекомендациями по расстоянию при визуализации](../advanced-concepts/hologram-stability.md#hologram-render-distances).

## <a name="recentering-the-camera"></a>Перецентрирование камеры

Если вы создаете [опыт](../../design/coordinate-systems.md)в области, вы можете изменить центр по всему миру в текущей позиции головного пользователя, вызвав **[XR. Метод Инпуттраккинг. recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html)** в устаревшем XR или методе **[Ксринпутсубсистем. ТРИРЕЦЕНТЕР](https://docs.unity3d.com/ScriptReference/XR.XRInputSubsystem.TryRecenter.html)** в XR SDK.

## <a name="teleportation"></a>Телепортация

Эта функция обычно зарезервирована для среды VR:

[!INCLUDE[](includes/camera/teleport-include.md)]

## <a name="reprojection-modes"></a>Режимы РЕПРОЕКЦИИ

как HoloLens, так и впечатляющие головные телефоны будут перестраивать каждый кадр, отображаемый приложением, для коррекции неверного предсказания фактического расположения пользователя при выдаче фотоны.

По умолчанию:

* Если приложение предоставляет буфер глубины для данного кадра **, то** позаботится о позиционированной РЕПРОЕКЦИИ. Иммерсивное гарнитура также настраивают голограммы для неверного предсказания как в положении, так и на ориентации. Если буфер глубины не указан, система будет исправлять только неправильные прогнозы по ориентации.
* с помощью таких **головных телефонов** , как HoloLens 2, следует позаботиться о том, предоставляет ли приложение буфер глубины. позиционированное изменение возможно без буферов глубины на HoloLens так как отрисовка часто является разреженной с стабильным фоном, обеспечиваемым реальным миром.

[!INCLUDE[](includes/camera/reprojection-include.md)]

## <a name="next-development-checkpoint"></a>Следующий этап разработки

Если вы пойдете из пути разработки Unity, мы собрались, что вы в состоянии изучить стандартные блоки МРТК Core. Отсюда вы можете перейти к следующему стандартному блоку:

> [!div class="nextstepaction"]
> [Взгляд](gaze-in-unity.md)

Или перейдите к возможностям и API платформы смешанной реальности:

> [!div class="nextstepaction"]
> [общие возможности](shared-experiences-in-unity.md);

Вы можете в любой момент вернуться к [этапам разработки для Unity](unity-development-overview.md#2-core-building-blocks).

## <a name="see-also"></a>См. также раздел

* [Стабильность голограммы](../advanced-concepts/hologram-stability.md)
* [Масштабирование работы](../../design/coordinate-systems.md#mixed-reality-experience-scales)
* [Пространственный этап](../../design/coordinate-systems.md#stage-frame-of-reference)
* [Потеря слежения в Unity](tracking-loss-in-unity.md)
* [Пространственные привязки](../../design/spatial-anchors.md)
* [Сохраняемость в Unity](persistence-in-unity.md)
* [Общий доступ в Unity](shared-experiences-in-unity.md)
* [Пространственные привязки Azure.](/azure/spatial-anchors)
* [Пакет SDK для пространственных привязок Azure для Unity](/dotnet/api/Microsoft.Azure.SpatialAnchors)