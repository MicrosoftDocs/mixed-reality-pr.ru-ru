---
ms.openlocfilehash: 481a063cac3cb4d7e5ef7521ad19af43cb68e2cf
ms.sourcegitcommit: 9ae76b339968f035c703d9c1fe57ddecb33198e3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/27/2021
ms.locfileid: "110631177"
---
# <a name="mrtk"></a>[<span data-ttu-id="19884-101">MRTK</span><span class="sxs-lookup"><span data-stu-id="19884-101">MRTK</span></span>](#tab/mrtk)
<!-- NEVER CHANGE THE ABOVE LINE! -->

<span data-ttu-id="19884-102">В [диалоговом окне настройки мртк](/windows/mixed-reality/mrtk-unity/configuration/mrtk-configuration-dialog) будет предпринята попытка задать параметры буфера глубины для XR SDK и устаревшей версии WSA, но рекомендуется проверить эти вкладки и проверить параметры в Unity.</span><span class="sxs-lookup"><span data-stu-id="19884-102">[MRTK's configuration dialog](/windows/mixed-reality/mrtk-unity/configuration/mrtk-configuration-dialog) will attempt to set depth buffer settings for both XR SDK and legacy WSA, but it's good to check those tabs and verify the settings in Unity.</span></span>

# <a name="xr-sdk"></a>[<span data-ttu-id="19884-103">Пакет SDK для XR</span><span class="sxs-lookup"><span data-stu-id="19884-103">XR SDK</span></span>](#tab/xr)
<!-- NEVER CHANGE THE ABOVE LINE! -->

<span data-ttu-id="19884-104">Чтобы задать, будет ли приложение Unity предоставлять буфер глубины для Windows:</span><span class="sxs-lookup"><span data-stu-id="19884-104">To set whether your Unity app will provide a depth buffer to Windows:</span></span>

1. <span data-ttu-id="19884-105">Перейдите к разделу **изменение**  >  **параметров проекта**  >  **XR управление подключаемыми модулями** и убедитесь, что пункт меню развернут.</span><span class="sxs-lookup"><span data-stu-id="19884-105">Go to **Edit** > **Project Settings** > **XR Plug-in Management** and ensure the menu item is expanded.</span></span>
2. <span data-ttu-id="19884-106">Щелкните пункт меню, соответствующий выбранной среде выполнения XR, Windows Mixed Reality или Опенкср.</span><span class="sxs-lookup"><span data-stu-id="19884-106">Click on the menu item corresponding to the XR runtime you've chosen, either Windows Mixed Reality or OpenXR.</span></span> <span data-ttu-id="19884-107">Кроме того, убедитесь, что выбрана правильная платформа сборки, так как доступны вкладки как для автономных, так и для универсальная платформа Windows.</span><span class="sxs-lookup"><span data-stu-id="19884-107">Additionally, ensure the correct build platform is selected, as tabs for both Windows Standalone and Universal Windows Platform are available.</span></span>
3. <span data-ttu-id="19884-108">Включение и настройка:</span><span class="sxs-lookup"><span data-stu-id="19884-108">To enable and configure:</span></span>
    1. <span data-ttu-id="19884-109">Для Опенкср выберите либо формат глубины, либо "нет" в раскрывающемся списке " **режим отправки глубины** ".</span><span class="sxs-lookup"><span data-stu-id="19884-109">For OpenXR, select either a depth format or "None" in the **Depth Submission Mode** dropdown.</span></span>
    2. <span data-ttu-id="19884-110">Для Windows Mixed Reality установите или снимите флажок **общий буфер глубины** .</span><span class="sxs-lookup"><span data-stu-id="19884-110">For Windows Mixed Reality, check or uncheck the **Shared Depth Buffer** check box.</span></span> <span data-ttu-id="19884-111">Затем выберите формат из раскрывающегося списка **Формат буфера глубины** .</span><span class="sxs-lookup"><span data-stu-id="19884-111">Then, select a format from the **Depth Buffer Format** dropdown.</span></span>

<span data-ttu-id="19884-112">![Параметры глубины подключаемого модуля XR Windows ](../../images/xrsdk-winxr-depth.png)
 ![ опенкср параметры глубины](../../images/xrsdk-openxr-depth.png)</span><span class="sxs-lookup"><span data-stu-id="19884-112">![Windows XR Plugin depth settings](../../images/xrsdk-winxr-depth.png)
![OpenXR depth settings](../../images/xrsdk-openxr-depth.png)</span></span>

> [!NOTE]
> <span data-ttu-id="19884-113">Обычно для повышения производительности рекомендуется использовать 16 битовых буферов глубины.</span><span class="sxs-lookup"><span data-stu-id="19884-113">It is generally recommended to use 16 bit depth buffers for improved performance.</span></span> <span data-ttu-id="19884-114">Однако при использовании 16-разрядного формата глубины требуемые эффекты буфера элементов (например, панели прокрутки пользовательского интерфейса Unity) не будут работать, так как [Unity не создает буфер шаблона](https://docs.unity3d.com/ScriptReference/RenderTexture-depth.html) в этом параметре.</span><span class="sxs-lookup"><span data-stu-id="19884-114">However, if using 16-bit depth format, stencil buffer required effects (like some Unity UI scroll panels) will not work because [Unity does not create a stencil buffer](https://docs.unity3d.com/ScriptReference/RenderTexture-depth.html) in this setting.</span></span> <span data-ttu-id="19884-115">Если выбрать *24-разрядный формат глубины* , то, как правило, будет создавать [8-разрядный буфер трафаретов](https://docs.unity3d.com/Manual/SL-Stencil.html) , если это применимо на графической платформе конечной платформы.</span><span class="sxs-lookup"><span data-stu-id="19884-115">Selecting *24-bit depth format* conversely will generally create an [8-bit stencil buffer](https://docs.unity3d.com/Manual/SL-Stencil.html) if applicable on the endpoint graphics platform.</span></span>

# <a name="legacy-wsa"></a>[<span data-ttu-id="19884-116">Устаревшая версия WSA</span><span class="sxs-lookup"><span data-stu-id="19884-116">Legacy WSA</span></span>](#tab/wsa)
<!-- NEVER CHANGE THE ABOVE LINE! -->

<span data-ttu-id="19884-117">Чтобы задать, будет ли приложение Unity предоставлять буфер глубины для Windows:</span><span class="sxs-lookup"><span data-stu-id="19884-117">To set whether your Unity app will provide a depth buffer to Windows:</span></span>

1. <span data-ttu-id="19884-118">Выберите **изменить**  >  **Параметры проекта**  >  **проигрыватель**  >  **универсальная платформа Windows параметры табуляции**  >  **XR**.</span><span class="sxs-lookup"><span data-stu-id="19884-118">Go to **Edit** > **Project Settings** > **Player** > **Universal Windows Platform tab** > **XR Settings**.</span></span>
2. <span data-ttu-id="19884-119">Разверните элемент **пакет SDK для Windows Mixed Reality** .</span><span class="sxs-lookup"><span data-stu-id="19884-119">Expand the **Windows Mixed Reality SDK** item.</span></span>
3. <span data-ttu-id="19884-120">Установите или снимите флажок **включить общий доступ к буферу глубины** .</span><span class="sxs-lookup"><span data-stu-id="19884-120">Check or uncheck the **Enable Depth Buffer Sharing** check box.</span></span> <span data-ttu-id="19884-121">Включение общего доступа к буферу глубины по умолчанию проверяется в новых проектах, но по умолчанию в старых проектах оно было снято.</span><span class="sxs-lookup"><span data-stu-id="19884-121">Enable Depth Buffer Sharing is checked by default in new projects, but may have been unchecked by default in older projects.</span></span>

![Устаревшие параметры глубины XR](../../images/wmr-depth.png)

<span data-ttu-id="19884-123">Буфер глубины может улучшить качество визуального элемента до тех пор, пока Windows может точно сопоставлять нормализованные значения глубины в буфере глубины с расстояниями на расстоянии в метрах с помощью ближайших и дальнеих плоскостей, заданных в Unity на основной камере.</span><span class="sxs-lookup"><span data-stu-id="19884-123">A depth buffer can improve visual quality so long as Windows can accurately map the normalized per-pixel depth values in your depth buffer back to distances in meters, using the near and far planes you've set in Unity on the main camera.</span></span> <span data-ttu-id="19884-124">Если отрисовка передает значения глубины обычным способом, то, как правило, следует полагаться на этот случай, хотя прозрачная прорисовка передает данные в буфер глубины, а затем с помощью существующих цветовых пикселов может привести к путанице при перепроецировании.</span><span class="sxs-lookup"><span data-stu-id="19884-124">If your render passes handle depth values in typical ways, you should generally be fine here, though translucent render passes that write to the depth buffer while showing through to existing color pixels can confuse the reprojection.</span></span>  <span data-ttu-id="19884-125">Если известно, что в ходе отрисовки будут выходить большое количество пикселов с неточной глубиной, скорее всего, вы получите лучшее визуальное качество, отменив флажок "включить совместное использование буфера глубины".</span><span class="sxs-lookup"><span data-stu-id="19884-125">If you know that your render passes will leave many of your final depth pixels with inaccurate depth values, you are likely to get better visual quality by unchecking "Enable Depth Buffer Sharing".</span></span>

> [!NOTE]
> <span data-ttu-id="19884-126">Обычно для повышения производительности рекомендуется использовать 16 битовых буферов глубины.</span><span class="sxs-lookup"><span data-stu-id="19884-126">It is generally recommended to use 16 bit depth buffers for improved performance.</span></span> <span data-ttu-id="19884-127">Однако при использовании 16-разрядного формата глубины требуемые эффекты буфера элементов (например, панели прокрутки пользовательского интерфейса Unity) не будут работать, так как [Unity не создает буфер шаблона](https://docs.unity3d.com/ScriptReference/RenderTexture-depth.html) в этом параметре.</span><span class="sxs-lookup"><span data-stu-id="19884-127">However, if using 16-bit depth format, stencil buffer required effects (like some Unity UI scroll panels) will not work because [Unity does not create a stencil buffer](https://docs.unity3d.com/ScriptReference/RenderTexture-depth.html) in this setting.</span></span> <span data-ttu-id="19884-128">Если выбрать *24-разрядный формат глубины* , то, как правило, будет создавать [8-разрядный буфер трафаретов](https://docs.unity3d.com/Manual/SL-Stencil.html) , если это применимо на графической платформе конечной платформы.</span><span class="sxs-lookup"><span data-stu-id="19884-128">Selecting *24-bit depth format* conversely will generally create an [8-bit stencil buffer](https://docs.unity3d.com/Manual/SL-Stencil.html) if applicable on the endpoint graphics platform.</span></span>