---
title: Рекомендации по работе с Unity и Visual Studio
description: Советы и рекомендации по упрощению рабочего процесса создания приложения смешанной реальности с помощью Unity и Visual Studio.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: развертывание, Unity, Visual Studio, HoloLens, HoloLens 2, закрепляемая гарнитура, лучшие методики, гарнитура смешанной реальности, гарнитура Windows Mixed Reality, гарнитура виртуальной реальности, UWP, Инструменты Visual Studio, Windows SDK
ms.openlocfilehash: 9e80cad3e7154ae5548514297343db8efcdcb49e
ms.sourcegitcommit: 87b54c75044f433cfadda68ca71c1165608e2f4b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/10/2020
ms.locfileid: "97010265"
---
# <a name="best-practices-for-working-with-unity-and-visual-studio"></a><span data-ttu-id="f04c0-104">Рекомендации по работе с Unity и Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f04c0-104">Best practices for working with Unity and Visual Studio</span></span>

<span data-ttu-id="f04c0-105">При создании приложения смешанной реальности с помощью Unity необходимо переключиться между Unity и Visual Studio, чтобы создать и развернуть пакет приложения в HoloLens или иммерсивное гарнитуру.</span><span class="sxs-lookup"><span data-stu-id="f04c0-105">When you're creating a mixed reality application with Unity, you need to switch between Unity and Visual Studio to build and deploy the app package to HoloLens or an immersive headset.</span></span> <span data-ttu-id="f04c0-106">По умолчанию два экземпляра Visual Studio являются обязательными — один экземпляр для изменения скриптов Unity, а другой — для развертывания на устройстве и отладки.</span><span class="sxs-lookup"><span data-stu-id="f04c0-106">By default, two instances of Visual Studio are required - one instance to modify Unity scripts and another to deploy to the device and debug.</span></span> <span data-ttu-id="f04c0-107">Приведенные ниже инструкции позволяют разрабатывать решения с использованием одного экземпляра Visual Studio, уменьшая частоту экспорта проектов Unity и улучшая процесс отладки.</span><span class="sxs-lookup"><span data-stu-id="f04c0-107">The following instructions let you develop using a single Visual Studio instance, reducing the frequency of exporting Unity projects and improves the debugging experience.</span></span>

## <a name="improving-iteration-time"></a><span data-ttu-id="f04c0-108">Увеличение времени итерации</span><span class="sxs-lookup"><span data-stu-id="f04c0-108">Improving iteration time</span></span>

<span data-ttu-id="f04c0-109">Поддержка серверной части сценариев .NET в Unity является устаревшей в Unity 2018 и удалена в Unity 2019 +.</span><span class="sxs-lookup"><span data-stu-id="f04c0-109">Support for .NET scripting back-end in Unity is being deprecated in Unity 2018 and removed in Unity 2019+.</span></span> <span data-ttu-id="f04c0-110">Поэтому мы рекомендуем переключиться на [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span><span class="sxs-lookup"><span data-stu-id="f04c0-110">so we recommend you switch to [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span></span> <span data-ttu-id="f04c0-111">Однако время от Unity до Visual Studio может происходить дольше.</span><span class="sxs-lookup"><span data-stu-id="f04c0-111">However, you may experience longer build times from Unity to Visual Studio.</span></span> <span data-ttu-id="f04c0-112">Чтобы улучшить для ускорения итерации, настройте среду для достижения наилучших результатов компиляции:</span><span class="sxs-lookup"><span data-stu-id="f04c0-112">To improve for faster iteration, set up your environment for best compilation results:</span></span>

1) <span data-ttu-id="f04c0-113">Используйте добавочное построение, создав проект в одном каталоге каждый раз, повторно используя предварительно созданные файлы</span><span class="sxs-lookup"><span data-stu-id="f04c0-113">Use incremental building by building your project to the same directory every time, reusing the pre-built files there</span></span>
2) <span data-ttu-id="f04c0-114">Отключить сканирование антивредоносного по для проекта & папок сборки</span><span class="sxs-lookup"><span data-stu-id="f04c0-114">Disable anti-malware software scans for your project & build folders</span></span>
   - <span data-ttu-id="f04c0-115">Откройте **Антивирусную & защиту от угроз** в приложении "Параметры Windows 10"</span><span class="sxs-lookup"><span data-stu-id="f04c0-115">Open **Virus & threat protection** under your Windows 10 settings app</span></span>
   - <span data-ttu-id="f04c0-116">Выберите **Управление параметрами** в разделе **Параметры защиты от угроз & вирусов** .</span><span class="sxs-lookup"><span data-stu-id="f04c0-116">Select **Manage Settings** under **Virus & threat protection settings**</span></span>
   - <span data-ttu-id="f04c0-117">Выберите **Добавить или удалить исключения** в разделе **исключения** .</span><span class="sxs-lookup"><span data-stu-id="f04c0-117">Select **Add or remove exclusions** under the **Exclusions** section</span></span>
   - <span data-ttu-id="f04c0-118">Выберите **Добавить исключение** и выберите папку, содержащую код проекта Unity и выходные данные сборки.</span><span class="sxs-lookup"><span data-stu-id="f04c0-118">Select **Add an exclusion** and select the folder containing your Unity project code and build outputs</span></span>
3) <span data-ttu-id="f04c0-119">Использование SSD для создания</span><span class="sxs-lookup"><span data-stu-id="f04c0-119">Use an SSD for building</span></span>

<span data-ttu-id="f04c0-120">Дополнительные сведения см. в обзоре [оптимизации времени сборки для IL2CPP](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html) .</span><span class="sxs-lookup"><span data-stu-id="f04c0-120">Review [Optimizing Build Times for IL2CPP](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html) for more info.</span></span> <span data-ttu-id="f04c0-121">Кроме того, ознакомьтесь [с разделом Отладка в серверной части сценариев IL2CPP](https://docs.unity3d.com/Manual/windowsstore-debugging-il2cpp.html).</span><span class="sxs-lookup"><span data-stu-id="f04c0-121">Also, review [Debugging on IL2CPP Scripting Back-end](https://docs.unity3d.com/Manual/windowsstore-debugging-il2cpp.html).</span></span>

<span data-ttu-id="f04c0-122">Рассмотрите возможность установки [расширения Visual Studio *унитискриптанализер*](https://github.com/Microsoft/MixedRealityCompanionKit/tree/master/UnityScriptAnalyzer).</span><span class="sxs-lookup"><span data-stu-id="f04c0-122">Consider installing the [*UnityScriptAnalyzer* Visual Studio extension](https://github.com/Microsoft/MixedRealityCompanionKit/tree/master/UnityScriptAnalyzer).</span></span> <span data-ttu-id="f04c0-123">Это средство анализирует сценарии C# для Unity для кода, который может быть написан более оптимизированным образом.</span><span class="sxs-lookup"><span data-stu-id="f04c0-123">This tool analyzes your Unity C# scripts for code that can be written in a more optimized manner.</span></span>

## <a name="visual-studio-tools-for-unity"></a><span data-ttu-id="f04c0-124">Набор средств Visual Studio для Unity</span><span class="sxs-lookup"><span data-stu-id="f04c0-124">Visual Studio Tools for Unity</span></span>

<span data-ttu-id="f04c0-125">Скачать [инструменты Visual Studio для Unity](https://docs.microsoft.com/visualstudio/cross-platform/getting-started-with-visual-studio-tools-for-unity)</span><span class="sxs-lookup"><span data-stu-id="f04c0-125">Download [Visual Studio Tools for Unity](https://docs.microsoft.com/visualstudio/cross-platform/getting-started-with-visual-studio-tools-for-unity)</span></span>

<span data-ttu-id="f04c0-126">**Преимущества Инструменты Visual Studio для Unity**</span><span class="sxs-lookup"><span data-stu-id="f04c0-126">**Benefits of Visual Studio Tools for Unity**</span></span>
* <span data-ttu-id="f04c0-127">Отладка Unity в редакторе в режиме воспроизведения из Visual Studio путем размещения точек останова, оценки переменных и сложных выражений.</span><span class="sxs-lookup"><span data-stu-id="f04c0-127">Debug Unity in-editor play mode from Visual Studio by putting breakpoints, evaluating variables and complex expressions.</span></span>
* <span data-ttu-id="f04c0-128">Используйте обозреватель проектов Unity, чтобы найти скрипт с точно такой же иерархией, которая отображается в Unity.</span><span class="sxs-lookup"><span data-stu-id="f04c0-128">Use the Unity Project Explorer to find your script with the exact same hierarchy that Unity displays.</span></span>
* <span data-ttu-id="f04c0-129">Получите консоль Unity непосредственно в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f04c0-129">Get the Unity console directly inside Visual Studio.</span></span>
* <span data-ttu-id="f04c0-130">Используйте мастера для быстрого создания скриптов или перехода к ним.</span><span class="sxs-lookup"><span data-stu-id="f04c0-130">Use wizards to quickly create or navigate to scripts.</span></span>

## <a name="expose-c-class-variables-for-easy-tuning"></a><span data-ttu-id="f04c0-131">Предоставление переменных класса C# для простоты настройки</span><span class="sxs-lookup"><span data-stu-id="f04c0-131">Expose C# class variables for easy tuning</span></span>

<span data-ttu-id="f04c0-132">Существует два способа предоставления переменных класса.</span><span class="sxs-lookup"><span data-stu-id="f04c0-132">There are two ways to expose class variables.</span></span> <span data-ttu-id="f04c0-133">Рекомендуемый способ — добавить атрибут [Сериализефиелд] к частным переменным.</span><span class="sxs-lookup"><span data-stu-id="f04c0-133">The recommended way is to add the [SerializeField] attribute to your private variables.</span></span> <span data-ttu-id="f04c0-134">К сериализованным полям можно обращаться из редактора, но не предоставлять программным способом.</span><span class="sxs-lookup"><span data-stu-id="f04c0-134">Serialized fields can be accessed from the editor but not programmatically exposed.</span></span>  <span data-ttu-id="f04c0-135">Другой вариант — сделать переменные класса C# открытыми для предоставления их в пользовательском интерфейсе редактора.</span><span class="sxs-lookup"><span data-stu-id="f04c0-135">The other option is to make C# class variables public to expose them in the editor UI.</span></span> 

<span data-ttu-id="f04c0-136">Оба подхода позволяют легко настраивать переменные при воспроизведении в редакторе, что особенно полезно для настройки свойств механику взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="f04c0-136">Both approaches make it possible to easily tweak variables while playing in-editor, which is especially useful for tuning interaction mechanic properties.</span></span>

## <a name="regenerate-uwp-visual-studio-solutions-after-windows-sdk-or-unity-upgrade"></a><span data-ttu-id="f04c0-137">Повторное создание решений Visual Studio UWP после Windows SDK или обновления Unity</span><span class="sxs-lookup"><span data-stu-id="f04c0-137">Regenerate UWP Visual Studio solutions after Windows SDK or Unity upgrade</span></span>

<span data-ttu-id="f04c0-138">Решения Visual Studio для UWP, возвращенные в систему управления версиями, могут устареть после обновления до новой Windows SDK или подсистемы Unity.</span><span class="sxs-lookup"><span data-stu-id="f04c0-138">UWP Visual Studio solutions checked in to source control can get out-of-date after upgrading to a new Windows SDK or Unity engine.</span></span> <span data-ttu-id="f04c0-139">Вы можете устранить неактуальные решения после создания нового решения UWP из Unity и объединения различий в возвращенное решение.</span><span class="sxs-lookup"><span data-stu-id="f04c0-139">You can resolve out-of-date solutions after by building a new UWP solution from Unity and merging differences into the checked-in solution.</span></span>

## <a name="use-text-format-assets-for-easy-comparison-of-content-changes"></a><span data-ttu-id="f04c0-140">Использование ресурсов текстового формата для простого сравнения изменений содержимого</span><span class="sxs-lookup"><span data-stu-id="f04c0-140">Use text-format assets for easy comparison of content changes</span></span>

<span data-ttu-id="f04c0-141">Хранение ресурсов в текстовом формате упрощает проверку различий изменений содержимого в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f04c0-141">Storing assets in text format makes it easier to review content change diffs in Visual Studio.</span></span> <span data-ttu-id="f04c0-142">Ресурсы можно хранить в текстовом формате, выбрав **изменить > параметры проекта > редактор** и изменить режим **сериализации ресурсов** для **принудительного ввода текста**.</span><span class="sxs-lookup"><span data-stu-id="f04c0-142">You can store assets in text format by selecting **Edit > Project Settings > Editor** and change **Asset Serialization** mode to **Force Text**.</span></span> <span data-ttu-id="f04c0-143">Однако слияние изменений в файлах с текстовыми ресурсами является подверженным ошибкам и не рекомендуется, поэтому рекомендуется включить эксклюзивное двоичное извлечение в системе управления версиями.</span><span class="sxs-lookup"><span data-stu-id="f04c0-143">However, merging text asset file changes is error-prone and not recommended, so consider enabling exclusive binary checkouts in your source control.</span></span>

## <a name="see-also"></a><span data-ttu-id="f04c0-144">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="f04c0-144">See also</span></span>
- [<span data-ttu-id="f04c0-145">Набор средств Visual Studio для Unity</span><span class="sxs-lookup"><span data-stu-id="f04c0-145">Visual Studio Tools for Unity</span></span>](https://visualstudiogallery.msdn.microsoft.com/8d26236e-4a64-4d64-8486-7df95156aba9)
- [<span data-ttu-id="f04c0-146">Оптимизация времени сборки для IL2CPP</span><span class="sxs-lookup"><span data-stu-id="f04c0-146">Optimizing Build Times for IL2CPP</span></span>](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html)
- [<span data-ttu-id="f04c0-147">*Унитискриптанализер* Расширение Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f04c0-147">*UnityScriptAnalyzer* Visual Studio extension</span></span>](https://github.com/Microsoft/MixedRealityCompanionKit/tree/master/UnityScriptAnalyzer)
