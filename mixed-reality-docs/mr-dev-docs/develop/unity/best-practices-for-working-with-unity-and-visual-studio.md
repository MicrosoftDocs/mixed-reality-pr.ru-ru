---
title: Рекомендации Unity и Visual Studio
description: Советы и рекомендации по упрощению рабочего процесса создания приложения смешанной реальности с помощью Unity и Visual Studio.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: развертывание, Unity, Visual Studio, HoloLens, HoloLens 2, закрепляемая гарнитура, лучшие методики, гарнитура смешанной реальности, гарнитура Windows Mixed Reality, гарнитура виртуальной реальности, UWP, Инструменты Visual Studio, Windows SDK
ms.openlocfilehash: edd79b95d02cfeb1da4effc485fc57078e3d24a3
ms.sourcegitcommit: 12ea3fb2df4664c5efd07dcbb9040c2ff173afb6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/29/2021
ms.locfileid: "113042265"
---
# <a name="best-practices-for-working-with-unity-and-visual-studio"></a>Рекомендации по работе с Unity и Visual Studio

При создании приложения смешанной реальности с помощью Unity необходимо переключиться между Unity и Visual Studio, чтобы создать и развернуть пакет приложения в HoloLens или иммерсивное гарнитуру. По умолчанию два экземпляра Visual Studio являются обязательными — один экземпляр для изменения скриптов Unity, а другой — для развертывания на устройстве и отладки. Приведенные ниже инструкции позволяют разрабатывать решения с использованием одного экземпляра Visual Studio, уменьшая частоту экспорта проектов Unity и улучшая процесс отладки.

## <a name="improving-iteration-time"></a>Увеличение времени итерации

Поддержка серверной части сценариев .NET в Unity была признана устаревшей в Unity 2018 и удалена из Unity 2019 +, поэтому мы рекомендуем перейти на [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html). Однако время от Unity до Visual Studio может происходить дольше. Чтобы улучшить для ускорения итерации, настройте среду для достижения наилучших результатов компиляции:

1) Используйте добавочное построение, создав проект в одном каталоге каждый раз, повторно используя предварительно созданные файлы
2) Отключить сканирование антивредоносного по для проекта & папок сборки
   - Откройте **Антивирусную & защиту от угроз** в приложении "Параметры Windows 10"
   - Выберите **Управление параметрами** в разделе **Параметры защиты от угроз & вирусов** .
   - Выберите **Добавить или удалить исключения** в разделе **исключения** .
   - Выберите **Добавить исключение** и выберите папку, содержащую код проекта Unity и выходные данные сборки.
3) Использование SSD для создания

Дополнительные сведения см. в обзоре [оптимизации времени сборки для IL2CPP](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html) . Кроме того, ознакомьтесь [с разделом Отладка в серверной части сценариев IL2CPP](https://docs.unity3d.com/Manual/windowsstore-debugging-il2cpp.html).

Рассмотрите возможность установки [расширения Visual Studio *унитискриптанализер*](https://github.com/Microsoft/MixedRealityCompanionKit/tree/master/UnityScriptAnalyzer). Это средство анализирует сценарии C# для Unity для кода, который может быть написан более оптимизированным образом.

## <a name="visual-studio-tools-for-unity"></a>Набор средств Visual Studio для Unity

Скачать [инструменты Visual Studio для Unity](/visualstudio/cross-platform/getting-started-with-visual-studio-tools-for-unity)

**Преимущества Инструменты Visual Studio для Unity**
* Отладка Unity в редакторе в режиме воспроизведения из Visual Studio путем размещения точек останова, оценки переменных и сложных выражений.
* Используйте обозреватель проектов Unity, чтобы найти скрипт с точно такой же иерархией, которая отображается в Unity.
* Получите консоль Unity непосредственно в Visual Studio.
* Используйте мастера для быстрого создания скриптов или перехода к ним.

## <a name="expose-c-class-variables-for-easy-tuning"></a>Предоставление переменных класса C# для простоты настройки

Существует два способа предоставления переменных класса. Рекомендуемый способ — добавить атрибут [Сериализефиелд] к частным переменным. К сериализованным полям можно обращаться из редактора, но не предоставлять программным способом.  Другой вариант — сделать переменные класса C# открытыми для предоставления их в пользовательском интерфейсе редактора. 

Оба подхода позволяют легко настраивать переменные при воспроизведении в редакторе, что особенно полезно для настройки свойств механику взаимодействия.

## <a name="regenerate-uwp-visual-studio-solutions-after-windows-sdk-or-unity-upgrade"></a>Повторное создание решений Visual Studio UWP после Windows SDK или обновления Unity

Решения Visual Studio для UWP, возвращенные в систему управления версиями, могут устареть после обновления до новой Windows SDK или подсистемы Unity. Вы можете устранить неактуальные решения после создания нового решения UWP из Unity и объединения различий в возвращенное решение.

## <a name="use-text-format-assets-for-easy-comparison-of-content-changes"></a>Использование ресурсов текстового формата для простого сравнения изменений содержимого

Хранение ресурсов в текстовом формате упрощает проверку различий изменений содержимого в Visual Studio. Ресурсы можно хранить в текстовом формате, выбрав **изменить > параметры проекта > редактор** и изменить режим **сериализации ресурсов** для **принудительного ввода текста**. Однако слияние изменений в файлах с текстовыми ресурсами является подверженным ошибкам и не рекомендуется, поэтому рекомендуется включить эксклюзивное двоичное извлечение в системе управления версиями.

## <a name="see-also"></a>См. также
- [Набор средств Visual Studio для Unity](https://visualstudiogallery.msdn.microsoft.com/8d26236e-4a64-4d64-8486-7df95156aba9)
- [Оптимизация времени сборки для IL2CPP](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html)
- [*Унитискриптанализер* Расширение Visual Studio](https://github.com/Microsoft/MixedRealityCompanionKit/tree/master/UnityScriptAnalyzer)