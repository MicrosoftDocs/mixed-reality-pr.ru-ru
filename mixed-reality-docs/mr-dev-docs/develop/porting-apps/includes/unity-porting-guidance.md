---
ms.openlocfilehash: 0ef22142ac2efc3ef47ece2619d31dbeddcff8fe
ms.sourcegitcommit: a1bb77f729ee2e0b3dbd1c2c837bb7614ba7b9bd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98192670"
---
# <a name="project-settings"></a>[<span data-ttu-id="e79f3-101">Параметры проекта</span><span class="sxs-lookup"><span data-stu-id="e79f3-101">Project settings</span></span>](#tab/project)

### <a name="1-review-the-common-porting-steps-listed-above"></a><span data-ttu-id="e79f3-102">1. Ознакомьтесь с общими действиями по переносу, перечисленными выше.</span><span class="sxs-lookup"><span data-stu-id="e79f3-102">1. Review the common porting steps listed above</span></span>

<span data-ttu-id="e79f3-103">Чтобы убедиться, что среда разработки настроена правильно, ознакомьтесь с приведенными выше общими действиями.</span><span class="sxs-lookup"><span data-stu-id="e79f3-103">Review the common steps listed above to make sure your development environment is set up correctly.</span></span> <span data-ttu-id="e79f3-104">На шаге #3, если вы используете Visual Studio, следует выбрать рабочую нагрузку " **Разработка игр с помощью Unity** ".</span><span class="sxs-lookup"><span data-stu-id="e79f3-104">In step #3, if you're using Visual Studio you should select the **Game Development with Unity** workload.</span></span> <span data-ttu-id="e79f3-105">Вы можете отменить выбор компонента "необязательный редактор Unity", так как вы будете устанавливать более новую версию Unity на следующем шаге.</span><span class="sxs-lookup"><span data-stu-id="e79f3-105">You may deselect the "Unity Editor optional" component since you'll be installing a newer version of Unity in the next step.</span></span>

### <a name="2-upgrade-to-the-latest-public-build-of-unity-with-windows-mr-support"></a><span data-ttu-id="e79f3-106">2. обновление до последней общедоступной сборки Unity с поддержкой Windows MR</span><span class="sxs-lookup"><span data-stu-id="e79f3-106">2. Upgrade to the latest public build of Unity with Windows MR Support</span></span>
1. <span data-ttu-id="e79f3-107">Скачайте последнюю [рекомендуемую общедоступную сборку Unity](../../install-the-tools.md) с поддержкой смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="e79f3-107">Download the latest [recommended public build of Unity](../../install-the-tools.md) with mixed reality support.</span></span>
2. <span data-ttu-id="e79f3-108">Сохраните копию проекта, прежде чем приступить к работе</span><span class="sxs-lookup"><span data-stu-id="e79f3-108">Save a copy of your project before you get started</span></span>
3. <span data-ttu-id="e79f3-109">Ознакомьтесь с [документацией](https://docs.unity3d.com/Manual/UpgradeGuides.html) , доступной в Unity, при обновлении, если проект создан на основе более старой версии Unity.</span><span class="sxs-lookup"><span data-stu-id="e79f3-109">Review the [documentation](https://docs.unity3d.com/Manual/UpgradeGuides.html) available from Unity on upgrading if your project was built on an older version of Unity.</span></span>
4. <span data-ttu-id="e79f3-110">Следуйте [инструкциям](https://docs.unity3d.com/Manual/APIUpdater.html) на сайте Unity для использования автоматических средств обновления API.</span><span class="sxs-lookup"><span data-stu-id="e79f3-110">Follow the [instructions](https://docs.unity3d.com/Manual/APIUpdater.html) on Unity's site for using their automatic API updater</span></span>
5. <span data-ttu-id="e79f3-111">Проверьте, есть ли дополнительные изменения, необходимые для запуска проекта, и выполните все оставшиеся ошибки и предупреждения.</span><span class="sxs-lookup"><span data-stu-id="e79f3-111">Check and see if there are additional changes that you need to make to get your project running, and work through any remaining errors and warnings.</span></span> 

> [!Note] 
> <span data-ttu-id="e79f3-112">Если по промежуточного слоя от вас зависит, убедитесь, что вы используете последний выпуск (Дополнительные сведения см. на шаге 3 ниже).</span><span class="sxs-lookup"><span data-stu-id="e79f3-112">If you have middleware that you depend on, check that you're using the latest release (more details in step 3 below).</span></span>

### <a name="3-upgrade-your-middleware-to-the-latest-versions"></a><span data-ttu-id="e79f3-113">3. Обновите по промежуточного слоя до последних версий</span><span class="sxs-lookup"><span data-stu-id="e79f3-113">3. Upgrade your middleware to the latest versions</span></span>

<span data-ttu-id="e79f3-114">При любом обновлении Unity есть хороший шанс, что вам потребуется обновить один или несколько пакетов по промежуточного слоя, от которых зависит ваша игра или приложение.</span><span class="sxs-lookup"><span data-stu-id="e79f3-114">With any Unity update, there's a good chance that you'll need to update one or more middleware packages that your game or application depends on.</span></span> <span data-ttu-id="e79f3-115">Кроме того, обновление по промежуточного слоя повышает вероятность успеха на протяжении всего процесса переноса.</span><span class="sxs-lookup"><span data-stu-id="e79f3-115">Additionally, being up to date with the latest middleware increases the likelihood of success throughout the rest of the porting process.</span></span>

### <a name="4-target-your-application-to-run-on-win32"></a><span data-ttu-id="e79f3-116">4. Назначение приложения для запуска в Win32</span><span class="sxs-lookup"><span data-stu-id="e79f3-116">4. Target your application to run on Win32</span></span>

<span data-ttu-id="e79f3-117">Изнутри приложения Unity:</span><span class="sxs-lookup"><span data-stu-id="e79f3-117">From inside your Unity application:</span></span>

* <span data-ttu-id="e79f3-118">Выберите файл-> параметры сборки</span><span class="sxs-lookup"><span data-stu-id="e79f3-118">Navigate to File -> Build Settings</span></span>
* <span data-ttu-id="e79f3-119">Выберите "компьютер, Mac, автономная версия Linux"</span><span class="sxs-lookup"><span data-stu-id="e79f3-119">Select "PC, Mac, Linux Standalone"</span></span>
* <span data-ttu-id="e79f3-120">Задать целевую платформу "Windows"</span><span class="sxs-lookup"><span data-stu-id="e79f3-120">Set target platform to "Windows"</span></span>
* <span data-ttu-id="e79f3-121">Установка архитектуры "x86" выберите параметр "платформа"</span><span class="sxs-lookup"><span data-stu-id="e79f3-121">Set architecture to "x86" Select "Switch Platform"</span></span>

> [!NOTE] 
> <span data-ttu-id="e79f3-122">Если приложение имеет какие-либо зависимости от служб для конкретных устройств, таких как сопоставление из Steam, необходимо отключить их на этом шаге.</span><span class="sxs-lookup"><span data-stu-id="e79f3-122">If your application has any dependencies on device-specific services, such as match making from Steam, you'll need to disable them at this step.</span></span> <span data-ttu-id="e79f3-123">Вы можете подключиться к эквивалентным службам, которые Windows предоставляет позже.</span><span class="sxs-lookup"><span data-stu-id="e79f3-123">You can hook up to the equivalent services that Windows provides later on.</span></span>

### <a name="5-setup-your-windows-mixed-reality-hardware"></a><span data-ttu-id="e79f3-124">5. Настройка оборудования Windows Mixed Reality</span><span class="sxs-lookup"><span data-stu-id="e79f3-124">5. Setup your Windows Mixed Reality hardware</span></span>
1. <span data-ttu-id="e79f3-125">Ознакомьтесь с этапами [настройки иммерсивного головного телефона](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span><span class="sxs-lookup"><span data-stu-id="e79f3-125">Review steps in [Immersive headset setup](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span></span>
2. <span data-ttu-id="e79f3-126">Узнайте об [использовании симулятора Windows Mixed Reality](../../platform-capabilities-and-apis/using-the-windows-mixed-reality-simulator.md) и [навигации на домашней странице Windows Mixed Reality](../../../discover/navigating-the-windows-mixed-reality-home.md)</span><span class="sxs-lookup"><span data-stu-id="e79f3-126">Learn about [Using the Windows Mixed Reality simulator](../../platform-capabilities-and-apis/using-the-windows-mixed-reality-simulator.md) and [Navigating the Windows Mixed Reality home](../../../discover/navigating-the-windows-mixed-reality-home.md)</span></span>

### <a name="6-target-your-application-to-run-on-windows-mixed-reality"></a><span data-ttu-id="e79f3-127">6. Назначение приложения для запуска в Windows Mixed Reality</span><span class="sxs-lookup"><span data-stu-id="e79f3-127">6. Target your application to run on Windows Mixed Reality</span></span>
1. <span data-ttu-id="e79f3-128">Во-первых, необходимо удалить или условно откомпилировать любую другую поддержку библиотеки, относящуюся к конкретному пакету SDK для VR.</span><span class="sxs-lookup"><span data-stu-id="e79f3-128">First, you must remove or conditionally compile out any other library support specific to a particular VR SDK.</span></span> <span data-ttu-id="e79f3-129">Эти активы часто изменяют параметры и свойства проекта способами, несовместимыми с другими пакетами SDK для VR, такими как Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="e79f3-129">Those assets frequently change settings and properties on your project in ways that are incompatible with other VR SDKs, such as Windows Mixed Reality.</span></span>
    * <span data-ttu-id="e79f3-130">Например, если проект ссылается на пакет SDK для Стеамвр, необходимо обновить проект, чтобы вместо этого использовать общие API-интерфейсы среды Unity, которые поддерживают как Windows Mixed Reality, так и Стеамвр.</span><span class="sxs-lookup"><span data-stu-id="e79f3-130">For example, if your project references the SteamVR SDK, you'll need to update your project to instead use Unity's common VR APIs that support both Windows Mixed Reality and SteamVR.</span></span>
    * <span data-ttu-id="e79f3-131">В ближайшее время ожидается процедура, исключающая другие пакеты SDK для VR.</span><span class="sxs-lookup"><span data-stu-id="e79f3-131">Specific steps for conditionally excluding other VR SDKs are coming soon.</span></span>
2. <span data-ttu-id="e79f3-132">В проекте Unity [нацеливание на пакет SDK для Windows 10](../../unity/tutorials/holograms-100.md#target-windows-10-sdk)</span><span class="sxs-lookup"><span data-stu-id="e79f3-132">In your Unity project, [target the Windows 10 SDK](../../unity/tutorials/holograms-100.md#target-windows-10-sdk)</span></span>
3. <span data-ttu-id="e79f3-133">Для каждой сцены [Настройте камеру](../../unity/tutorials/holograms-100.md#chapter-2---setup-the-camera) .</span><span class="sxs-lookup"><span data-stu-id="e79f3-133">For each scene, [setup the camera](../../unity/tutorials/holograms-100.md#chapter-2---setup-the-camera)</span></span>

### <a name="7-use-the-stage-to-place-content-on-the-floor"></a><span data-ttu-id="e79f3-134">7. использование этапа для размещения содержимого в этаже</span><span class="sxs-lookup"><span data-stu-id="e79f3-134">7. Use the stage to place content on the floor</span></span>

<span data-ttu-id="e79f3-135">Вы можете создавать возможности смешанной реальности во множестве различных [возможностей масштабирования](../../../design/coordinate-systems.md).</span><span class="sxs-lookup"><span data-stu-id="e79f3-135">You can build Mixed Reality experiences across a wide range of [experience scales](../../../design/coordinate-systems.md).</span></span>

<span data-ttu-id="e79f3-136">Если вы переносите **интерфейсное масштабирование**, необходимо убедиться, что Unity настроен на **стационарный** тип пространства отслеживания:</span><span class="sxs-lookup"><span data-stu-id="e79f3-136">If you're porting a **seated-scale experience**, you must ensure Unity is set to the **Stationary** tracking space type:</span></span>

```cs
XRDevice.SetTrackingSpaceType(TrackingSpaceType.Stationary);
```

<span data-ttu-id="e79f3-137">Приведенный выше код устанавливает мировую систему координат Unity для трассировки [стационарной рамки ссылки](../../../design/coordinate-systems.md#spatial-coordinate-systems).</span><span class="sxs-lookup"><span data-stu-id="e79f3-137">This above code sets Unity's world coordinate system to track the [stationary frame of reference](../../../design/coordinate-systems.md#spatial-coordinate-systems).</span></span> <span data-ttu-id="e79f3-138">В режиме стационарного отслеживания содержимое, помещенное в редактор непосредственно перед расположением по умолчанию камеры (переадресация — Z), отображается перед пользователем при запуске приложения.</span><span class="sxs-lookup"><span data-stu-id="e79f3-138">In the Stationary tracking mode, content placed in the editor just in front of the camera's default location (forward is -Z) appears in front of the user when the app launches.</span></span> <span data-ttu-id="e79f3-139">Чтобы перецентрировать исходный элемент пользователя, можно вызвать [XR Unity. Метод Инпуттраккинг. recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) .</span><span class="sxs-lookup"><span data-stu-id="e79f3-139">To recenter the user's seated origin, you can call Unity's [XR.InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) method.</span></span>

<span data-ttu-id="e79f3-140">Если вы проведете переносные **средства или** **возможности масштабирования комнаты**, вы помещаете содержимое относительно пола.</span><span class="sxs-lookup"><span data-stu-id="e79f3-140">If you're porting a **standing-scale experience** or **room-scale experience**, you'll be placing content relative to the floor.</span></span> <span data-ttu-id="e79f3-141">Вы указываете на этаж пользователя с помощью **[пространственного этапа](../../../design/coordinate-systems.md#spatial-coordinate-systems)**, который представляет определенное пользователем происхождение на уровне пола и дополнительную границу комнаты, настраивается во время первого запуска.</span><span class="sxs-lookup"><span data-stu-id="e79f3-141">You reason about the user's floor using the **[spatial stage](../../../design/coordinate-systems.md#spatial-coordinate-systems)**, which represents the user's defined floor-level origin and optional room boundary, set up during first run.</span></span> <span data-ttu-id="e79f3-142">Для этих возможностей необходимо убедиться, что для Unity задан тип пространства отслеживания **румскале** .</span><span class="sxs-lookup"><span data-stu-id="e79f3-142">For these experiences, you must ensure Unity is set to the **RoomScale** tracking space type.</span></span> <span data-ttu-id="e79f3-143">Хотя Румскале является значением по умолчанию, необходимо явно задать его и убедиться, что вы получаете значение true, чтобы выявить ситуации, в которых пользователь переместил компьютер за пределы разкалиброванной комнаты.</span><span class="sxs-lookup"><span data-stu-id="e79f3-143">While RoomScale is the default, you'll want to set it explicitly and ensure you get back true, to catch situations where the user has moved their computer away from the room they calibrated:</span></span>

```cs
if (XRDevice.SetTrackingSpaceType(TrackingSpaceType.RoomScale))
{
    // RoomScale mode was set successfully.  App can now assume that y=0 in Unity world coordinate represents the floor.
}
else
{
    // RoomScale mode was not set successfully.  App cannot make assumptions about where the floor plane is.
}
```

<span data-ttu-id="e79f3-144">После того как приложение успешно установит тип пространства отслеживания Румскале, на этаж будут отображаться содержимое, помещенное на плоскости y = 0.</span><span class="sxs-lookup"><span data-stu-id="e79f3-144">Once your app successfully sets the RoomScale tracking space type, content placed on the y=0 plane will appear on the floor.</span></span> <span data-ttu-id="e79f3-145">Источник в точке (0, 0, 0) будет определять конкретное место в этаже, где пользователь стояли во время настройки комнаты, с параметром-Z, представляющим Направление переадресации во время установки.</span><span class="sxs-lookup"><span data-stu-id="e79f3-145">The origin at (0, 0, 0) will be the specific place on the floor where the user stood during room setup, with -Z representing the forward direction they were facing during setup.</span></span>

<span data-ttu-id="e79f3-146">В коде скрипта можно вызвать метод Трижетжеометри, так как тип UnityEngine. экспериментальный. XR. граничное используется для получения граничного многоугольника, указывая тип границы Траккедареа.</span><span class="sxs-lookup"><span data-stu-id="e79f3-146">In script code, you can then call the TryGetGeometry method on you're the UnityEngine.Experimental.XR.Boundary type to get a boundary polygon, specifying a boundary type of TrackedArea.</span></span> <span data-ttu-id="e79f3-147">Если пользователь определил границу (вы получаете список вершин), вы можете легко предоставить пользователю **возможности масштабирования комнаты** , где они могут пройти по создаваемой сцене.</span><span class="sxs-lookup"><span data-stu-id="e79f3-147">If the user defined a boundary (you get back a list of vertices), it's safe to deliver a **room-scale experience** to the user, where they can walk around the scene you create.</span></span>

<span data-ttu-id="e79f3-148">Система автоматически визуализирует границу, когда пользователь его приближает.</span><span class="sxs-lookup"><span data-stu-id="e79f3-148">The system will automatically render the boundary when the user approaches it.</span></span> <span data-ttu-id="e79f3-149">Приложению не нужно использовать этот многоугольник для отрисовки самой границы.</span><span class="sxs-lookup"><span data-stu-id="e79f3-149">Your app does not need to use this polygon to render the boundary itself.</span></span>

<span data-ttu-id="e79f3-150">Дополнительные сведения см. на странице [системы координат на Unity](../../unity/coordinate-systems-in-unity.md) .</span><span class="sxs-lookup"><span data-stu-id="e79f3-150">For more information, see the [Coordinate systems in Unity](../../unity/coordinate-systems-in-unity.md) page.</span></span>

<!-- Some applications use a rectangle to constrain their interaction. Retrieving the largest inscribed rectangle is not directly supported in the UWP API or Unity. The example code linked to below shows how to find a rectangle within the traced bounds. It's heuristic-based so may not find the optimal solution, however, results are consistent with expectations. Parameters in the algorithm can be tuned to find more precise results at the cost of processing time. The algorithm is in a fork of the Mixed Reality Toolkit that uses the 5.6 preview MRTP version of Unity. This isn't publicly available. The code should be directly usable in 2017.2 and higher versions of Unity. The code will be ported to the current MRTK in the near future. -->

<span data-ttu-id="e79f3-151">Пример результатов:</span><span class="sxs-lookup"><span data-stu-id="e79f3-151">Example of results:</span></span>

![Пример результатов](../../porting-apps/images/largestrectangle-400px.jpg)

<span data-ttu-id="e79f3-153">Алгоритм основан на блоге, Даниэль Смилков: [самый крупный прямоугольник в многоугольнике](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span><span class="sxs-lookup"><span data-stu-id="e79f3-153">Algorithm is based on a blog by Daniel Smilkov: [Largest rectangle in a polygon](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span></span>

### <a name="8-work-through-your-input-model"></a><span data-ttu-id="e79f3-154">8. Работа с моделью ввода</span><span class="sxs-lookup"><span data-stu-id="e79f3-154">8. Work through your input model</span></span>

<span data-ttu-id="e79f3-155">Каждая игра или приложение, предназначенное для существующего ХМД, будет иметь набор входных данных, которые он обрабатывает, типы входных данных, необходимые для работы, и конкретные интерфейсы API, которые он вызывает для получения этих входных данных.</span><span class="sxs-lookup"><span data-stu-id="e79f3-155">Each game or application targeting an existing HMD will have a set of inputs that it handles, types of inputs that it needs for the experience, and specific APIs that it calls to get those inputs.</span></span> <span data-ttu-id="e79f3-156">Мы реализовали попытку сделать это как можно проще и простым, чтобы воспользоваться преимуществами входных данных, доступных в Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="e79f3-156">We've invested in trying to make it as simple and straightforward as possible to take advantage of the inputs available in Windows Mixed Reality.</span></span>

<span data-ttu-id="e79f3-157">Прочтите [руководство по переносу данных для Unity](https://docs.microsoft.com/windows/mixed-reality/develop/porting-apps/porting-guides?tabs=input) на соседней вкладке, чтобы узнать, как Windows Mixed Reality предоставляет входные данные, и как они сопоставлены с тем, что приложение может сделать сегодня.</span><span class="sxs-lookup"><span data-stu-id="e79f3-157">Read through the [input porting guide for Unity](https://docs.microsoft.com/windows/mixed-reality/develop/porting-apps/porting-guides?tabs=input) in the adjacent tab for details of how Windows Mixed Reality exposes input, and how that maps to what your application may do today.</span></span>

### <a name="9-performance-testing-and-tuning"></a><span data-ttu-id="e79f3-158">9. Тестирование и настройка производительности</span><span class="sxs-lookup"><span data-stu-id="e79f3-158">9. Performance testing and tuning</span></span>

<span data-ttu-id="e79f3-159">Windows Mixed Reality будет доступна на широком классе устройств, от высокопроизводительных компьютерных ПК до широкого спектра основных ПК на рынке.</span><span class="sxs-lookup"><span data-stu-id="e79f3-159">Windows Mixed Reality will be available on a broad class of devices, ranging from high end gaming PCs, down to broad market mainstream PCs.</span></span> <span data-ttu-id="e79f3-160">В зависимости от того, на каком рынке ориентирован целевой объект, существует существенная разница в доступных вычислениях и графических бюджетах для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="e79f3-160">Depending on what market you're targeting, there's a significant difference in the available compute and graphics budgets for your application.</span></span> <span data-ttu-id="e79f3-161">Во время этого упражнения по переносу вы, скорее всего, используете ПК уровня "Премиум" и имели значительные бюджетные и графические графики, доступные для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="e79f3-161">During this porting exercise, you're likely leveraging a premium PC, and have had significant compute and graphics budgets available to your app.</span></span> <span data-ttu-id="e79f3-162">Если вы хотите сделать приложение доступным более широкой аудитории, следует протестировать и профилировать приложение на [целевом оборудовании, которое вы хотите](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)использовать.</span><span class="sxs-lookup"><span data-stu-id="e79f3-162">If you wish to make your app available to a broader audience, you should test and profile your app on [the representative hardware that you wish to target](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>

<span data-ttu-id="e79f3-163">[Unity](https://docs.unity3d.com/Manual/Profiler.html) и [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) включают в себя Профилировщики производительности, а как [Корпорация Майкрософт](../../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) , так и [Корпорация Intel](https://software.intel.com/articles/vr-content-developer-guide) публикуют рекомендации по профилированию и оптимизации производительности.</span><span class="sxs-lookup"><span data-stu-id="e79f3-163">Both [Unity](https://docs.unity3d.com/Manual/Profiler.html) and [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) include performance profilers, and both [Microsoft](../../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) and [Intel](https://software.intel.com/articles/vr-content-developer-guide) publish guidelines on performance profiling and optimization.</span></span> <span data-ttu-id="e79f3-164">Существует подробное обсуждение производительности, доступное [для понимания производительности смешанной реальности](../../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md).</span><span class="sxs-lookup"><span data-stu-id="e79f3-164">There's an extensive discussion of performance available at [Understanding Performance for Mixed Reality](../../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md).</span></span> <span data-ttu-id="e79f3-165">Дополнительные сведения о Unity см. в разделе [рекомендации по повышению производительности для Unity](../../unity/performance-recommendations-for-unity.md).</span><span class="sxs-lookup"><span data-stu-id="e79f3-165">Further, there are specific details for Unity under [Performance Recommendations for Unity](../../unity/performance-recommendations-for-unity.md).</span></span>

# <a name="input-mapping"></a>[<span data-ttu-id="e79f3-166">сопоставление входных данных;</span><span class="sxs-lookup"><span data-stu-id="e79f3-166">Input mapping</span></span>](#tab/input)

<span data-ttu-id="e79f3-167">Вы можете перенести логику входных данных в Windows Mixed Reality с помощью одного из двух подходов: общих входных API-интерфейсов Unity, которые охватывают несколько платформ, или XR, связанных с Windows. Головк. Интерфейсы API ввода, которые предлагают более широкие данные, специально для контроллеров движения и HoloLens.</span><span class="sxs-lookup"><span data-stu-id="e79f3-167">You can port your input logic to Windows Mixed Reality using one of two approaches, Unity's general Input.GetButton/GetAxis APIs that span across multiple platforms, or the Windows-specific XR.WSA.Input APIs that offer richer data specifically for motion controllers and HoloLens hands.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e79f3-168">Если вы используете контроллеры HP reverbы G2, обратитесь к [этой статье](../../unity/unity-reverb-g2-controllers.md) для получения дополнительных инструкций по сопоставлению входных данных.</span><span class="sxs-lookup"><span data-stu-id="e79f3-168">If your using HP Reverb G2 controllers, please refer to [this article](../../unity/unity-reverb-g2-controllers.md) for additional input mapping instructions.</span></span>

## <a name="unity-xr-input-apis"></a><span data-ttu-id="e79f3-169">Входные API-интерфейсы Unity XR</span><span class="sxs-lookup"><span data-stu-id="e79f3-169">Unity XR input APIs</span></span>

<span data-ttu-id="e79f3-170">Для новых проектов рекомендуется использовать новые интерфейсы API ввода XR с самого начала.</span><span class="sxs-lookup"><span data-stu-id="e79f3-170">For new projects, we recommend using the new XR input APIs from the beginning.</span></span> 

<span data-ttu-id="e79f3-171">Дополнительные сведения об [API XR](https://docs.unity3d.com/Manual/xr_input.html)можно найти здесь.</span><span class="sxs-lookup"><span data-stu-id="e79f3-171">You can find more information about the [XR APIs here](https://docs.unity3d.com/Manual/xr_input.html).</span></span>

## <a name="inputgetbuttongetaxis-apis"></a><span data-ttu-id="e79f3-172">Входные API-интерфейсы input. OnButton и AXIS</span><span class="sxs-lookup"><span data-stu-id="e79f3-172">Input.GetButton/GetAxis APIs</span></span>

<span data-ttu-id="e79f3-173">В настоящее время Unity использует общие интерфейсы API input. Окулус и input. Axis для предоставления входных данных для [пакета SDK](https://docs.unity3d.com/Manual/OculusControllers.html) и [пакета SDK для опенвр](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span><span class="sxs-lookup"><span data-stu-id="e79f3-173">Unity currently uses its general Input.GetButton/Input.GetAxis APIs to expose input for [the Oculus SDK](https://docs.unity3d.com/Manual/OculusControllers.html) and [the OpenVR SDK](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span></span> <span data-ttu-id="e79f3-174">Если ваши приложения уже используют эти API для ввода данных, это самый простой путь для поддержки контроллеров движения в Windows Mixed Reality: необходимо просто сопоставить кнопки и оси в диспетчере ввода.</span><span class="sxs-lookup"><span data-stu-id="e79f3-174">If your apps are already using these APIs for input, this is the easiest path for supporting motion controllers in Windows Mixed Reality: you should just need to remap buttons and axes in the Input Manager.</span></span>

<span data-ttu-id="e79f3-175">Дополнительные сведения см. в разделе [Таблица соответствия кнопок и осей Unity](../../unity/motion-controllers-in-unity.md#unity-buttonaxis-mapping-table) , а также [Общие сведения об общих API Unity](../../unity/motion-controllers-in-unity.md#common-unity-apis-inputgetbuttongetaxis).</span><span class="sxs-lookup"><span data-stu-id="e79f3-175">For more information, see the [Unity button/axis mapping table](../../unity/motion-controllers-in-unity.md#unity-buttonaxis-mapping-table) and the [overview of the common Unity APIs](../../unity/motion-controllers-in-unity.md#common-unity-apis-inputgetbuttongetaxis).</span></span>

## <a name="windows-specific-xrwsainput-apis"></a><span data-ttu-id="e79f3-176">XR, относящийся к Windows. Головк. Входные интерфейсы API</span><span class="sxs-lookup"><span data-stu-id="e79f3-176">Windows-specific XR.WSA.Input APIs</span></span>

> [!CAUTION]
> <span data-ttu-id="e79f3-177">Если в проекте используются какие-либо из XR. Поэтапные API-интерфейсы см. в них используется пакет SDK XR в будущих выпусках Unity.</span><span class="sxs-lookup"><span data-stu-id="e79f3-177">If your project is using any of the XR.WSA APIs, these are being phased out in favor of the XR SDK in future Unity releases.</span></span> <span data-ttu-id="e79f3-178">Для новых проектов мы рекомендуем использовать пакет SDK для XR с самого начала.</span><span class="sxs-lookup"><span data-stu-id="e79f3-178">For new projects, we recommend using the XR SDK from the beginning.</span></span> <span data-ttu-id="e79f3-179">Дополнительные сведения о [системе ввода и интерфейсах API XR](https://docs.unity3d.com/Manual/xr_input.html)можно найти здесь.</span><span class="sxs-lookup"><span data-stu-id="e79f3-179">You can find more information about the [XR Input system and APIs here](https://docs.unity3d.com/Manual/xr_input.html).</span></span>

<span data-ttu-id="e79f3-180">Если приложение уже создает пользовательскую логику ввода для каждой платформы, можно выбрать использование пространственных входных API для Windows в пространстве имен **UnityEngine. XR. WSA. Input** .</span><span class="sxs-lookup"><span data-stu-id="e79f3-180">If your app already builds custom input logic for each platform, you can choose to use the Windows-specific spatial input APIs under the **UnityEngine.XR.WSA.Input** namespace.</span></span> <span data-ttu-id="e79f3-181">Это позволяет получить доступ к дополнительным сведениям, таким как точность расположения или тип источника, что позволяет сообщать руки и контроллеры на HoloLens.</span><span class="sxs-lookup"><span data-stu-id="e79f3-181">This lets you access additional information, such as position accuracy or the source kind, letting you tell hands and controllers apart on HoloLens.</span></span>

> [!NOTE]
> <span data-ttu-id="e79f3-182">Если вы используете контроллеры HP reverbы G2, все входные API-интерфейсы будут продолжать работать, за исключением **интерактионсаурце. суппортстаучпад**, который вернет значение false без данных сенсорной панели.</span><span class="sxs-lookup"><span data-stu-id="e79f3-182">If you're using HP Reverb G2 controllers, all input APIs will continue to work except for **InteractionSource.supportsTouchpad**, which will return false with no touchpad data.</span></span>

<span data-ttu-id="e79f3-183">Дополнительные сведения см. в [обзоре интерфейсов API UnityEngine. XR. WSA. Input](../../unity/motion-controllers-in-unity.md#windows-specific-apis-xrwsainput).</span><span class="sxs-lookup"><span data-stu-id="e79f3-183">For more information, see the [overview of the UnityEngine.XR.WSA.Input APIs](../../unity/motion-controllers-in-unity.md#windows-specific-apis-xrwsainput).</span></span>

## <a name="grip-pose-vs-pointing-pose"></a><span data-ttu-id="e79f3-184">Захват захвата и указание объекта a</span><span class="sxs-lookup"><span data-stu-id="e79f3-184">Grip pose vs. pointing pose</span></span>

<span data-ttu-id="e79f3-185">Windows Mixed Reality поддерживает контроллеры Motion в различных конструктивных факторах, при этом структура каждого контроллера различается в связи между положением пользователя и естественным направлением "вперед", которое приложения должны использовать для указания при подготовке к просмотру контроллера.</span><span class="sxs-lookup"><span data-stu-id="e79f3-185">Windows Mixed Reality supports motion controllers in a variety of form factors, with each controller's design differing in its relationship between the user's hand position and the natural "forward" direction that apps should use for pointing when rendering the controller.</span></span>

<span data-ttu-id="e79f3-186">Для лучшего представления этих контроллеров существует два вида элементов, которые можно исследовать для каждого источника взаимодействия:</span><span class="sxs-lookup"><span data-stu-id="e79f3-186">To better represent these controllers, there are two kinds of poses you can investigate for each interaction source:</span></span>

* <span data-ttu-id="e79f3-187">**Захват**, представляющий местоположение ручного устройства, обнаруженного HoloLens, или карманный ПК, удерживающий контроллер движения.</span><span class="sxs-lookup"><span data-stu-id="e79f3-187">The **grip pose**, representing the location of either the palm of a hand detected by a HoloLens, or the palm holding a motion controller.</span></span>
    * <span data-ttu-id="e79f3-188">В современных головных гарнитурах эта цель лучше подходит для визуализации **руки пользователя** или **объекта, хранящегося в руки пользователя**, например технологий или «обойма».</span><span class="sxs-lookup"><span data-stu-id="e79f3-188">On immersive headsets, this pose is best used to render **the user's hand** or **an object held in the user's hand**, such as a sword or gun.</span></span>
    * <span data-ttu-id="e79f3-189">**Позиция захвата**: Карманный центроид при удержании контроллера естественным образом настраивается влево или вправо для центрирования места внутри захвата.</span><span class="sxs-lookup"><span data-stu-id="e79f3-189">The **grip position**: The palm centroid when holding the controller naturally, adjusted left or right to center the position within the grip.</span></span>
    * <span data-ttu-id="e79f3-190">**Правая ось ориентации захвата**: когда вы полностью открываете руку для формирования плоской задачи с 5-пальцем, луч, обычный для вашего кармана (вперед от левого кармана, назад от правого Palm)</span><span class="sxs-lookup"><span data-stu-id="e79f3-190">The **grip orientation's Right axis**: When you completely open your hand to form a flat 5-finger pose, the ray that is normal to your palm (forward from left palm, backward from right palm)</span></span>
    * <span data-ttu-id="e79f3-191">**Прямая ось ориентации захвата**: когда вы частично закрываете руку (как при удержании контроллера), луч, который указывает на "Forward" через лампу, сформированную небегункными пальцами.</span><span class="sxs-lookup"><span data-stu-id="e79f3-191">The **grip orientation's Forward axis**: When you close your hand partially (as if holding the controller), the ray that points "forward" through the tube formed by your non-thumb fingers.</span></span>
    * <span data-ttu-id="e79f3-192">**Ось Up (вверх) для ориентации захвата**: ось Up, подразумеваемая правым и прямым определением.</span><span class="sxs-lookup"><span data-stu-id="e79f3-192">The **grip orientation's Up axis**: The Up axis implied by the Right and Forward definitions.</span></span>
    * <span data-ttu-id="e79f3-193">Доступ к захвату можно получить через API-интерфейс ввода кросс-поставщика Unity (**[XR). Инпуттраккинг](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html). Жетлокалпоситион/вращение**) или через API Windows (**Саурцестате. Саурцепосе. Трижетпоситион/вращение**, запрашивающий захват).</span><span class="sxs-lookup"><span data-stu-id="e79f3-193">You can access the grip pose through either Unity's cross-vendor input API (**[XR.InputTracking](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html).GetLocalPosition/Rotation**) or through the Windows-specific API (**sourceState.sourcePose.TryGetPosition/Rotation**, requesting the Grip pose).</span></span>
* <span data-ttu-id="e79f3-194">**Указатель**, представляющий кончик контроллера, указывающий на пересылку.</span><span class="sxs-lookup"><span data-stu-id="e79f3-194">The **pointer pose**, representing the tip of the controller pointing forward.</span></span>
    * <span data-ttu-id="e79f3-195">Эта цель лучше использовать для райкаст при **наведении указателя на пользовательский интерфейс** при отрисовке самой модели контроллера.</span><span class="sxs-lookup"><span data-stu-id="e79f3-195">This pose is best used to raycast when **pointing at UI** when you are rendering the controller model itself.</span></span>
    * <span data-ttu-id="e79f3-196">В настоящее время указатель a доступен только через API-интерфейс Windows (**саурцестате. саурцепосе. трижетпоситион/вращение**, запрашивая указатель a).</span><span class="sxs-lookup"><span data-stu-id="e79f3-196">Currently, the pointer pose is available only through the Windows-specific API (**sourceState.sourcePose.TryGetPosition/Rotation**, requesting the Pointer pose).</span></span>

<span data-ttu-id="e79f3-197">Эти координаты представляются в универсальных координатах Unity.</span><span class="sxs-lookup"><span data-stu-id="e79f3-197">These pose coordinates are all expressed in Unity world coordinates.</span></span>
