---
title: Перенос приложений HoloLens (1-го поколения) в HoloLens 2
description: Предназначено для разработчиков, которые используют существующее приложение для HoloLens (1-го поколения) и старые версии MRTK и хотят перейти на MRTK версии 2 и HoloLens 2.
author: hferrone
ms.author: grbury
ms.date: 12/9/2020
ms.topic: article
ms.localizationpriority: high
keywords: Windows Mixed Reality, тестирование, MRTK, MRTK версии 2, HoloLens 2, Unity, перенос, 1-е поколение, гарнитура смешанной реальности, гарнитура Windows Mixed Reality, гарнитура виртуальной реальности, миграция, рекомендации, ARM
ms.openlocfilehash: 512bd3e841d40ffd606d59ee4bb4d955306cc2d0
ms.sourcegitcommit: 12ea3fb2df4664c5efd07dcbb9040c2ff173afb6
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/29/2021
ms.locfileid: "113042255"
---
# <a name="porting-hololens-1st-gen-apps-to-hololens-2"></a><span data-ttu-id="8c74b-104">Перенос приложений HoloLens (1-го поколения) в HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="8c74b-104">Porting HoloLens (1st Gen) apps to HoloLens 2</span></span>

<span data-ttu-id="8c74b-105">Это руководство предназначено для разработчиков, которые используют существующее приложение Unity для HoloLens (1-го поколения) и хотят перенести его на устройство HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="8c74b-105">This guide is tailored to help developers with an existing Unity application for HoloLens (1st gen) port their application for the HoloLens 2 device.</span></span> <span data-ttu-id="8c74b-106">Процесс переноса приложения Unity для HoloLens (1-го поколения) на HoloLens 2 состоит из четырех основных шагов.</span><span class="sxs-lookup"><span data-stu-id="8c74b-106">There are four key steps to porting a HoloLens (1st gen) Unity application to HoloLens 2.</span></span> 

<span data-ttu-id="8c74b-107">Эти шаги подробно описаны в приведенных ниже разделах.</span><span class="sxs-lookup"><span data-stu-id="8c74b-107">The sections below detail information for each stage:</span></span>

| <span data-ttu-id="8c74b-108">Шаг 1</span><span class="sxs-lookup"><span data-stu-id="8c74b-108">Step 1</span></span> | <span data-ttu-id="8c74b-109">Шаг 2</span><span class="sxs-lookup"><span data-stu-id="8c74b-109">Step 2</span></span> | <span data-ttu-id="8c74b-110">Шаг 3</span><span class="sxs-lookup"><span data-stu-id="8c74b-110">Step 3</span></span> | <span data-ttu-id="8c74b-111">Шаг 4</span><span class="sxs-lookup"><span data-stu-id="8c74b-111">Step 4</span></span> |
|----------|-------------------|-------------------|-------------------|
| ![Логотип Visual Studio](../images/visualstudio_logo.png) | ![Логотип Unity](../../design/images/logo-unity.png)| ![Значок Unity](../unity/images/hololens2_icon.jpg) | ![Логотип МРТК](../../design/images/74-12.png) |
| <span data-ttu-id="8c74b-116">Скачивание новейших средств</span><span class="sxs-lookup"><span data-stu-id="8c74b-116">Download latest tools</span></span> | <span data-ttu-id="8c74b-117">Обновление проекта Unity</span><span class="sxs-lookup"><span data-stu-id="8c74b-117">Update Unity Project</span></span> | <span data-ttu-id="8c74b-118">Компиляция для ARM</span><span class="sxs-lookup"><span data-stu-id="8c74b-118">Compile for ARM</span></span> | <span data-ttu-id="8c74b-119">Миграция в MRTK версии 2</span><span class="sxs-lookup"><span data-stu-id="8c74b-119">Migrate to MRTK v2</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8c74b-120">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="8c74b-120">Prerequisites</span></span>

<span data-ttu-id="8c74b-121">Мы **настоятельно рекомендуем** использовать систему управления версиями для сохранения моментального снимка первоначального состояния приложения до начала переноса.</span><span class="sxs-lookup"><span data-stu-id="8c74b-121">We **highly recommended** using source control to save a snapshot your applications original state before starting the porting process.</span></span> <span data-ttu-id="8c74b-122">Кроме того, мы рекомендуем *сохранить* данные состояния контрольных точек в разное время при выполнении процесса.</span><span class="sxs-lookup"><span data-stu-id="8c74b-122">Additionally, we recommend *saving* checkpoint states at various times during the process.</span></span> <span data-ttu-id="8c74b-123">Также удобно создать еще один экземпляр исходного приложения Unity, чтобы обеспечить сравнение версий приложения во время переноса.</span><span class="sxs-lookup"><span data-stu-id="8c74b-123">It can also be helpful to have another Unity instance of the original application to compare side by side during the porting process.</span></span> 

> [!NOTE]
> <span data-ttu-id="8c74b-124">Перед переносом убедитесь, что установлены последние версии средств разработки для Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="8c74b-124">Before porting, ensure you have the latest tools installed for Windows Mixed Reality development.</span></span> <span data-ttu-id="8c74b-125">Для большинства разработчиков HoloLens это последняя версия Visual Studio 2019 и соответствующий пакет SDK для Windows.</span><span class="sxs-lookup"><span data-stu-id="8c74b-125">For most existing HoloLens developers, this involves updating to the latest version of Visual Studio 2019 and installing the appropriate Windows SDK.</span></span> <span data-ttu-id="8c74b-126">Подробное описание различных версий Unity и набора средств для смешанной реальности (MRTK) версии 2 представлено далее.</span><span class="sxs-lookup"><span data-stu-id="8c74b-126">The content that follows dives further into different Unity versions and the Mixed Reality Toolkit (MRTK) Version 2.</span></span>
>
> <span data-ttu-id="8c74b-127">Дополнительные сведения см. в статье [Install the tools](../install-the-tools.md) (Установка средств).</span><span class="sxs-lookup"><span data-stu-id="8c74b-127">For more information, please see [Install the tools](../install-the-tools.md).</span></span>

## <a name="migrate-project-to-the-latest-version-of-unity"></a><span data-ttu-id="8c74b-128">Перенос проекта в последнюю версию Unity</span><span class="sxs-lookup"><span data-stu-id="8c74b-128">Migrate project to the latest version of Unity</span></span>

<span data-ttu-id="8c74b-129">Если вы используете [MRTK версии 2](https://github.com/microsoft/MixedRealityToolkit-Unity), перед обновлением проекта до [Unity 2020.3 LTS](../unity/choosing-unity-version.md) рекомендуется обновить до MRTK до версии 2.7.</span><span class="sxs-lookup"><span data-stu-id="8c74b-129">If you're using [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), we recommend updating to MRTK 2.7 before you upgrade your project to [Unity 2020.3 LTS](../unity/choosing-unity-version.md).</span></span> <span data-ttu-id="8c74b-130">MRTK 2.7 поддерживает Unity 2018, 2019 и 2020, что позволяет обеспечить готовность проекта к использованию Unity 2020 даже перед обновлением Unity.</span><span class="sxs-lookup"><span data-stu-id="8c74b-130">MRTK 2.7 supports Unity 2018, 2019 and 2020, allowing you to ensure your project is ready for Unity 2020 even before you upgrade Unity.</span></span> <span data-ttu-id="8c74b-131">Оцените все [зависимости от подключаемых модулей](https://docs.unity3d.com/Manual/Plugins.html), которые существуют в проекте, а также определите возможность сборки этих библиотек DLL для ARM64.</span><span class="sxs-lookup"><span data-stu-id="8c74b-131">Assess any [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) that currently exist in your project, and determine whether these DLLs can be built for ARM64.</span></span> <span data-ttu-id="8c74b-132">Если в проекте есть жесткая зависимость от подключаемого модуля ARM64, возможно придется сохранить для приложения платформу ARM.</span><span class="sxs-lookup"><span data-stu-id="8c74b-132">For projects with a hard ARM64 dependent plugin, you may need to continue building your app for ARM.</span></span>

## <a name="update-sceneproject-settings-in-unity"></a><span data-ttu-id="8c74b-133">Обновление параметров сцены или проектов в Unity</span><span class="sxs-lookup"><span data-stu-id="8c74b-133">Update scene/project settings in Unity</span></span>

<span data-ttu-id="8c74b-134">После обновления до [Unity 2020.3 LTS](https://unity3d.com/unity/qa/lts-releases) рекомендуется изменить определенные параметры в Unity, чтобы получить оптимальные результаты на устройстве.</span><span class="sxs-lookup"><span data-stu-id="8c74b-134">After updating to [Unity 2020.3 LTS](https://unity3d.com/unity/qa/lts-releases), it's recommended that you update particular settings in Unity for optimal results on the device.</span></span> <span data-ttu-id="8c74b-135">Подробное описание этих параметров см. в статье [Рекомендуемые параметры для Unity](../unity/Recommended-settings-for-Unity.md).</span><span class="sxs-lookup"><span data-stu-id="8c74b-135">These settings are outlined in detail under [recommended settings for Unity](../unity/Recommended-settings-for-Unity.md).</span></span>

<span data-ttu-id="8c74b-136">Еще раз подчеркнем, что [серверная часть скриптов .NET](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) помечена как нерекомендуемая в Unity 2018 и **удалена**, начиная с Unity 2019.</span><span class="sxs-lookup"><span data-stu-id="8c74b-136">To reiterate, the [.NET scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) is being deprecated in Unity 2018 and **removed** as of Unity 2019.</span></span> <span data-ttu-id="8c74b-137">Разработчикам настоятельно рекомендуется перевести проект на [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span><span class="sxs-lookup"><span data-stu-id="8c74b-137">Developers should strongly consider switching their project to [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span></span>

> [!NOTE]
> <span data-ttu-id="8c74b-138">При использовании серверной части для работы со скриптами IL2CPP может увеличиться время сборки из Unity в Visual Studio. Разработчикам следует настроить свои компьютеры для разработки, чтобы [оптимизировать время сборки IL2CPP](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span><span class="sxs-lookup"><span data-stu-id="8c74b-138">IL2CPP scripting back-end can cause longer build times from Unity to Visual Studio, and developers should set up their developer machine for [optimizing IL2CPP build times](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span></span>
> <span data-ttu-id="8c74b-139">Кроме того, возможно, будет полезно настроить [сервер кэширования](https://docs.unity3d.com/Manual/CacheServer.html), особенно для проектов Unity с большим объемом ресурсов (за исключением файлов скриптов) либо постоянно меняющимися сценами или ресурсами.</span><span class="sxs-lookup"><span data-stu-id="8c74b-139">It might also be beneficial to set up a [cache server](https://docs.unity3d.com/Manual/CacheServer.html), especially for Unity projects with a large amount of assets (excluding script files) or constantly changing scenes and assets.</span></span> <span data-ttu-id="8c74b-140">Когда открывается проект, Unity сохраняет соответствующие ресурсы в формате для внутреннего кэша на компьютере разработчика.</span><span class="sxs-lookup"><span data-stu-id="8c74b-140">When opening a project, Unity stores qualifying assets into an internal cache format on the developer machine.</span></span> <span data-ttu-id="8c74b-141">Измененные элементы нужно повторно импортировать и еще раз обработать.</span><span class="sxs-lookup"><span data-stu-id="8c74b-141">Items must be re-imported and re-processed when modified.</span></span> <span data-ttu-id="8c74b-142">Этот процесс можно выполнить однократно и сохранить на сервере кэширования, а значит, и совместно использовать с другими разработчиками для экономии времени. При этом каждому разработчику не придется обрабатывать повторно импортированные измененные элементы локально.</span><span class="sxs-lookup"><span data-stu-id="8c74b-142">This process can be done once and saved in a cache server and consequently shared with other developers to save time, as opposed to every developer processing the re-import of new changes locally.</span></span>

<span data-ttu-id="8c74b-143">Разобравшись с критическими изменениями после перехода на обновленную версию Unity, выполните сборку и тестирование текущих приложений для HoloLens (1-го поколения).</span><span class="sxs-lookup"><span data-stu-id="8c74b-143">After addressing any breaking changes from moving to the updated Unity version, build and test your current applications on HoloLens (1st gen).</span></span> <span data-ttu-id="8c74b-144">Кроме того, это подходящий момент для создания и сохранения фиксации в системе управления версиями.</span><span class="sxs-lookup"><span data-stu-id="8c74b-144">This is a good time to create and save a commit into source control.</span></span>

## <a name="compile-dependenciesplugins-for-arm-processor"></a><span data-ttu-id="8c74b-145">Компиляция зависимостей или подключаемых модулей для процессора ARM</span><span class="sxs-lookup"><span data-stu-id="8c74b-145">Compile dependencies/plugins for ARM processor</span></span>

<span data-ttu-id="8c74b-146">Приложения для HoloLens 1-го поколения выполнялись на 32-разрядных (x86) процессорах. HoloLens 2 использует процессор ARM.</span><span class="sxs-lookup"><span data-stu-id="8c74b-146">HoloLens (1st gen) executes applications on an x86 processor while the HoloLens 2 uses an ARM processor.</span></span> <span data-ttu-id="8c74b-147">Существующие приложения HoloLens нужно перенести для поддержки ARM.</span><span class="sxs-lookup"><span data-stu-id="8c74b-147">Existing HoloLens applications need to be ported over to support ARM.</span></span> <span data-ttu-id="8c74b-148">Как отмечалось ранее, Unity 2018 LTS поддерживает компиляцию для приложений ARM32, а Unity 2019.x и более поздние версии — для приложений ARM32 и ARM64.</span><span class="sxs-lookup"><span data-stu-id="8c74b-148">As noted earlier, Unity 2018 LTS supports compiling ARM32 apps while Unity 2019 and later supports compiling ARM32 and ARM64 apps.</span></span> <span data-ttu-id="8c74b-149">Рекомендуется разрабатывать приложения ARM64, так как их производительность существенно выше.</span><span class="sxs-lookup"><span data-stu-id="8c74b-149">Developing for ARM64 applications is preferred, as there's a material difference in performance.</span></span> <span data-ttu-id="8c74b-150">Но в таком случае все [зависимости подключаемого модуля](https://docs.unity3d.com/Manual/Plugins.html) также должны быть созданы для ARM64.</span><span class="sxs-lookup"><span data-stu-id="8c74b-150">However, this requires all [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) to also be built for ARM64.</span></span>

<span data-ttu-id="8c74b-151">Просмотрите все зависимости от библиотеки DLL в приложении.</span><span class="sxs-lookup"><span data-stu-id="8c74b-151">Review all DLL dependencies in your application.</span></span> <span data-ttu-id="8c74b-152">Рекомендуется удалить зависимости, которые больше не нужны для проекта.</span><span class="sxs-lookup"><span data-stu-id="8c74b-152">We recommend removing dependencies that are no longer needed for your project.</span></span> <span data-ttu-id="8c74b-153">Для остальных необходимых подключаемых модулей примите соответствующие двоичные файлы ARM32 и ARM64 в проекте Unity.</span><span class="sxs-lookup"><span data-stu-id="8c74b-153">For remaining plugins that are required, ingest the respective ARM32 or ARM64 binaries into your Unity project.</span></span>

<span data-ttu-id="8c74b-154">Когда будут приняты важные библиотеки DLL, создайте решение Visual Studio на основе Unity и скомпилируйте приложение AppX для ARM в Visual Studio, чтобы подтвердить возможность работы с процессорами ARM.</span><span class="sxs-lookup"><span data-stu-id="8c74b-154">After ingesting the relevant DLLs, build a Visual Studio solution from Unity and compile an AppX for ARM in Visual Studio to test your application can be built for ARM processors.</span></span> <span data-ttu-id="8c74b-155">Мы рекомендуем сохранить это приложение как фиксацию в системе управления версиями.</span><span class="sxs-lookup"><span data-stu-id="8c74b-155">It's advised to save the application as a commit in your source control solution.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="8c74b-156">Приложения, использующие MRTK версии 1, можно запускать на HoloLens 2 после изменения целевой платформы сборки на ARM при условии соблюдения всех других требований.</span><span class="sxs-lookup"><span data-stu-id="8c74b-156">Application's using MRTK v1 can be run on HoloLens 2 after changing the build target to ARM, assuming that all other requirements are met.</span></span> <span data-ttu-id="8c74b-157">К ним относится наличие ARM-версий для всех ваших подключаемых модулей.</span><span class="sxs-lookup"><span data-stu-id="8c74b-157">This includes making sure you have ARM versions of all your plugins.</span></span> <span data-ttu-id="8c74b-158">Но при этом ваше приложение не будет иметь доступа к специальным функциям HoloLens 2, таким как точное отслеживание движений рук и глаз.</span><span class="sxs-lookup"><span data-stu-id="8c74b-158">However, your app won't have access to HoloLens 2 specific functions like articulated hand and eye tracking.</span></span> <span data-ttu-id="8c74b-159">MRTK версии 1 и MRTK версии 2 имеют разные пространства имен, что позволяет использовать обе версии в одном проекте. Это может быть полезно при переходе от одной версии к другой.</span><span class="sxs-lookup"><span data-stu-id="8c74b-159">MRTK v1 and MRTK v2 have different namespaces that allow both versions to be in the same project, which is useful for transitioning from one to the other.</span></span>

## <a name="update-to-mrtk-version-2"></a><span data-ttu-id="8c74b-160">Обновление до MRTK версии 2</span><span class="sxs-lookup"><span data-stu-id="8c74b-160">Update to MRTK version 2</span></span>

<span data-ttu-id="8c74b-161">[МРТК версии 2](https://github.com/microsoft/MixedRealityToolkit-Unity) — это новый набор средств на основе Unity, который поддерживает как HoloLens (1-го поколения), так и HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="8c74b-161">[MRTK Version 2](https://github.com/microsoft/MixedRealityToolkit-Unity) is the new toolkit on top of Unity that supports both HoloLens (1st gen) and HoloLens 2.</span></span> <span data-ttu-id="8c74b-162">Именно в него были добавлены все новые возможности HoloLens 2, такие как взаимодействие с помощью рук и отслеживание глаз.</span><span class="sxs-lookup"><span data-stu-id="8c74b-162">It's also where all the new HoloLens 2 capabilities have been added, such as hand interactions and eye tracking.</span></span>

<span data-ttu-id="8c74b-163">Дополнительные сведения об использовании MRTK версии 2 см. в следующих ресурсах:</span><span class="sxs-lookup"><span data-stu-id="8c74b-163">Check out the following resources for more information on using MRTK version 2:</span></span>

- [<span data-ttu-id="8c74b-164">MRTK: домашняя страница документации</span><span class="sxs-lookup"><span data-stu-id="8c74b-164">MRTK - Documentation home</span></span>](/windows/mixed-reality/mrtk-unity)
- [<span data-ttu-id="8c74b-165">Руководство по установке</span><span class="sxs-lookup"><span data-stu-id="8c74b-165">Installation guide</span></span>](/windows/mixed-reality/mrtk-unity/install-the-tools)
- [<span data-ttu-id="8c74b-166">MRTK: отслеживание рук</span><span class="sxs-lookup"><span data-stu-id="8c74b-166">MRTK - Hand tracking</span></span>](/windows/mixed-reality/mrtk-unity/features/input/hand-tracking)
- [<span data-ttu-id="8c74b-167">MRTK: отслеживание движения глаз</span><span class="sxs-lookup"><span data-stu-id="8c74b-167">MRTK - Eye tracking</span></span>](/windows/mixed-reality/mrtk-unity/features/input/eye-tracking/eye-tracking-main)

### <a name="prepare-for-the-migration"></a><span data-ttu-id="8c74b-168">Подготовка к миграции</span><span class="sxs-lookup"><span data-stu-id="8c74b-168">Prepare for the migration</span></span>

<span data-ttu-id="8c74b-169">Перед приемом новых [файлов \*.unitypackage для MRTK версии 2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases) мы рекомендуем составить список **1) пользовательского кода, который интегрируется с MRTK версии 1** и **2) пользовательского кода для взаимодействия с входными данными или для компонентов интерфейса**.</span><span class="sxs-lookup"><span data-stu-id="8c74b-169">Before ingesting the new [\*.unitypackage files for MRTK v2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), it's recommended to take an inventory of **1) any custom-built code that integrates with MRTK v1** and **2) any custom-built code for input interactions or UX components**.</span></span> <span data-ttu-id="8c74b-170">Наиболее распространенные конфликты при освоении возможностей MRTK версии 2 для разработчиков в сфере смешанной реальности касаются методов ввода и взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="8c74b-170">The most common and prevalent conflict for a mixed reality developer ingesting MRTK v2 involves input and interactions.</span></span> <span data-ttu-id="8c74b-171">Рекомендуем начать изучение [модели ввода MRTK версии 2](/windows/mixed-reality/mrtk-unity/features/input/overview).</span><span class="sxs-lookup"><span data-stu-id="8c74b-171">It's advised to begin reading and understanding the [MRTK v2 input model](/windows/mixed-reality/mrtk-unity/features/input/overview).</span></span>

<span data-ttu-id="8c74b-172">Наконец, в новом решении [MRTK версии 2](https://github.com/microsoft/MixedRealityToolkit-Unity) реализован переход с модели скриптов и объектов управления в сцене на архитектуру конфигурации и поставщика служб.</span><span class="sxs-lookup"><span data-stu-id="8c74b-172">Finally, the new [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) has transitioned from a model of scripts and in-scene manager objects to a configuration and services provider architecture.</span></span> <span data-ttu-id="8c74b-173">В результате формируется более четкая иерархия и архитектурная модель. Но для этого нужно изучить новые профили конфигурации.</span><span class="sxs-lookup"><span data-stu-id="8c74b-173">This results in a cleaner scene hierarchy and architecture model, but requires a learning curve for understanding the new configuration profiles.</span></span> <span data-ttu-id="8c74b-174">Изучите [руководство по настройке набора средств для смешанной реальности](/windows/mixed-reality/mrtk-unity/configuration/mixed-reality-configuration-guide), чтобы приступить к ознакомлению с важными параметрами и профилями, которые нужно адаптировать к требованиям вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="8c74b-174">Read the [Mixed Reality Toolkit Configuration Guide](/windows/mixed-reality/mrtk-unity/configuration/mixed-reality-configuration-guide) to start becoming familiar with the important settings and profiles to adjust to the needs of your application.</span></span>

### <a name="migrating-the-project"></a><span data-ttu-id="8c74b-175">Перенос проекта</span><span class="sxs-lookup"><span data-stu-id="8c74b-175">Migrating the project</span></span>

<span data-ttu-id="8c74b-176">Есть высокая степень вероятности, что после импорта [MRTK версии 2](https://github.com/microsoft/MixedRealityToolkit-Unity) в вашем проекте Unity возникнет множество ошибок компиляции.</span><span class="sxs-lookup"><span data-stu-id="8c74b-176">After importing [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), your Unity project most likely has many compiler-related errors.</span></span> <span data-ttu-id="8c74b-177">Часто это связано с новой структурой пространства имен и новыми именами компонентов.</span><span class="sxs-lookup"><span data-stu-id="8c74b-177">These are commonly because of the new namespace structure and new component names.</span></span> <span data-ttu-id="8c74b-178">Перейдите к устранению этих ошибок, изменяя пространства имен и компоненты во всех скриптах.</span><span class="sxs-lookup"><span data-stu-id="8c74b-178">continue to resolve these errors by modifying your scripts to the new namespaces and components.</span></span>

<span data-ttu-id="8c74b-179">Дополнительные сведения об определенных различиях между API для HTK/MRTK и MRTK версии 2 приведены в руководстве по переносу на [вики-сайте MRTK версии 2](/windows/mixed-reality/mrtk-unity/updates-deployment/htk-to-mrtk-porting-guide).</span><span class="sxs-lookup"><span data-stu-id="8c74b-179">For information on the specific API differences between HTK/MRTK and MRTK v2, see the porting guide on the [MRTK Version 2 wiki](/windows/mixed-reality/mrtk-unity/updates-deployment/htk-to-mrtk-porting-guide).</span></span>

### <a name="best-practices"></a><span data-ttu-id="8c74b-180">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="8c74b-180">Best practices</span></span>

- <span data-ttu-id="8c74b-181">Преимущество отдается [стандартному построителю текстуры MRTK](/windows/mixed-reality/mrtk-unity/features/rendering/mrtk-standard-shader).</span><span class="sxs-lookup"><span data-stu-id="8c74b-181">Prefer use of the [MRTK standard shader](/windows/mixed-reality/mrtk-unity/features/rendering/mrtk-standard-shader).</span></span>
- <span data-ttu-id="8c74b-182">Работайте с типами критических изменений поочередно (например, переход с IFocusable на [IMixedRealityFocusHandler](/dotnet/api/microsoft.mixedreality.toolkit.input.imixedrealityfocushandler)).</span><span class="sxs-lookup"><span data-stu-id="8c74b-182">Work on one breaking change type at a time (ex: IFocusable to [IMixedRealityFocusHandler](/dotnet/api/microsoft.mixedreality.toolkit.input.imixedrealityfocushandler)).</span></span>
- <span data-ttu-id="8c74b-183">Выполняйте проверку после каждого изменения и используйте систему управления версиями.</span><span class="sxs-lookup"><span data-stu-id="8c74b-183">Test after every change and use source control.</span></span>
- <span data-ttu-id="8c74b-184">По возможности используйте стандартные элементы MRTK для взаимодействия с пользователем (кнопки, баннеры и т. д.).</span><span class="sxs-lookup"><span data-stu-id="8c74b-184">Use default MRTK UX (buttons, slates, and so on), when possible.</span></span>
- <span data-ttu-id="8c74b-185">Не изменяйте файлы MRTK напрямую. Создайте оболочки для компонентов MRTK.</span><span class="sxs-lookup"><span data-stu-id="8c74b-185">Refrain from modifying MRTK files directly; create wrappers around MRTK components.</span></span>
  - <span data-ttu-id="8c74b-186">Это упрощает дальнейший прием данных и обновление MRTK.</span><span class="sxs-lookup"><span data-stu-id="8c74b-186">This action eases future MRTK ingestion and updates.</span></span>
- <span data-ttu-id="8c74b-187">Просмотрите и изучите примеры сцен в MRTK, особенно *HandInteractionExamples.scene*.</span><span class="sxs-lookup"><span data-stu-id="8c74b-187">Review and explore sample scenes provided in the MRTK, especially *HandInteractionExamples.scene*.</span></span>
- <span data-ttu-id="8c74b-188">Модифицируйте структуру пользовательского интерфейса на основе холста, используя четырехугольники, коллайдеры и текст TextMeshPro.</span><span class="sxs-lookup"><span data-stu-id="8c74b-188">Rebuild canvas-based UI with quads, colliders, and TextMeshPro text.</span></span>
- <span data-ttu-id="8c74b-189">Включите [общий доступ к буферу глубины](../unity/camera-in-unity.md#sharing-depth-buffers) или [задайте точку фокусировки](../unity/focus-point-in-unity.md). Предпочтительно использовать 16-разрядный буфер глубины, чтобы повысить производительность.</span><span class="sxs-lookup"><span data-stu-id="8c74b-189">Enable [Depth Buffer Sharing](../unity/camera-in-unity.md#sharing-depth-buffers) or [set focus point](../unity/focus-point-in-unity.md); prefer to use a 16-bit depth buffer for better performance.</span></span> <span data-ttu-id="8c74b-190">Убедитесь, что при отрисовке цвета отображается глубина.</span><span class="sxs-lookup"><span data-stu-id="8c74b-190">Ensure when rendering color, to also render depth.</span></span> <span data-ttu-id="8c74b-191">Как правило, Unity не изменяет данные глубины для прозрачных и текстовых игровых объектов.</span><span class="sxs-lookup"><span data-stu-id="8c74b-191">Unity generally doesn't write depth for transparent and text gameobjects.</span></span>
- <span data-ttu-id="8c74b-192">Задайте путь однопроходной отрисовки экземпляра.</span><span class="sxs-lookup"><span data-stu-id="8c74b-192">Set Single Pass Instanced Rendering Path.</span></span>
- <span data-ttu-id="8c74b-193">Примените [профиль конфигурации HoloLens 2 для MRTK](/windows/mixed-reality/mrtk-unity/features/profiles/profiles#hololens-2-profile).</span><span class="sxs-lookup"><span data-stu-id="8c74b-193">Use the [HoloLens 2 configuration profile for MRTK](/windows/mixed-reality/mrtk-unity/features/profiles/profiles#hololens-2-profile)</span></span>

### <a name="testing-your-application"></a><span data-ttu-id="8c74b-194">Тестирование приложения</span><span class="sxs-lookup"><span data-stu-id="8c74b-194">Testing your application</span></span>

<span data-ttu-id="8c74b-195">В MRTK версии 2 вы можете имитировать взаимодействие с помощью рук непосредственно в Unity, а также выполнять разработку с новыми интерфейсами API для реализации взаимодействия с помощью рук и отслеживания глаз.</span><span class="sxs-lookup"><span data-stu-id="8c74b-195">In MRTK Version 2, you can simulate hand interactions directly in Unity and develop with the new APIs for hand interactions and eye tracking.</span></span> <span data-ttu-id="8c74b-196">Для создания оптимального пользовательского интерфейса требуется устройство HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="8c74b-196">The HoloLens 2 device is required to create a satisfying user experience.</span></span> <span data-ttu-id="8c74b-197">Мы рекомендуем ознакомиться с документацией и инструментами, чтобы составить более четкое представление о решении.</span><span class="sxs-lookup"><span data-stu-id="8c74b-197">You're encouraged to start studying the documentation and tools for greater understanding.</span></span> <span data-ttu-id="8c74b-198">[MRTK версии 2](https://github.com/microsoft/MixedRealityToolkit-Unity) поддерживает разработку для устройств HoloLens (1-го поколения). Традиционные модели ввода (например, выбор элемента касанием) можно тестировать на HoloLens (1-го поколения).</span><span class="sxs-lookup"><span data-stu-id="8c74b-198">[MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity) supports development on HoloLens (1st gen) and traditional input models, such as select via air-tap can be tested on HoloLens (1st gen).</span></span> 

## <a name="updating-your-interaction-model-for-hololens-2"></a><span data-ttu-id="8c74b-199">Обновление модели взаимодействия для HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="8c74b-199">Updating your interaction model for HoloLens 2</span></span>

> [!CAUTION]
> <span data-ttu-id="8c74b-200">Если в проекте используются какие-либо API-интерфейсы XR.WSA, в будущих выпусках Unity они будут выведены из эксплуатации и заменены новыми API-интерфейсами ввода XR Unity.</span><span class="sxs-lookup"><span data-stu-id="8c74b-200">If your project is using any of the XR.WSA APIs, these are being phased out in favor of Unity's new XR input APIs in future Unity releases.</span></span> <span data-ttu-id="8c74b-201">Дополнительные сведения об [API-интерфейсах ввода XR см. здесь](https://docs.unity3d.com/Manual/xr_input.html).</span><span class="sxs-lookup"><span data-stu-id="8c74b-201">You can find more information about the [XR input APIs here](https://docs.unity3d.com/Manual/xr_input.html).</span></span>

<span data-ttu-id="8c74b-202">После переноса приложения и его подготовки к работе с HoloLens 2 можно приступить к обновлению модели взаимодействия и расположения макетов голограмм.</span><span class="sxs-lookup"><span data-stu-id="8c74b-202">Once your application is ported and prepped for HoloLens 2, you're ready to consider updating your interaction model and hologram design placements.</span></span>
<span data-ttu-id="8c74b-203">В приложении, разработанном для HoloLens (1-го поколения), по всей вероятности, реализована модель взаимодействия с помощью направления взгляда с подтверждением. Она используется при взаимодействии с голограммами, расположенными на удалении, чтобы они могли поместиться в поле зрения.</span><span class="sxs-lookup"><span data-stu-id="8c74b-203">In HoloLens (1st gen), your application likely has a gaze and commit interaction model with holograms relatively far away to fit into the field of view.</span></span>

<span data-ttu-id="8c74b-204">Шаги по обновлению структуры приложения для максимальной адаптации к HoloLens 2:</span><span class="sxs-lookup"><span data-stu-id="8c74b-204">Steps to update your application design to be best suited for HoloLens 2:</span></span>
1.  <span data-ttu-id="8c74b-205">Компоненты MRTK. Если вы добавили [MRTK версии 2](https://github.com/microsoft/MixedRealityToolkit-Unity), можно использовать различные компоненты и скрипты, которые разработаны и оптимизированы для HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="8c74b-205">MRTK components: Per the pre-work, if you added [MRTK v2](https://github.com/microsoft/MixedRealityToolkit-Unity), there are various components/scripts to leverage that have been designed and optimized for HoloLens 2.</span></span>

2.  <span data-ttu-id="8c74b-206">Модель взаимодействия. Рекомендуется обновить модель взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="8c74b-206">Interaction model: Consider updating your interaction model.</span></span> <span data-ttu-id="8c74b-207">В большинстве случаев мы рекомендуем перейти с модели взаимодействия с помощью взгляда с подтверждением на модель взаимодействия с помощью рук.</span><span class="sxs-lookup"><span data-stu-id="8c74b-207">For most scenarios, we recommend switching from gaze and commit to hands.</span></span> <span data-ttu-id="8c74b-208">Например, для голограмм, которые обычно оказываются за пределами досягаемости, используются лучи, указывающие на предмет при удаленном взаимодействии, и жесты захвата.</span><span class="sxs-lookup"><span data-stu-id="8c74b-208">With your holograms typically being out of arms-reach, switching to hands results in far interaction pointing rays and grab gestures.</span></span>

3.  <span data-ttu-id="8c74b-209">Расположение голограммы. Когда вы перейдете на модель взаимодействия с помощью рук, переместите некоторые голограммы ближе, используя жесты захвата, чтобы непосредственно взаимодействовать с ними руками.</span><span class="sxs-lookup"><span data-stu-id="8c74b-209">Hologram placement: After switching to a hands interaction model, consider moving some holograms closer to directly interact with them, by using near-interaction grab gestures with your hands.</span></span> <span data-ttu-id="8c74b-210">Мы рекомендуем переместить ближе такие типы голограмм: небольшие целевые меню, элементы управления, кнопки и небольшие голограммы, которые помещаются в поле зрения HoloLens 2 при захвате и рассмотрении голограммы.</span><span class="sxs-lookup"><span data-stu-id="8c74b-210">The types of holograms recommended to move closer to directly grab or interact are small target menus, controls, buttons, and smaller holograms that fit within the HoloLens 2 field of view when grabbing and inspecting the hologram.</span></span>
<br>
<span data-ttu-id="8c74b-211">Все приложения и сценарии разные. Мы будем продолжать совершенствовать и публиковать рекомендации по разработке на основе отзывов и полученных знаний.</span><span class="sxs-lookup"><span data-stu-id="8c74b-211">Every application and scenario are different, and we’ll continue to refine and post design guidance based on feedback and continued learnings.</span></span>


## <a name="additional-caveats-and-learnings-about-moving-applications-from-x86-to-arm"></a><span data-ttu-id="8c74b-212">Дополнительные предостережения и сведения о переводе приложений с 32-разрядных процессоров на ARM</span><span class="sxs-lookup"><span data-stu-id="8c74b-212">Additional caveats and learnings about moving applications from x86 to ARM</span></span>

- <span data-ttu-id="8c74b-213">Базовые приложения Unity просты. Вы можете создать пакет приложений ARM или выполнить развертывание непосредственно на устройстве для запуска пакета.</span><span class="sxs-lookup"><span data-stu-id="8c74b-213">Straight-forward Unity applications are simple because you can build an ARM application bundle or deploy directly to the device for the bundle to run.</span></span> <span data-ttu-id="8c74b-214">Некоторые собственные подключаемые модули Unity могут вызывать определенные проблемы при разработке.</span><span class="sxs-lookup"><span data-stu-id="8c74b-214">Some Unity native plugins can present certain development challenges.</span></span> <span data-ttu-id="8c74b-215">Поэтому необходимо обновить все собственные подключаемые модули Unity до версии Visual Studio 2019, а затем повторно выполнить сборку для ARM.</span><span class="sxs-lookup"><span data-stu-id="8c74b-215">Because of this, you must upgrade all Unity native plugins to Visual Studio 2019 and then rebuild for ARM.</span></span>

- <span data-ttu-id="8c74b-216">Предположим, что в приложении используется подключаемый модуль AudioKinetic Wwise и в этой версии Unity нет подключаемого модуля UWP для ARM. В такой ситуации придется потратить много усилий на доработку звуковых возможностей в приложении для запуска на ARM.</span><span class="sxs-lookup"><span data-stu-id="8c74b-216">One application used the Unity AudioKinetic Wwise plugin and that version of Unity didn't have a UWP ARM plugin, which caused a considerable effort to rework sound capabilities into the application in question to run on ARM.</span></span> <span data-ttu-id="8c74b-217">Убедитесь, что все необходимые подключаемые модули для планов разработки установлены и доступны в Unity.</span><span class="sxs-lookup"><span data-stu-id="8c74b-217">Ensure that all required plugins for your development plans are installed and available in Unity.</span></span>

- <span data-ttu-id="8c74b-218">Иногда для подключаемых модулей, требующихся приложению, может не быть подключаемых модулей UWP или ARM. Это препятствует переносу приложения и его запуску на HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="8c74b-218">In some cases, a UWP/ARM plugin might not exist for application-required plugins, which blocks the ability to port the application and run it on HoloLens 2.</span></span> <span data-ttu-id="8c74b-219">Обратитесь к поставщику подключаемого модуля, чтобы устранить проблему и обеспечить поддержку ARM.</span><span class="sxs-lookup"><span data-stu-id="8c74b-219">Contact your plugin provider to resolve the issue and provide support for ARM.</span></span>

- <span data-ttu-id="8c74b-220">Элементы minfloat (и их разновидности, такие как min16float, minint и т. д.) в шейдерах могут по-разному действовать на HoloLens 2 и HoloLens (1-го поколения).</span><span class="sxs-lookup"><span data-stu-id="8c74b-220">The minfloat (and variants such as min16float, minint, and so on) in shaders might behave differently on HoloLens 2 than on HoloLens (1st gen).</span></span> <span data-ttu-id="8c74b-221">Но при этом гарантируется, что по крайней мере будет использоваться указанное количество битов.</span><span class="sxs-lookup"><span data-stu-id="8c74b-221">Specifically, these guarantee that at least the specified number of bits will be used.</span></span> <span data-ttu-id="8c74b-222">Графические процессоры Intel и Nvidia преимущественно обрабатывают minifloat как 32-битные.</span><span class="sxs-lookup"><span data-stu-id="8c74b-222">On Intel/Nvidia GPUs, minfloats are largely treated as 32 bits.</span></span> <span data-ttu-id="8c74b-223">В ARM будет использоваться фактическое количество битов.</span><span class="sxs-lookup"><span data-stu-id="8c74b-223">On ARM, the number of bits specified is actually adhered to.</span></span> <span data-ttu-id="8c74b-224">Это означает, что на практике эти показатели будут менее точными или диапазон на HoloLens 2 будет меньше, чем на HoloLens (1-го поколения).</span><span class="sxs-lookup"><span data-stu-id="8c74b-224">That means in practice, these numbers might have less precision or range on HoloLens 2 than they did on HoloLens (1st gen).</span></span>

- <span data-ttu-id="8c74b-225">Инструкции _asm не будут работать в ARM. Поэтому потребуется переписать все строки кода, где используются инструкции _asm.</span><span class="sxs-lookup"><span data-stu-id="8c74b-225">The _asm instructions don’t appear to work on ARM, meaning any code using _asm instructions must be rewritten.</span></span>

- <span data-ttu-id="8c74b-226">ARM не поддерживает набор инструкций SIMD, потому что в ARM отсутствуют некоторые заголовки, такие как xmmintrin.h, emmintrin.h, tmmintrin.h и immintrin.h.</span><span class="sxs-lookup"><span data-stu-id="8c74b-226">ARM doesn't support the SIMD instruction set because various headers, such as xmmintrin.h, emmintrin.h, tmmintrin.h, and immintrin.h, aren't available on ARM.</span></span>

- <span data-ttu-id="8c74b-227">Компилятор построителя текстуры запускается в ARM во время первого вызова метода рисования после загрузки построителя текстуры или при изменении объекта, от которого зависит построитель, не во время его загрузки.</span><span class="sxs-lookup"><span data-stu-id="8c74b-227">The shader compiler on ARM runs during the first draw call after the shader has been loaded or something the shader relies on has changed, not at shader load time.</span></span> <span data-ttu-id="8c74b-228">Влияние на частоту кадров может быть заметным в зависимости от того, сколько шейдеров необходимо скомпилировать, и это диктует изменение правил обработки, упаковки и обновления шейдеров для HoloLens 2 по сравнению с HoloLens (1-го поколения).</span><span class="sxs-lookup"><span data-stu-id="8c74b-228">The impact on framerate can be noticeable, depending on how many shaders need to be compiled, with implications for how shaders should be handled, packaged, updated differently on HoloLens 2 vs HoloLens (1st gen).</span></span>

## <a name="see-also"></a><span data-ttu-id="8c74b-229">См. также статью</span><span class="sxs-lookup"><span data-stu-id="8c74b-229">See also</span></span>

* [<span data-ttu-id="8c74b-230">Установка средств</span><span class="sxs-lookup"><span data-stu-id="8c74b-230">Install the tools</span></span>](../install-the-tools.md)
* [<span data-ttu-id="8c74b-231">MRTK: руководство по установке</span><span class="sxs-lookup"><span data-stu-id="8c74b-231">MRTK - Installation guide</span></span>](/windows/mixed-reality/mrtk-unity/install-the-tools)
* [<span data-ttu-id="8c74b-232">MRTK: домашняя страница документации</span><span class="sxs-lookup"><span data-stu-id="8c74b-232">MRTK - Documentation home</span></span>](/windows/mixed-reality/mrtk-unity)
* [<span data-ttu-id="8c74b-233">Перенос из HoloToolkit/MRTK в MRTK версии 2</span><span class="sxs-lookup"><span data-stu-id="8c74b-233">Porting from HoloToolkit/MRTK to MRTK version 2</span></span>](/windows/mixed-reality/mrtk-unity/updates-deployment/htk-to-mrtk-porting-guide)
* [<span data-ttu-id="8c74b-234">Рекомендуемые параметры для Unity</span><span class="sxs-lookup"><span data-stu-id="8c74b-234">Recommended settings for Unity</span></span>](../unity/recommended-settings-for-unity.md)
* <span data-ttu-id="8c74b-235">[Understanding performance for Mixed Reality](../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md) (Основные сведения о производительности для Смешанной реальности)</span><span class="sxs-lookup"><span data-stu-id="8c74b-235">[Understanding performance for Mixed Reality](../platform-capabilities-and-apis/understanding-performance-for-mixed-reality.md)</span></span>