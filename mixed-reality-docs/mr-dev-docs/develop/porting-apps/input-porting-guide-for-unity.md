---
title: Руководство по переносу логики ввода для Unity
description: Узнайте, как обрабатывать входные данные для Windows Mixed Reality в Unity.
author: thetuvix
ms.author: alexturn
ms.date: 12/9/2020
ms.topic: article
keywords: вход, Unity, перенос
ms.openlocfilehash: 97280ff260729bfc2042f7760fa3950e949e27a4
ms.sourcegitcommit: 2bf79eef6a9b845494484f458443ef4f89d7efc0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/17/2020
ms.locfileid: "97613268"
---
# <a name="input-porting-guide-for-unity"></a><span data-ttu-id="334a4-104">Руководство по переносу логики ввода для Unity</span><span class="sxs-lookup"><span data-stu-id="334a4-104">Input porting guide for Unity</span></span>

<span data-ttu-id="334a4-105">Вы можете перенести логику ввода в Windows Mixed Reality с помощью одного из двух подходов.</span><span class="sxs-lookup"><span data-stu-id="334a4-105">You can port your input logic to Windows Mixed Reality using one of two approaches.</span></span> <span data-ttu-id="334a4-106">Во-первых, следует использовать общие интерфейсы API ввода, кнопки и оси Unity, охватывающие несколько платформ.</span><span class="sxs-lookup"><span data-stu-id="334a4-106">The first is to use Unity's general Input.GetButton/GetAxis APIs that span across multiple platforms.</span></span> <span data-ttu-id="334a4-107">Второй — это XR, относящийся к Windows. Головк. Входные API, которые предлагают более широкие возможности для контроллеров перемещения и HoloLens.</span><span class="sxs-lookup"><span data-stu-id="334a4-107">The second is the Windows-specific XR.WSA.Input APIs, which offer richer data specifically for motion controllers and HoloLens hands.</span></span>

## <a name="general-inputgetbuttongetaxis-apis"></a><span data-ttu-id="334a4-108">Общие входные API-интерфейсы input. OnButton и AXIS</span><span class="sxs-lookup"><span data-stu-id="334a4-108">General Input.GetButton/GetAxis APIs</span></span>

<span data-ttu-id="334a4-109">В настоящее время Unity использует общие интерфейсы API input. Окулус и input. Axis для предоставления входных данных для [пакета SDK](https://docs.unity3d.com/Manual/OculusControllers.html) и [пакета SDK для опенвр](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span><span class="sxs-lookup"><span data-stu-id="334a4-109">Unity currently uses its general Input.GetButton/Input.GetAxis APIs to expose input for [the Oculus SDK](https://docs.unity3d.com/Manual/OculusControllers.html) and [the OpenVR SDK](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span></span> <span data-ttu-id="334a4-110">Если ваши приложения уже используют эти API для входных данных, API-интерфейсы input. "Кнопка" и "вход. ось" являются простейшими путями для поддержки контроллеров движения в Windows Mixed Reality.</span><span class="sxs-lookup"><span data-stu-id="334a4-110">If your apps are already using these APIs for input, the Input.GetButton/Input.GetAxis APIs are the easiest paths for supporting motion controllers in Windows Mixed Reality.</span></span> <span data-ttu-id="334a4-111">Вам потребуется только сопоставить кнопки и оси в диспетчере ввода.</span><span class="sxs-lookup"><span data-stu-id="334a4-111">You'll only need to remap buttons and axes in the Input Manager.</span></span>

<span data-ttu-id="334a4-112">Дополнительные сведения см. в разделе [Таблица соответствия кнопок и осей Unity](../unity/gestures-and-motion-controllers-in-unity.md#unity-buttonaxis-mapping-table) , а также [Общие сведения об общих API Unity](../unity/gestures-and-motion-controllers-in-unity.md#common-unity-apis-inputgetbuttongetaxis).</span><span class="sxs-lookup"><span data-stu-id="334a4-112">For more information, see the [Unity button/axis mapping table](../unity/gestures-and-motion-controllers-in-unity.md#unity-buttonaxis-mapping-table) and the [overview of the common Unity APIs](../unity/gestures-and-motion-controllers-in-unity.md#common-unity-apis-inputgetbuttongetaxis).</span></span>

## <a name="windows-specific-xrwsainput-apis"></a><span data-ttu-id="334a4-113">XR, относящийся к Windows. Головк. Входные интерфейсы API</span><span class="sxs-lookup"><span data-stu-id="334a4-113">Windows-specific XR.WSA.Input APIs</span></span>

<span data-ttu-id="334a4-114">Если приложение уже создает пользовательскую логику ввода для каждой платформы, можно использовать пространственные входные API для Windows в пространстве имен **UnityEngine. XR. WSA. Input** .</span><span class="sxs-lookup"><span data-stu-id="334a4-114">If your app already builds custom input logic for each platform, you can use the Windows-specific spatial input APIs in the **UnityEngine.XR.WSA.Input** namespace.</span></span> <span data-ttu-id="334a4-115">Отсюда вы сможете получить доступ к дополнительным сведениям, таким как точность расположения или тип источника, что позволяет сообщать между ними и контроллерами в HoloLens.</span><span class="sxs-lookup"><span data-stu-id="334a4-115">From there, you access additional information, such as position accuracy or the source kind, letting you tell hands and controllers apart on HoloLens.</span></span>

<span data-ttu-id="334a4-116">Дополнительные сведения см. в [обзоре интерфейсов API UnityEngine. XR. WSA. Input](../unity/gestures-and-motion-controllers-in-unity.md#windows-specific-apis-xrwsainput).</span><span class="sxs-lookup"><span data-stu-id="334a4-116">For more information, see the [overview of the UnityEngine.XR.WSA.Input APIs](../unity/gestures-and-motion-controllers-in-unity.md#windows-specific-apis-xrwsainput).</span></span>

## <a name="grip-pose-vs-pointing-pose"></a><span data-ttu-id="334a4-117">Захват захвата и указание объекта a</span><span class="sxs-lookup"><span data-stu-id="334a4-117">Grip pose vs. pointing pose</span></span>

<span data-ttu-id="334a4-118">Windows Mixed Reality поддерживает контроллеры движения различными конструктивными факторами.</span><span class="sxs-lookup"><span data-stu-id="334a4-118">Windows Mixed Reality supports motion controllers in different form factors.</span></span> <span data-ttu-id="334a4-119">Структура каждого контроллера различает свое отношение между положением пользователя и естественным направлением "вперед", которое приложения должны использовать для указания при подготовке к просмотру контроллера.</span><span class="sxs-lookup"><span data-stu-id="334a4-119">Each controller's design differs in its relationship between the user's hand position and the natural "forward" direction that apps should use for pointing when rendering the controller.</span></span>

<span data-ttu-id="334a4-120">Для лучшего представления этих контроллеров существует два вида элементов, которые можно исследовать для каждого источника взаимодействия:</span><span class="sxs-lookup"><span data-stu-id="334a4-120">To better represent these controllers, there are two kinds of poses you can investigate for each interaction source:</span></span>

* <span data-ttu-id="334a4-121">**Захват**, представляющий местоположение ручного устройства, обнаруженного HoloLens, или карманный ПК, удерживающий контроллер движения.</span><span class="sxs-lookup"><span data-stu-id="334a4-121">The **grip pose**, which represents the location of either the palm of a hand detected by a HoloLens, or the palm holding a motion controller.</span></span>
    * <span data-ttu-id="334a4-122">В современных головных гарнитурах эта цель лучше подходит для визуализации **руки пользователя** или **объекта, хранящегося в руки пользователя**, например технологий или «обойма».</span><span class="sxs-lookup"><span data-stu-id="334a4-122">On immersive headsets, this pose is best used to render **the user's hand** or **an object held in the user's hand**, such as a sword or gun.</span></span>
    * <span data-ttu-id="334a4-123">**Позиция захвата**: Карманный центроид при удержании контроллера естественным образом настраивается влево или вправо для центрирования места внутри захвата.</span><span class="sxs-lookup"><span data-stu-id="334a4-123">The **grip position**: The palm centroid when holding the controller naturally, adjusted left or right to center the position within the grip.</span></span>
    * <span data-ttu-id="334a4-124">**Правая ось ориентации захвата**: когда вы полностью открываете руку для формирования плоской задачи с 5-пальцем, луч, обычный для вашего кармана (вперед от левого кармана, назад от правого Palm)</span><span class="sxs-lookup"><span data-stu-id="334a4-124">The **grip orientation's Right axis**: When you completely open your hand to form a flat 5-finger pose, the ray that is normal to your palm (forward from left palm, backward from right palm)</span></span>
    * <span data-ttu-id="334a4-125">**Прямая ось ориентации захвата**: когда вы закрываете руку частично, как при удержании контроллера, луч, который указывает на "Forward" через лампу, сформированную неуправляющими пальцами.</span><span class="sxs-lookup"><span data-stu-id="334a4-125">The **grip orientation's Forward axis**: When you close your hand partially, as if holding the controller, the ray that points "forward" through the tube formed by your non-thumb fingers.</span></span>
    * <span data-ttu-id="334a4-126">**Ось Up (вверх) для ориентации захвата**: ось Up, подразумеваемая правым и прямым определением.</span><span class="sxs-lookup"><span data-stu-id="334a4-126">The **grip orientation's Up axis**: The Up axis implied by the Right and Forward definitions.</span></span>
    * <span data-ttu-id="334a4-127">Доступ к захвату можно получить через API-интерфейс ввода кросс-поставщика Unity (**[XR). Инпуттраккинг](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html). Жетлокалпоситион/вращение**) или через API Windows (**Саурцестате. Саурцепосе. Трижетпоситион/вращение**, запрашивающий захват).</span><span class="sxs-lookup"><span data-stu-id="334a4-127">You can access the grip pose through either Unity's cross-vendor input API (**[XR.InputTracking](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html).GetLocalPosition/Rotation**) or through the Windows-specific API (**sourceState.sourcePose.TryGetPosition/Rotation**, requesting the Grip pose).</span></span>
* <span data-ttu-id="334a4-128">**Указатель**, представляющий кончик контроллера, указывающий на пересылку.</span><span class="sxs-lookup"><span data-stu-id="334a4-128">The **pointer pose**, representing the tip of the controller pointing forward.</span></span>
    * <span data-ttu-id="334a4-129">Эта цель лучше использовать для райкаст при **наведении указателя на пользовательский интерфейс** при отрисовке самой модели контроллера.</span><span class="sxs-lookup"><span data-stu-id="334a4-129">This pose is best used to raycast when **pointing at UI** when you're rendering the controller model itself.</span></span>
    * <span data-ttu-id="334a4-130">В настоящее время указатель a доступен только через API-интерфейс Windows (**саурцестате. саурцепосе. трижетпоситион/вращение**, запрашивая указатель a).</span><span class="sxs-lookup"><span data-stu-id="334a4-130">Currently, the pointer pose is available only through the Windows-specific API (**sourceState.sourcePose.TryGetPosition/Rotation**, requesting the Pointer pose).</span></span>

<span data-ttu-id="334a4-131">Эти координаты представляются в универсальных координатах Unity.</span><span class="sxs-lookup"><span data-stu-id="334a4-131">These pose coordinates are all expressed in Unity world coordinates.</span></span>

## <a name="see-also"></a><span data-ttu-id="334a4-132">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="334a4-132">See also</span></span>
* <span data-ttu-id="334a4-133">[Контроллеры движения]().. /.. /Десигн/мотион-контроллерс.МД)</span><span class="sxs-lookup"><span data-stu-id="334a4-133">[Motion controllers]()../../design/motion-controllers.md)</span></span>
* [<span data-ttu-id="334a4-134">Жесты и контроллеры движения в Unity</span><span class="sxs-lookup"><span data-stu-id="334a4-134">Gestures and motion controllers in Unity</span></span>](../unity/gestures-and-motion-controllers-in-unity.md)
* [<span data-ttu-id="334a4-135">UnityEngine. XR. WSA. input</span><span class="sxs-lookup"><span data-stu-id="334a4-135">UnityEngine.XR.WSA.Input</span></span>](https://docs.unity3d.com/ScriptReference/XR.WSA.Input.InteractionManager.html)
* [<span data-ttu-id="334a4-136">UnityEngine. XR. Инпуттраккинг</span><span class="sxs-lookup"><span data-stu-id="334a4-136">UnityEngine.XR.InputTracking</span></span>](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html)
* [<span data-ttu-id="334a4-137">Руководства по переносу приложений</span><span class="sxs-lookup"><span data-stu-id="334a4-137">Porting guides</span></span>](porting-guides.md)
