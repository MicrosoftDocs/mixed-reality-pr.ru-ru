---
title: Руководство по переносу логики ввода для Unity
description: Узнайте, как обрабатывать входные данные для Windows Mixed Reality в Unity.
author: thetuvix
ms.author: alexturn
ms.date: 12/9/2020
ms.topic: article
keywords: вход, Unity, перенос
ms.openlocfilehash: 053918ec62f83c74655b0d4bb09a2b45b62bfc53
ms.sourcegitcommit: f2782d0925b2075fdaa0a4ecdef3dd4f0b4e1e99
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/09/2020
ms.locfileid: "96925880"
---
# <a name="input-porting-guide-for-unity"></a>Руководство по переносу логики ввода для Unity

Вы можете перенести логику входных данных в Windows Mixed Reality с помощью одного из двух подходов: общих входных API-интерфейсов Unity, которые охватывают несколько платформ, или XR, связанных с Windows. Головк. Интерфейсы API ввода, которые предлагают более широкие данные, специально для контроллеров движения и HoloLens.

## <a name="general-inputgetbuttongetaxis-apis"></a>Общие входные API-интерфейсы input. OnButton и AXIS

В настоящее время Unity использует общие интерфейсы API input. Окулус и input. Axis для предоставления входных данных для [пакета SDK](https://docs.unity3d.com/Manual/OculusControllers.html) и [пакета SDK для опенвр](https://docs.unity3d.com/Manual/OpenVRControllers.html). Если ваши приложения уже используют эти API для ввода данных, это самый простой путь для поддержки контроллеров движения в Windows Mixed Reality: необходимо просто сопоставить кнопки и оси в диспетчере ввода.

Дополнительные сведения см. в разделе [Таблица соответствия кнопок и осей Unity](../unity/gestures-and-motion-controllers-in-unity.md#unity-buttonaxis-mapping-table) , а также [Общие сведения об общих API Unity](../unity/gestures-and-motion-controllers-in-unity.md#common-unity-apis-inputgetbuttongetaxis).

## <a name="windows-specific-xrwsainput-apis"></a>XR, относящийся к Windows. Головк. Входные интерфейсы API

Если приложение уже создает пользовательскую логику ввода для каждой платформы, можно выбрать использование пространственных входных API для Windows в пространстве имен **UnityEngine. XR. WSA. Input** . Это позволяет получить доступ к дополнительным сведениям, таким как точность расположения или тип источника, что позволяет сообщать руки и контроллеры на HoloLens.

Дополнительные сведения см. в [обзоре интерфейсов API UnityEngine. XR. WSA. Input](../unity/gestures-and-motion-controllers-in-unity.md#windows-specific-apis-xrwsainput).

## <a name="grip-pose-vs-pointing-pose"></a>Захват захвата и указание объекта a

Windows Mixed Reality поддерживает контроллеры Motion в различных конструктивных факторах, при этом структура каждого контроллера различается в связи между положением пользователя и естественным направлением "вперед", которое приложения должны использовать для указания при подготовке к просмотру контроллера.

Для лучшего представления этих контроллеров существует два вида элементов, которые можно исследовать для каждого источника взаимодействия:

* **Захват**, представляющий местоположение ручного устройства, обнаруженного HoloLens, или карманный ПК, удерживающий контроллер движения.
    * В современных головных гарнитурах эта цель лучше подходит для визуализации **руки пользователя** или **объекта, хранящегося в руки пользователя**, например технологий или «обойма».
    * **Позиция захвата**: Карманный центроид при удержании контроллера естественным образом настраивается влево или вправо для центрирования места внутри захвата.
    * **Правая ось ориентации захвата**: когда вы полностью открываете руку для формирования плоской задачи с 5-пальцем, луч, обычный для вашего кармана (вперед от левого кармана, назад от правого Palm)
    * **Прямая ось ориентации захвата**: когда вы частично закрываете руку (как при удержании контроллера), луч, который указывает на "Forward" через лампу, сформированную небегункными пальцами.
    * **Ось Up (вверх) для ориентации захвата**: ось Up, подразумеваемая правым и прямым определением.
    * Доступ к захвату можно получить через API-интерфейс ввода кросс-поставщика Unity (**[XR). Инпуттраккинг](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html). Жетлокалпоситион/вращение**) или через API Windows (**Саурцестате. Саурцепосе. Трижетпоситион/вращение**, запрашивающий захват).
* **Указатель**, представляющий кончик контроллера, указывающий на пересылку.
    * Эта цель лучше использовать для райкаст при **наведении указателя на пользовательский интерфейс** при отрисовке самой модели контроллера.
    * В настоящее время указатель a доступен только через API-интерфейс Windows (**саурцестате. саурцепосе. трижетпоситион/вращение**, запрашивая указатель a).

Эти координаты представляются в универсальных координатах Unity.

## <a name="see-also"></a>См. также раздел
* [Контроллеры движения]().. /.. /Десигн/мотион-контроллерс.МД)
* [Жесты и контроллеры движения в Unity](../unity/gestures-and-motion-controllers-in-unity.md)
* [UnityEngine. XR. WSA. input](https://docs.unity3d.com/ScriptReference/XR.WSA.Input.InteractionManager.html)
* [UnityEngine. XR. Инпуттраккинг](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html)
* [Руководства по переносу приложений](porting-guides.md)
