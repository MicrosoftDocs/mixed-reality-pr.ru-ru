---
title: Руководство по переносу логики ввода для Unity
description: Узнайте, как обрабатывать входные данные для Windows Mixed Reality в Unity.
author: thetuvix
ms.author: alexturn
ms.date: 12/9/2020
ms.topic: article
keywords: вход, Unity, перенос
ms.openlocfilehash: d6bef0f10cf1fc20d5067ac77a126bb793385f59
ms.sourcegitcommit: a1bb77f729ee2e0b3dbd1c2c837bb7614ba7b9bd
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98192652"
---
# <a name="input-porting-guide-for-unity"></a>Руководство по переносу логики ввода для Unity

Вы можете перенести логику ввода в Windows Mixed Reality с помощью одного из двух подходов. Во-первых, следует использовать общие интерфейсы API ввода, кнопки и оси Unity, охватывающие несколько платформ. Второй — это XR, относящийся к Windows. Головк. Входные API, которые предлагают более широкие возможности для контроллеров перемещения и HoloLens.

## <a name="general-inputgetbuttongetaxis-apis"></a>Общие входные API-интерфейсы input. OnButton и AXIS

В настоящее время Unity использует общие интерфейсы API input. Окулус и input. Axis для предоставления входных данных для [пакета SDK](https://docs.unity3d.com/Manual/OculusControllers.html) и [пакета SDK для опенвр](https://docs.unity3d.com/Manual/OpenVRControllers.html). Если ваши приложения уже используют эти API для входных данных, API-интерфейсы input. "Кнопка" и "вход. ось" являются простейшими путями для поддержки контроллеров движения в Windows Mixed Reality. Вам потребуется только сопоставить кнопки и оси в диспетчере ввода.

Дополнительные сведения см. в разделе [Таблица соответствия кнопок и осей Unity](../unity/motion-controllers-in-unity.md#unity-buttonaxis-mapping-table) , а также [Общие сведения об общих API Unity](../unity/motion-controllers-in-unity.md#common-unity-apis-inputgetbuttongetaxis).

## <a name="windows-specific-xrwsainput-apis"></a>XR, относящийся к Windows. Головк. Входные интерфейсы API

Если приложение уже создает пользовательскую логику ввода для каждой платформы, можно использовать пространственные входные API для Windows в пространстве имен **UnityEngine. XR. WSA. Input** . Отсюда вы сможете получить доступ к дополнительным сведениям, таким как точность расположения или тип источника, что позволяет сообщать между ними и контроллерами в HoloLens.

Дополнительные сведения см. в [обзоре интерфейсов API UnityEngine. XR. WSA. Input](../unity/motion-controllers-in-unity.md#windows-specific-apis-xrwsainput).

## <a name="grip-pose-vs-pointing-pose"></a>Захват захвата и указание объекта a

Windows Mixed Reality поддерживает контроллеры движения различными конструктивными факторами. Структура каждого контроллера различает свое отношение между положением пользователя и естественным направлением "вперед", которое приложения должны использовать для указания при подготовке к просмотру контроллера.

Для лучшего представления этих контроллеров существует два вида элементов, которые можно исследовать для каждого источника взаимодействия:

* **Захват**, представляющий местоположение ручного устройства, обнаруженного HoloLens, или карманный ПК, удерживающий контроллер движения.
    * В современных головных гарнитурах эта цель лучше подходит для визуализации **руки пользователя** или **объекта, хранящегося в руки пользователя**, например технологий или «обойма».
    * **Позиция захвата**: Карманный центроид при удержании контроллера естественным образом настраивается влево или вправо для центрирования места внутри захвата.
    * **Правая ось ориентации захвата**: когда вы полностью открываете руку для формирования плоской задачи с 5-пальцем, луч, обычный для вашего кармана (вперед от левого кармана, назад от правого Palm)
    * **Прямая ось ориентации захвата**: когда вы закрываете руку частично, как при удержании контроллера, луч, который указывает на "Forward" через лампу, сформированную неуправляющими пальцами.
    * **Ось Up (вверх) для ориентации захвата**: ось Up, подразумеваемая правым и прямым определением.
    * Доступ к захвату можно получить через API-интерфейс ввода кросс-поставщика Unity (**[XR). Инпуттраккинг](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html). Жетлокалпоситион/вращение**) или через API Windows (**Саурцестате. Саурцепосе. Трижетпоситион/вращение**, запрашивающий захват).
* **Указатель**, представляющий кончик контроллера, указывающий на пересылку.
    * Эта цель лучше использовать для райкаст при **наведении указателя на пользовательский интерфейс** при отрисовке самой модели контроллера.
    * В настоящее время указатель a доступен только через API-интерфейс Windows (**саурцестате. саурцепосе. трижетпоситион/вращение**, запрашивая указатель a).

Эти координаты представляются в универсальных координатах Unity.

## <a name="see-also"></a>См. также
* [Контроллеры движения]().. /.. /Десигн/мотион-контроллерс.МД)
* [Контроллеры движения в Unity](../unity/motion-controllers-in-unity.md)
* [UnityEngine. XR. WSA. input](https://docs.unity3d.com/ScriptReference/XR.WSA.Input.InteractionManager.html)
* [UnityEngine. XR. Инпуттраккинг](https://docs.unity3d.com/ScriptReference/XR.InputTracking.html)
* [Руководства по переносу приложений](porting-guides.md)
