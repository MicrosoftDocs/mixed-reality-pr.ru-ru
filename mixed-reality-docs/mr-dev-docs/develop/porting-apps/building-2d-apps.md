---
title: Обновление приложений UWP, работающих в двухмерном режиме, для Windows Mixed Reality
description: В этой статье описывается обновление существующего приложения 2D универсальная платформа Windows для работы на HoloLens и в Windows Mixed Reality.
author: mattzmsft
ms.author: mazeller
ms.date: 03/21/2018
ms.topic: article
keywords: 2D-приложение, UWP, неструктурированное приложение, HoloLens, закрепляемая гарнитура, модель приложения, кнопка "назад", панель приложений, dpi, разрешение, масштабирование, перенос, 1-еовый Gen, HoloLens 2, гарнитура смешанной реальности, гарнитура Windows Mixed Reality, миграция, Windows 10
ms.openlocfilehash: 6e8e000f694b40f637c932ee9764415ec3a57698
ms.sourcegitcommit: 97815006c09be0a43b3d9b33c1674150cdfecf2b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101759800"
---
# <a name="updating-2d-uwp-apps-for-windows-mixed-reality"></a>Обновление приложений UWP, работающих в двухмерном режиме, для Windows Mixed Reality

Windows Mixed Reality позволяет пользователям видеть голограммы, как если бы они находящегося в физическом и цифровом мире. По сути, как HoloLens, так и настольные компьютеры присоединяются к классическим аксессуарам с наушниками на устройствах Windows 10. Вы можете запускать почти все приложения универсальная платформа Windows (UWP) в магазине в виде двумерных приложений.

## <a name="creating-a-2d-uwp-app-for-mixed-reality"></a>Создание 2D-приложения UWP для смешанной реальности

Первым шагом для переноса 2D-приложения на гарнитуры смешанной реальности является запуск приложения в качестве стандартного 2D-приложения на настольном мониторе.

### <a name="building-a-new-2d-uwp-app"></a>Создание нового приложения для двухмерной платформы UWP

Чтобы создать новое 2D-приложение для смешанной реальности, необходимо создать стандартное приложение с плоским универсальная платформа Windows (UWP). Другие изменения приложения не требуются для того, чтобы это приложение запускалось как планшет в смешанной реальности.

Чтобы приступить к созданию 2D-приложения UWP, ознакомьтесь с статьей [Создание первого приложения](/windows/uwp/get-started/your-first-app) .

### <a name="bringing-an-existing-2d-store-app-to-uwp"></a>Перевод существующего приложения 2D Store в UWP

Если в магазине уже имеется 2D-приложение Windows, убедитесь, что оно предназначено для Windows 10 универсальная платформа Windows (UWP). Ниже приведены все возможные отправные точки, которые могут быть связаны с вашим приложением магазина.
<br>

|  Начальная точка  |  Целевая платформа манифеста AppX  |  Как сделать это универсальное? | 
|----------|----------|----------|
|  Windows Phone (Silverlight)  |  Манифест приложения Silverlight |  [Переход на WinRT](/previous-versions/windows/apps/dn642486(v=vs.105)) | 
|  Windows Phone 8,1 Universal  |  Манифест AppX 8,1, не включающий целевую платформу  |  [Перенос приложения в универсальная платформа Windows](/previous-versions/visualstudio/visual-studio-2015/misc/migrate-apps-to-the-universal-windows-platform-uwp) | 
|  Магазин Windows 8  |  8 манифеста AppX, не включающий целевую платформу  |  [Перенос приложения в универсальная платформа Windows](/previous-versions/visualstudio/visual-studio-2015/misc/migrate-apps-to-the-universal-windows-platform-uwp) | 
|  Универсальное хранилище Windows 8,1  |  Манифест AppX 8,1, не включающий целевую платформу  |  [Перенос приложения в универсальная платформа Windows](/previous-versions/visualstudio/visual-studio-2015/misc/migrate-apps-to-the-universal-windows-platform-uwp) | 

Если сейчас у вас есть приложение 2D Unity, созданное в виде приложения Win32 на **компьютере, в автономном** целевом объекте сборки Mac & Linux, переключитесь на целевой объект сборки **универсальная платформа Windows** для смешанной реальности.

Мы поговорим о способах ограничения приложения только для HoloLens с помощью семейства устройств Windows. holographic [ниже](#publish-and-maintain-your-universal-app).

### <a name="run-your-2d-app-in-a-windows-mixed-reality-immersive-headset"></a>Запуск 2D-приложения в иммерсивного головной гарнитуре Windows Mixed Reality

Если вы развернули 2D-приложение на настольном компьютере и попробовали его на мониторе, вы можете попробовать испытать его на увлекательной гарнитуре рабочего стола!

Просто перейдите в меню "Пуск" на гарнитуре смешанной реальности и запустите приложение отсюда. Оболочки для настольных систем и holographic используют один набор приложений универсальной платформы Windows, поэтому приложение уже должно присутствовать после развертывания из Visual Studio.

## <a name="targeting-both-immersive-headsets-and-hololens"></a>Нацеливание на впечатляющие головные телефоны и HoloLens

Поздравляем! Теперь ваше приложение использует Windows 10 универсальная платформа Windows (UWP).

Теперь ваше приложение может работать на современных устройствах Windows, таких как настольные системы, мобильные устройства, Xbox, впечатляющие головные телефоны Windows Mixed Reality, HoloLens и будущие ОС Windows. Тем не менее, чтобы выбрать все эти устройства, необходимо убедиться в том, что приложение предназначено для Windows. Универсальное семейство устройств.

### <a name="change-your-device-family-to-windowsuniversal"></a>Измените семейство устройств на Windows. Universal.

Теперь давайте перейдем к манифесту AppX, чтобы убедиться, что приложение универсальной платформы Windows 10 может работать на HoloLens:
* Откройте файл решения приложения в **Visual Studio** и перейдите к манифесту пакета приложения.
* Щелкните правой кнопкой мыши файл **Package. appxmanifest** в решении и выберите **Просмотреть код** .<br>
  ![Package. appxmanifest в обозреватель решений](images/openappxmanifest-500px.png)<br>
* Убедитесь, что Целевая платформа — Windows. Универсальный в разделе "зависимости"
  ```
  <Dependencies>
    <TargetDeviceFamily Name="Windows.Universal" MinVersion="10.0.10240.0" MaxVersionTested="10.0.10586.0" />
  </Dependencies>
  ```
* Автоматически!

Если вы не используете Visual Studio для среды разработки, вы можете открыть **AppXManifest.xml** в любом текстовом редакторе, чтобы убедиться, что вы используете **Windows. Universal** *TargetDeviceFamily*.

### <a name="run-in-the-hololens-emulator"></a>Запуск в эмуляторе HoloLens

Теперь, когда приложение UWP предназначено для Windows. Universal, создадим приложение и запустите его в [эмуляторе HoloLens](../platform-capabilities-and-apis/using-the-hololens-emulator.md).
* Убедитесь, что вы [установили эмулятор HoloLens](../install-the-tools.md).
* В Visual Studio выберите конфигурацию сборки **x86** для своего приложения.

  ![Конфигурация сборки x86 в Visual Studio](../platform-capabilities-and-apis/images/x86setting.png)<br>
* Выберите **HoloLens Emulator** (Эмулятор HoloLens) в раскрывающемся меню цели развертывания.

  ![Эмулятор HoloLens в списке целей развертывания](images/deployemulator-500px.png)<br>
* Выберите **отладка > начать отладку** , чтобы развернуть приложение и начать отладку.
* Эмулятор запустит и запустит приложение.
* С помощью клавиатуры, мыши и контроллера Xbox Поместите свое приложение в мир, чтобы запустить его.

  ![Эмулятор HoloLens загружен с образцом UWP](images/hololensemulatorwithuwpsample-800px.png)<br>

### <a name="next-steps"></a>Дальнейшие действия

На этом этапе может произойти одно из двух действий:
1. Приложение покажет свою заставку и начнет работать после его размещения в эмуляторе. Замечательно!
2. Как только вы увидите анимацию загрузки для двухмерной голограммы, загрузка будет прервана, а приложение отобразится на экране-заставке. Это означает, что что-то пошло не так, и потребует более подробного изучения, чтобы понять, как обеспечить жизнь приложения в смешанной реальности.

Необходимо выполнить отладку, чтобы получить доступ к корню возможных проблем, которые приводят к остановке приложения UWP с начала работы в HoloLens.

### <a name="running-your-uwp-app-in-the-debugger"></a>Запуск приложения UWP в отладчике

Эти действия помогут вам выполнить отладку приложения UWP с помощью отладчика Visual Studio.
* Если вы еще не сделали этого, откройте решение в Visual Studio. Измените целевой объект на **эмулятор HoloLens** и конфигурацию сборки на **x86**.
* Выберите **отладка > начать отладку** , чтобы развернуть приложение и начать отладку.
* Поместите приложение в мир с помощью мыши, клавиатуры или контроллера Xbox.
* Теперь Visual Studio может переключиться где-то в коде приложения.
  - Если приложение не работает немедленно или перейдет в отладчик из-за необработанной ошибки, пройдите тестовый проход основных функций приложения, чтобы убедиться, что все работает и функционирует. Вы можете столкнуться с такими ошибками, как показано ниже (внутренние исключения, которые обрабатываются). Чтобы не пропускать внутренние ошибки, влияющие на работу приложения, выполните автоматические тесты и модульные тесты, чтобы убедиться, что все работает правильно.

![Эмулятор HoloLens загружен с помощью примера UWP, отображающего Системное исключение](images/hololensemulatorwithuwpsampleexception-800px.png)

## <a name="update-your-ui"></a>Обновление пользовательского интерфейса

Теперь, когда приложение UWP работает на впечатляющих гарнитурах и HoloLens в виде двухмерной голограммы, далее мы будем уверены, что он выглядит прекраснее. Следует учесть ряд факторов:
* Windows Mixed Reality будет запускать все 2D-приложения с фиксированным разрешением и DPI, которое соответствует 853x480 эффективным пикселям. Если проект нуждается в уточнении, ознакомьтесь с рекомендациями по проектированию, приведенными ниже, чтобы улучшить удобство работы на HoloLens и впечатляющих гарнитурах.
* Windows Mixed Reality [не поддерживает](../../design/app-model.md) двумерные живые плитки. Если основные функции показывают информацию на живой плитке, попробуйте переместить эту информацию обратно в приложение или изучить средства [запуска 3D-приложений](../../distribute/3d-app-launcher-design-guidance.md).

### <a name="2d-app-view-resolution-and-scale-factor"></a>масштабное разрешение представления приложения 2D и коэффициент масштабирования

![От разработки до реагирования](images/scale-500px.png)

Windows 10 перемещает всю визуальную структуру с реальных пикселей экрана в **эффективные Пиксели**. Это означает, что разработчики разрабатывают свой пользовательский интерфейс, следуя рекомендациям по работе с персоналом Windows 10 для эффективных пикселов, и масштабирование Windows гарантирует, что эти эффективные Пиксели имеют правильный размер для удобства использования на устройствах, разрешениях, DPI и т. д. Дополнительные сведения см. [в этой статье на MSDN и в](/windows/uwp/design/layout/screen-sizes-and-breakpoints-for-responsive-design) этой [презентации сборки](https://video.ch9.ms/sessions/build/2015/2-63_Build_2015_Windows_Scaling.pptx) .

Даже с уникальной возможностью размещать приложения в мире на различных расстояниях, рекомендуется использовать ТЕЛЕВИЗОРы, например, для повышения удобочитаемости и взаимодействия с помощью взгляда и жеста. Из-за этого виртуальный планшет на домашней странице Mixed Reality отобразит плоское представление UWP по адресу:

**1280 x 720, 150% dpi** (853x480 эффективные Пиксели)

Это разрешение имеет несколько преимуществ.
* Этот эффективный макет пикселей будет иметь ту же плотность информации, что и планшетный или маленький рабочий стол.
* Он соответствует фиксированному значению DPI и эффективным пикселям для приложений универсальной платформы Windows, работающих на Xbox One, что обеспечивает возможность беспрепятственного взаимодействия между устройствами.
* Этот размер хорошо подходит при масштабировании по всему спектру эксплуатационных расстояний для приложений в мире.

### <a name="2d-app-view-interface-design-best-practices"></a>рекомендации по проектированию интерфейса представления 2D-приложений

**Запреща**
* Следуйте рекомендациям по работе с [персоналом Windows 10 (целях)](https://dev.windows.com/design) для стилей, размеров шрифтов и размеров кнопок. HoloLens будет выполнять работу, чтобы убедиться в том, что приложение будет иметь совместимые шаблоны приложений, размеры доступных для чтения текста и соответствующее изменение размера целевого объекта.
* Убедитесь, что пользовательский интерфейс соответствует рекомендациям по [проектированию для реагирования](/windows/uwp/design/layout/screen-sizes-and-breakpoints-for-responsive-design) на уникальные решения HOLOLENS и dpi.
* Используйте «светлое» рекомендации по использованию цветовой темы Windows.

**Не надо:**
* Измените пользовательский интерфейс в смешанной реальности, чтобы пользователи имели привычный опыт работы с гарнитурой.

### <a name="understand-the-app-model"></a>Общие сведения о модели приложения

[Модель приложения](../../design/app-model.md) для смешанной реальности предназначена для использования дома смешанной реальности, где многие приложения объединены в динамический режим. Как и в смешанной реальности настольной системы, где вы запускаете несколько двумерных приложений одновременно. Это влияет на жизненный цикл приложения, плитки и другие ключевые функции приложения.

### <a name="app-bar-and-back-button"></a>Панель приложений и кнопка "назад"

2D-представления оформляются с помощью панели приложений над содержимым. На панели приложений есть две точки персонализации для конкретного приложения:

**Title:** отображает *Отображаемое имя* плитки, связанной с экземпляром приложения.

**Кнопка "назад":** вызывает событие с обратным *[запросом](/uwp/api/Windows.UI.Core.SystemNavigationManager)* при нажатии. Видимость кнопки "назад" управляется *[системнавигатионманажер. аппвиевбаккбуттонвисибилити](/uwp/api/Windows.UI.Core.SystemNavigationManager)*.

![Пользовательский интерфейс панели приложений в представлении 2D-приложения](images/12697297-10104100857470613-1470416918759008487-o-500px.jpg)<br>
*Пользовательский интерфейс панели приложений в представлении 2D-приложения*

### <a name="test-your-2d-apps-design"></a>Тестирование структуры 2D-приложения

Важно протестировать приложение, чтобы убедиться, что текст доступен для чтения, кнопки являются целевыми, а общее приложение выглядит правильно. Вы можете [проверить](../platform-capabilities-and-apis/testing-your-app-on-hololens.md) гарнитуру рабочего стола, HoloLens, эмулятор или сенсорное устройство с установленным разрешением 1280 x 720 @150 %.

## <a name="new-input-possibilities"></a>Новые возможности ввода

HoloLens использует датчики расширенной глубины для просмотра мира и просмотра пользователей. Это позволяет выполнять сложные жесты, такие как [раскрытия](../../design/system-gesture.md#bloom) и [Air-TAP](../../design/gaze-and-commit.md#composite-gestures). Мощные Микрофоны также позволяют работать с [голосовыми интерфейсами](../../design/voice-input.md).

С помощью гарнитур рабочего стола пользователи могут использовать контроллеры движения для указания приложений и предпринимать действия. Они также могут использовать игровой планшет, нацеливание объектов с помощью их взгляда.

Windows берет на себя все эти сложности для приложений UWP, переведя свои данные для [взгляда](../../design/gaze-and-commit.md), жестов, голоса и контроллера движения на [события указателя](/windows/uwp/design/input/handle-pointer-input#pointer_events) , которые являются абстрактными механизмом ввода. Например, пользователь мог прикоснуться воздушного касания с руки или получить триггер SELECT на контроллере движения, но 2D-приложениям не нужно знать, откуда поступили входные данные — они просто видят 2D касания, как при сенсорном прикосновении.

Ниже приведены основные понятия и сценарии, которые следует учитывать при вводе приложения UWP в HoloLens.
* [Взгляните](../../design/gaze-and-commit.md) на события наведения указателя, которые могут неожиданно вызвать меню, всплывающие окна или другие элементы пользовательского интерфейса, чтобы открыть окно, облаками вокруг приложения.
* Взгляд не так точн, как ввод с помощью мыши. Используйте целевые цели для HoloLens, аналогичные мобильным приложениям, удобным для сенсорного ввода. Небольшие элементы рядом с краями приложения особенно трудны для взаимодействия с.
* Пользователи должны переключить режимы ввода, чтобы перейти от прокрутки к перемещению в два пальца. Если ваше приложение предназначено для сенсорного ввода, следует убедиться в том, что при двух панорамированиях пальца не будет блокироваться ни одна основная функциональность. Если это так, рассмотрите возможность использовать альтернативные механизмы ввода, такие как кнопки, которые могут запустить два панорамирование пальца. Например, приложение Maps может увеличить масштаб с помощью двух панорамирований пальца, но с кнопкой "плюс", "минус" и "повернуть" для имитации одного и того же взаимодействия масштаба с одним щелчком.

[Речевой ввод](../../design/voice-input.md) является важной частью работы в смешанной реальности. Мы включили все API распознавания речи, которые находятся в Windows 10 Powering Кортаны при использовании гарнитуры.

## <a name="publish-and-maintain-your-universal-app"></a>Публикация и обслуживание универсального приложения

После запуска приложения упакуйте приложение, чтобы [отправить его в Microsoft Store](../../distribute/submitting-an-app-to-the-microsoft-store.md).

## <a name="see-also"></a>См. также раздел
* [Модель приложений](../../design/app-model.md)
* [Направление головы и фиксация](../../design/gaze-and-commit.md)
* [Контроллеры движения](../../design/motion-controllers.md)
* [Голосовой ввод](../../design/voice-input.md)
* [Отправка приложения в Microsoft Store](../../distribute/submitting-an-app-to-the-microsoft-store.md)
* [Использование эмулятора HoloLens](../platform-capabilities-and-apis/using-the-hololens-emulator.md)