---
title: Локальные пространственные привязки в Unreal
description: Руководство по применению пространственных привязок в Unreal
author: hferrone
ms.author: v-hferrone
ms.date: 06/10/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, смешанная реальность, разработка, функции, документация, руководства, голограммы, пространственные привязки, гарнитура смешанной реальности, гарнитура Windows Mixed Reality, гарнитура виртуальной реальности
ms.openlocfilehash: 8be1521d44a9dda521c1570d3ac55955e475bc30
ms.sourcegitcommit: 09522ab15a9008ca4d022f9e37fcc98f6eaf6093
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/30/2020
ms.locfileid: "96354520"
---
# <a name="local-spatial-anchors-in-unreal"></a>Локальные пространственные привязки в Unreal

## <a name="overview"></a>Обзор

Пространственные привязки используются для размещения в реальных пространствах голограмм, которые сохраняются между сеансами работы с приложением. Они предоставляются в Unreal в виде элементов **ARPin** и сохраняются в хранилище привязок HoloLens, которое загружается в последующих сеансах. Локальные привязки идеально подходят для тех случаев, когда подключение к Интернету отсутствует.

> [!NOTE]
> Функции объектов из UE 4.25 считаются устаревшими в 4.26. Используйте новые функции. 

> [!IMPORTANT]
> Локальные привязки хранятся на устройстве, а пространственные привязки Azure сохраняются в облаке. Если вы хотите использовать облачные службы Azure для хранения привязок, мы предоставляем документ, который поможем вам в интеграции [Пространственных привязок Azure](unreal-azure-spatial-anchors.md). Обратите внимание, что вы можете использовать локальные привязки и привязки Azure в одном проекте без каких-либо конфликтов.

## <a name="checking-the-anchor-store"></a>Проверка хранилища привязок

Перед сохранением или загрузкой привязок обязательно убедитесь, что хранилище привязок подготовлено.  Попытка вызвать любую из функций привязки в HoloLens при неготовности хранилища завершится ошибкой.  

[!INCLUDE[](includes/tabs-sa-1.md)]

## <a name="saving-anchors"></a>Сохранение привязок

Когда в приложении появится компонент, который нужно прикрепить к положению в реальном мире, сохраните его в хранилище привязок с помощью следующей последовательности: 

[!INCLUDE[](includes/tabs-sa-2.md)]

Порядок действий:
1. Породите субъект в известном расположении.
2. Создайте элемент **ARPin** с этим расположением и именем, основанным на классе субъекта. 
3. Добавьте соответствующий субъект в **ARPin** и сохраните полученный элемент в хранилище привязок HoloLens.  
    * Для привязки необходимо выбрать уникальное имя, поэтому в нашем примере к имени добавляется текущая метка времени. 

4. Привязка, успешно сохраненная в хранилище, становится доступной для проверки на портале устройства HoloLens в разделе **System > Map manager > Anchor Files Saved On Device** (Система > Диспетчер карт > Сохраненные на устройстве файлы привязок). 

## <a name="loading-anchors"></a>Загрузка привязок

При запуске приложения можно вызвать следующую схему, чтобы восстановить все компоненты в местах соответствующих привязок:

[!INCLUDE[](includes/tabs-sa-3.md)]

Порядок действий:
1. Выполните перечисленные ниже шаги для всех привязок в хранилище. 
2. Породите субъект без преобразований.
3. Прикрепите субъект к элементу **ARPin** из хранилища привязок.  

    * Здесь важно порождать субъект без преобразований, так как привязка отвечает за размещение голограммы в мире в том месте, где она была сохранена. Любое преобразование на этом этапе добавит к нашей привязке ненужное смещение. 

Идентификатор привязки также запрашивается, чтобы мы могли порождать разные субъекты в зависимости от сохраненного имени привязки. 

## <a name="removing-anchors"></a>Удаление привязок 

Когда вы закончите с привязкой, то можете очистить отдельные привязки или очистить все хранилище привязок с помощью компонентов **Remove ARPin from WMRAnchor Store** (Удаление ARPin из хранилища WMRAnchor) и **Remove All ARPins from WMRAnchor Store** (Удаление всех элементов ARPin из хранилища WMRAnchor).

[!INCLUDE[](includes/tabs-sa-4.md)]

> [!NOTE]
> Имейте в виду, что функциональность пространственных привязок находится пока в стадии бета-версии, поэтому стоит возвращаться сюда время от времени за новой информацией.

## <a name="next-development-checkpoint"></a>Следующий этап разработки

Если вы следуете изложенным нами этапам разработки для Unreal, вы как раз прошли половину в изучении основных стандартных блоков MRTK. Отсюда вы можете перейти к следующему стандартному блоку: 

> [!div class="nextstepaction"]
> [Пространственные привязки Azure.](unreal-azure-spatial-anchors.md)

Или перейдите к возможностям и API платформы смешанной реальности:

> [!div class="nextstepaction"]
> [Камера HoloLens](unreal-hololens-camera.md)

Вы можете в любой момент вернуться к [этапам разработки для Unreal](unreal-development-overview.md#2-core-building-blocks).

## <a name="see-also"></a>См. также статью
* [Пространственные привязки Azure](unreal-azure-spatial-anchors.md)
* [Пространственные привязки](../../design/spatial-anchors.md)
* [Системы координат](../../design/coordinate-systems.md)
