---
title: UMG и клавиатура в Unreal
description: Узнайте, как использовать несферную график движения для создания системы пользовательского интерфейса из мини-приложений.
author: hferrone
ms.author: suwu
ms.date: 11/25/2020
ms.topic: article
keywords: Windows Mixed Reality, голограммы, HoloLens 2, отслеживание взгляда, ввод с экрана, головной дисплей, нереалный механизм, гарнитура смешанной реальности, гарнитура Windows Mixed Reality, гарнитура виртуальной реальности, мини-приложения, Пользовательский интерфейс, УМГ, нереалная графика, нереалная подсистема, UE, UE4
ms.openlocfilehash: 59ad108a0e27298256f4f0d1661381a4f1748777
ms.sourcegitcommit: 32cb81eee976e73cd661c2b347691c37865a60bc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/04/2020
ms.locfileid: "96609765"
---
# <a name="umg-and-keyboard-in-unreal"></a>UMG и клавиатура в Unreal

Нереалная графика движения (УМГ) — это встроенная система пользовательского интерфейса нереального механизма, используемая для создания таких интерфейсов, как меню и текстовые поля. Пользовательские интерфейсы, созданные с помощью УМГ, состоят из мини-приложений. Мы покажем вам создание нового мини-приложения, его добавление в мировое пространство и включение взаимодействия с помощью системной клавиатуры в качестве примера. Дополнительные сведения о УМГ см. в официальной [документации по](https://docs.unrealengine.com/en-US/Engine/UMG/index.html)нереальному подсистеме. 

## <a name="create-a-new-widget"></a>Создание нового мини-приложения

- Создайте проект мини-приложения для размещения пользовательского интерфейса игры:

![Снимок экрана: Добавление схемы мини-приложения из нереального меню](images/unreal-umg-img-01.png)

- Откройте новый проект и добавьте компоненты из палитры на холст.  В этом случае мы добавили два компонента текстового поля из раздела input:

![Снимок экрана: окно иерархии с выделенным и развернутым компонентом текстового мини-приложения](images/unreal-umg-img-02.png)

- Выберите мини-приложение в окне "иерархия" или "Конструктор" и измените параметры на панели сведений.  В этом случае мы добавили текст подсказок по умолчанию и цвет оттенков, который появляется при наведении указателя мыши на текстовое поле.  Текстовое поле будет отображать виртуальную клавиатуру на HoloLens, когда она взаимодействует с:

![Снимок экрана измененных параметров в окне иерархии](images/unreal-umg-img-03.png)

- На панели подробностей можно также подписываться на события.

![Снимок экрана событий на панели подробностей](images/unreal-umg-img-04.png)

## <a name="add-a-widget-to-world-space"></a>Добавление мини-приложения в мировое пространство

- Создайте субъект, добавьте компонент Widget и добавьте субъект в сцену:

![Снимок экрана субъекта с присоединенным мини-приложением](images/unreal-umg-img-05.png)

- На панели подробностей для мини-приложения задайте **класс Widget** для созданной ранее схемы мини-приложения:

![Снимок экрана: панель сведений о проекте с набором классов мини-приложений](images/unreal-umg-img-06.png)

- Для мини-приложения текста убедитесь, что флажок **получить аппаратные входные данные** не установлен, поэтому мы обновляем только текст с виртуальной клавиатуры:

![Снимок экрана раздела "взаимодействие" с параметром "получить аппаратное устройство ввода" снят](images/unreal-umg-img-07.png)

## <a name="widget-interaction"></a>Взаимодействие мини-приложения

Мини-приложения УМГ обычно получают входные данные от мыши.  В HoloLens или VR необходимо имитировать мышь с компонентом взаимодействия мини-приложения, чтобы получить те же события.

- Создайте субъект, добавьте компонент взаимодействия с **мини** -приложением и добавьте субъект в сцену:

![Снимок экрана: новый субъект с выделенным компонентом взаимодействия мини-приложения](images/unreal-umg-img-08.png)

- На панели подробностей для компонента взаимодействия мини-приложения выполните следующие действия.
    - Установка расстояния взаимодействия до нужного значения расстояния
    - Задайте для **источника взаимодействия** значение **Custom** .
    - Для разработки задайте для параметра **Показывать отладку** **значение true**:

![Снимок экрана: свойства компонента взаимодействия и отладки мини-приложения](images/unreal-umg-img-09.png)

По умолчанию для источника взаимодействия используется «World», который должен отсылать райкастс на основе расположения в мире компонента взаимодействия мини-приложения. В AR и VR это не так.  Включение функции "показывать отладку" и добавление оттенок при наведении для мини-приложений важно для проверки того, что компонент взаимодействия мини-приложения выполняет предполагаемое действие.  Обходной путь заключается в использовании настраиваемого источника и задании райкаст в графе событий с рука-Ray.  

Здесь мы вызываем этот метод из Tick события:

![План такта события](images/unreal-umg-img-10.png)

Затем добавьте виртуальные события указателя мыши в компонент взаимодействия мини-приложения, передействующий в входные данные HoloLens.  В этом случае отправьте событие щелчка левой кнопкой мыши, когда продается рука, и событие выпуска левой кнопки мыши при невозможности:

![Схема с добавленными виртуальными событиями указателя мыши](images/unreal-umg-img-13.png)

Теперь, когда вы развертываете приложение в HoloLens 2, вы увидите, что с правой стороны будет расширяться луч. Если вы направите его по одному из редактируемых текстовых полей и просто коснитесь, системная клавиатура появится перед вами и позволит ввести текст. 
 
> [!NOTE]
> Для системной клавиатуры HoloLens требуется нереалия ядра 4,26 или более поздней версии. Кроме того, клавиатура не отображается при потоковой передаче приложения из нереального редактора в гарнитуру, только если приложение выполняется на устройстве.

## <a name="see-also"></a>См. также:
* [Документация по УМГ в реальном времени](https://docs.unrealengine.com/Engine/UMG/index.html)
* [Практические руководства УМГ](https://docs.unrealengine.com/Programming/Tutorials/UMG/index.html)
