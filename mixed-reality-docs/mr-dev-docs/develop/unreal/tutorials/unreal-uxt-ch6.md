---
title: 6. Упаковка и развертывание на устройстве или в эмуляторе
description: Часть 6 (из 6) серии руководств по созданию простого приложения для игры в шахматы с помощью Unreal Engine 4 и подключаемого модуля средств UX из набора средств для смешанной реальности
author: hferrone
ms.author: v-hferrone
ms.date: 06/10/2020
ms.topic: article
ms.localizationpriority: high
keywords: Unreal, Unreal Engine 4, UE4, HoloLens, HoloLens 2, смешанная реальность, учебник, начало работы, MRTK, UXT, средства разработки пользовательского интерфейса, средства UX, документация
ms.openlocfilehash: 6e1f19810a97480ab324846e8d674bb4edf5da52
ms.sourcegitcommit: 8e91ff47ef70e80a41137f80aa1093e711d27bf7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/12/2020
ms.locfileid: "91957814"
---
# <a name="6-packaging--deploying-to-device-or-emulator"></a>6. Упаковка и развертывание на устройстве или в эмуляторе

## <a name="overview"></a>Обзор

В предыдущем разделе мы добавили простую кнопку, которая возвращает шахматную фигуру в исходное положение. Этот раздел — последний в серии. Здесь мы подготовим приложение к выполнению на устройстве HoloLens 2 или в эмуляторе. Если у вас есть HoloLens 2, вы можете вести потоковую передачу с компьютера или упаковать приложение для выполнения непосредственно на устройстве. Если же вы не располагаете устройством, то нужно будет упаковать приложение для выполнения в эмуляторе. К концу раздела у вас будет развернутое и готовое к выполнению приложение смешанной реальности с соответствующими взаимодействиями и пользовательским интерфейсом.

## <a name="objectives"></a>Задачи

* [Только для устройства] Потоковая передача на HoloLens 2 в режиме голографического удаленного взаимодействия с приложением.
* Упаковка и развертывание приложения на устройстве или в эмуляторе HoloLens 2.

## <a name="device-only-streaming"></a>[Только для устройства] Потоковая передача
[Голографическое удаленное взаимодействие](https://docs.microsoft.com/windows/mixed-reality/add-holographic-remoting) — это потоковая передача данных с компьютера или автономного устройства UWP на устройство HoloLens 2. Ведущее приложение в удаленном взаимодействии принимает входной поток данных от устройства HoloLens, отрисовывает контент в виртуальном иммерсивном режиме и передает кадры контента в потоковом режиме обратно на HoloLens по сети Wi-Fi. Потоковая передача позволяет реализовывать иммерсивные режимы удаленного взаимодействия в существующем программном обеспечении для настольных компьютеров и обеспечивает доступ к большему объему системных ресурсов.

Если вы выбрали этот вариант для своего шахматного приложения, нужны будут следующие приготовления:

1.  Установите и запустите **проигрыватель голографического удаленного взаимодействия** из Microsoft Store на устройстве HoloLens 2. Запишите IP-адрес, отображаемый в приложении.

2.  В редакторе Unreal выберите **Edit > Project Settings** (Правка > Параметры проекта) и в разделе **Holographic Remoting** (Голографическое удаленное взаимодействие) установите флажок **Enable Remoting** (Включить удаленное взаимодействие).

3.  Перезапустите редактор, а затем введите IP-адрес устройства (как показано в приложении Holographic Remoting Player), а затем нажмите кнопку **Connect** (Подключить).

Когда устройство подключится, щелкните стрелку раскрывающегося списка справа от кнопки **Play** (Воспроизведение) и выберите вариант **VR Preview** (Просмотр виртуальной реальности). Приложение запустится в окне просмотра виртуальной реальности с потоковой передачей на гарнитуру HoloLens.

## <a name="packaging-and-deploying-the-app-via-device-portal"></a>Упаковка и развертывание приложения на портале устройств

>[!NOTE]
>Если вы впервые упаковываете приложение Unreal для HoloLens, потребуется скачать вспомогательные файлы из Epic Launcher.
>- Выберите **Editor Preferences > General > Source Code > Source Code Editor** (Параметры редактора > Общие > Исходный код > Редактор исходного кода) и убедитесь, что решение Visual Studio 2019 выбрано.
>- Перейдите на вкладку **Library** (Библиотека) в Epic Games Launcher. Щелкните стрелку раскрывающегося списка рядом с полем **Launch** (Запуск) и выберите вариант **Options** (Параметры).
>- В разделе **Target Platforms** (Целевые платформы) выберите элемент **HoloLens 2** и щелкните команду **Apply** (Применить).
>![Изменение целевой платформы в параметрах проекта](images/unreal-uxt/6-installationoptions.PNG)

1.  Перейдите к разделу **Edit > Project Settings** (Правка > Параметры проекта).
    * В разделе **Project > Description > About > Project Name** (Проект > Описание > Сведения > Имя проекта) введите имя проекта.
    * Добавьте **CN=название_вашей_компании** в разделе **Project > Description > Publisher > Company Distinguished Name** (Проект > Описание > Издатель > Название организации).

> [!IMPORTANT]
> Если оставить любое из этих полей пустым, при попытке создать новый сертификат на шаге 3 будет выдаваться ошибка.

> [!IMPORTANT]
> Имя издателя должно быть указано в формате [LADPv3](https://www.ietf.org/rfc/rfc2253.txt). Неправильно сформированное имя издателя приведет к возникновению ошибки "Signing key not found. The app could not be digitally signed" (Ключ подписывания не найден. Не удалось подписать приложение) при упаковке.

![Параметры проекта — Описание](images/unreal-uxt/6-cn.PNG)

2.  В разделе **Platforms > HoloLens** (Платформы > HoloLens) установите флажок **Build for HoloLens Emulation** (Сборка для эмуляции HoloLens) и/или **Build for HoloLens Device** (Сборка для устройства HoloLens).

3.  В разделе **Packaging** (Упаковка) рядом с полем **Signing Certificate** (Сертификат для подписания) нажмите кнопку **Generate new** (Создать).

> [!IMPORTANT]
> Если вы используете уже созданный сертификат, имя издателя сертификата должно совпадать с именем издателя приложения. В противном случае возникнет ошибка "Signing key not found. The app could not be digitally signed" (Ключ подписывания не найден. Не удалось подписать приложение) ошибка".

![Параметры проекта — Платформы — HoloLens](images/unreal-uxt/6-packaging.PNG)

4. При появлении запроса на создание пароля закрытого ключа щелкните **Нет**, чтобы протестировать эту функцию.

![Создание сертификата](images/unreal-uxt/6-private-key-testing.png)

5. Откройте раздел **File > Package Project** (Файл > Упаковка проекта) и выберите **HoloLens**.
    * Создайте новую папку для сохранения пакета и щелкните **Select Folder** (Выбрать папку).

6.  Когда завершится создание пакета приложения, откройте [портал устройств Windows](https://docs.microsoft.com/windows/mixed-reality/using-the-windows-device-portal), перейдите к разделу **Представления > Приложения** и найдите подраздел **Развертывание приложений**.

7.  Нажмите кнопку **Обзор...** , найдите файл **ChessApp.appxbundle** и нажмите кнопку **Открыть**.

    * Если приложение впервые устанавливается на этом устройстве, установите флажок **Allow me to select framework packages** (Разрешить выбор пакетов платформы).
    * В следующем диалоговом окне включите соответствующие файлы **VCLibs** и **APPX** (arm64 для устройства или x64 для эмулятора). Их можно найти во вложенной папке **HoloLens** внутри той папки, где вы сохранили пакет.

8.  Щелкните **Установить**.
    * Теперь вы можете перейти в раздел **Все приложения** и коснуться только что установленного приложения для его запуска или запустить это приложение непосредственно с **портала устройств Windows**. 

Поздравляем! Ваше приложение смешанной реальности для HoloLens готово к работе. Но мы исследовали не все. В MRTK есть множество автономных функций, которые вы можете добавлять в свои проекты, в том числе пространственное сопоставление, взгляд, голосовой ввод и даже QR-коды. Подробнее об этих функциях можно прочесть в "[Обзоре разработки в Unreal](https://docs.microsoft.com/windows/mixed-reality/unreal-development-overview)".

## <a name="next-development-checkpoint"></a>Следующий этап разработки

Если вы следуете изложенным нами этапам разработки для Unreal, вы как раз прошли половину в изучении основных стандартных блоков MRTK. Отсюда вы можете перейти к следующему стандартному блоку:

> [!div class="nextstepaction"]
> [Ввод взглядом](../unreal-gaze-input.md)

Или перейдите к возможностям и API платформы смешанной реальности:

> [!div class="nextstepaction"]
> [Камера HoloLens](../unreal-hololens-camera.md)

Вы можете в любой момент вернуться к [этапам разработки для Unreal](../unreal-development-overview.md#2-core-building-blocks).
