---
title: Включение безопасности подключения для удаленного взаимодействия holographic
description: На этой странице объясняется, как настроить удаленное взаимодействие с помощью зашифрованных и прошедших проверку подлинности подключений между проигрывателем и удаленными приложениями.
author: markkeinz
ms.author: makei
ms.date: 10/29/2020
ms.topic: article
keywords: HoloLens, удаленное взаимодействие, удаленное взаимодействие с holographic
ms.openlocfilehash: fcacac76e65fa884433afca9f568c5c0211dd570
ms.sourcegitcommit: 979967d6841d8fa64cf1d6cf3ae532b736ed3bd1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2020
ms.locfileid: "93102303"
---
# <a name="enabling-connection-security-for-holographic-remoting"></a><span data-ttu-id="63743-104">Включение безопасности подключения для удаленного взаимодействия holographic</span><span class="sxs-lookup"><span data-stu-id="63743-104">Enabling connection security for Holographic Remoting</span></span>

>[!IMPORTANT]
><span data-ttu-id="63743-105">Это руководство относится к удаленному взаимодействию с HoloLens 2.</span><span class="sxs-lookup"><span data-stu-id="63743-105">This guidance is specific to Holographic Remoting on HoloLens 2.</span></span>

<span data-ttu-id="63743-106">На этой странице представлены общие сведения о сетевой безопасности для удаленного взаимодействия с Holographic.</span><span class="sxs-lookup"><span data-stu-id="63743-106">This page gives you an overview of network security for Holographic Remoting.</span></span> <span data-ttu-id="63743-107">Вы найдете сведения о</span><span class="sxs-lookup"><span data-stu-id="63743-107">You'll find information about</span></span>

* <span data-ttu-id="63743-108">безопасность в контексте удаленного взаимодействия с holographic и причин, по которым это может потребоваться</span><span class="sxs-lookup"><span data-stu-id="63743-108">security in the context of Holographic Remoting and why you might need it</span></span>
* <span data-ttu-id="63743-109">Рекомендуемые меры на основе различных вариантов использования</span><span class="sxs-lookup"><span data-stu-id="63743-109">recommended measures based on different use cases</span></span>
* <span data-ttu-id="63743-110">Реализация безопасности в решении для удаленного взаимодействия с holographic</span><span class="sxs-lookup"><span data-stu-id="63743-110">implementing security in your Holographic Remoting solution</span></span>

## <a name="overview"></a><span data-ttu-id="63743-111">Обзор</span><span class="sxs-lookup"><span data-stu-id="63743-111">Overview</span></span>

<span data-ttu-id="63743-112">Holographic удаленное взаимодействие обменивается данными по сети.</span><span class="sxs-lookup"><span data-stu-id="63743-112">Holographic Remoting exchanges information over a network.</span></span> <span data-ttu-id="63743-113">Если меры безопасности отсутствуют, злоумышленников в одной сети может нарушить целостность обмена данными или получить доступ к конфиденциальной информации.</span><span class="sxs-lookup"><span data-stu-id="63743-113">If no security measures are in place, adversaries on the same network may compromise the integrity of the communication or access confidential information.</span></span>

<span data-ttu-id="63743-114">Примеры приложений и плеера holographic в магазине Windows имеют отключенную систему безопасности.</span><span class="sxs-lookup"><span data-stu-id="63743-114">The sample apps and the Holographic Remoting Player in the Windows Store come with security disabled.</span></span> <span data-ttu-id="63743-115">Это упрощает понимание образцов.</span><span class="sxs-lookup"><span data-stu-id="63743-115">Doing so makes the samples easier to understand.</span></span> <span data-ttu-id="63743-116">Он также помогает быстрее начать работу с разработкой.</span><span class="sxs-lookup"><span data-stu-id="63743-116">It also helps you to get started more quickly with development.</span></span>

<span data-ttu-id="63743-117">Однако для тестирования полей или использования в рабочей среде настоятельно рекомендуется включить безопасность в решении holographic Remoting.</span><span class="sxs-lookup"><span data-stu-id="63743-117">For field testing or production use however, we strongly recommend enabling security in your Holographic Remoting solution.</span></span>

<span data-ttu-id="63743-118">Безопасность в holographic удаленное взаимодействие, если правильно настроить для вашего варианта использования, предоставляет следующие гарантии:</span><span class="sxs-lookup"><span data-stu-id="63743-118">Security in Holographic Remoting, when set up correctly for your use case, gives you the following guarantees:</span></span>

* <span data-ttu-id="63743-119">**Подлинность.** и проигрыватель, и удаленное приложение могут быть уверены, что они должны быть</span><span class="sxs-lookup"><span data-stu-id="63743-119">**Authenticity:** both player and remote app can be sure the other side is who they claim to be</span></span>
* <span data-ttu-id="63743-120">**Конфиденциальность.** сторонние лица не могут читать сведения, которыми обмениваются проигрыватель и удаленное приложение.</span><span class="sxs-lookup"><span data-stu-id="63743-120">**Confidentiality:** no third party can read the information exchanged between player and remote app</span></span>
* <span data-ttu-id="63743-121">**Целостность.** проигрыватель и удаленный может обнаружить транзитные изменения в связи</span><span class="sxs-lookup"><span data-stu-id="63743-121">**Integrity:** player and remote can detect any in-transit changes to their communication</span></span>

>[!TIP]
><span data-ttu-id="63743-122">Чтобы иметь возможность использовать функции безопасности, необходимо реализовать как [пользовательский проигрыватель](holographic-remoting-create-player.md) , так и [настраиваемое удаленное приложение](holographic-remoting-create-host.md).</span><span class="sxs-lookup"><span data-stu-id="63743-122">To be able to use security features, you will need to implement both a [custom player](holographic-remoting-create-player.md) and a [custom remote app](holographic-remoting-create-host.md).</span></span>

## <a name="planning-the-security-implementation"></a><span data-ttu-id="63743-123">Планирование реализации безопасности</span><span class="sxs-lookup"><span data-stu-id="63743-123">Planning the security implementation</span></span>

<span data-ttu-id="63743-124">При включении безопасности в holographic удаленное взаимодействие библиотека удаленного взаимодействия автоматически включит проверку шифрования и целостности для всех данных, передаваемых по сети.</span><span class="sxs-lookup"><span data-stu-id="63743-124">When you enable security in Holographic Remoting, the remoting library will automatically enable encryption and integrity checks for all data exchanged over the network.</span></span>

<span data-ttu-id="63743-125">Однако, чтобы обеспечить правильную проверку подлинности, необходимо выполнить некоторые дополнительные операции.</span><span class="sxs-lookup"><span data-stu-id="63743-125">Ensuring proper authentication requires some extra work though.</span></span> <span data-ttu-id="63743-126">То, что нужно сделать, зависит от варианта использования, а остальная часть этого раздела — об определении необходимых действий.</span><span class="sxs-lookup"><span data-stu-id="63743-126">What exactly you need to do depends on your use case, and the rest of this section is about figuring out the necessary steps.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="63743-127">Эта статья содержит только общие рекомендации.</span><span class="sxs-lookup"><span data-stu-id="63743-127">This article can only provide general guidance.</span></span> <span data-ttu-id="63743-128">Если вы не уверены, обратитесь к эксперту по безопасности, который может предоставить вам рекомендации, относящиеся к Вашему варианту использования.</span><span class="sxs-lookup"><span data-stu-id="63743-128">If you feel unsure, consider consulting a security expert that can give you guidance specific to your use case.</span></span>

<span data-ttu-id="63743-129">Первая терминология. при описании сетевых подключений будут использоваться условия _клиент_ и _сервер_ .</span><span class="sxs-lookup"><span data-stu-id="63743-129">First some terminology: when describing network connections, the terms _client_ and _server_ will be used.</span></span> <span data-ttu-id="63743-130">Сервер — это сторона, принимающая входящие подключения по известному адресу конечной точки, а клиент — Подключение к конечной точке сервера.</span><span class="sxs-lookup"><span data-stu-id="63743-130">The server is the side listening for incoming connections on a known endpoint address, and the client is the one connecting to the server's endpoint.</span></span>

>[!NOTE]
> <span data-ttu-id="63743-131">Роли клиента и сервера не связаны с тем, работает ли приложение как проигрыватель или как удаленное.</span><span class="sxs-lookup"><span data-stu-id="63743-131">The client and and server roles are not tied to whether an app is acting as a player or as a remote.</span></span> <span data-ttu-id="63743-132">Хотя у примеров есть проигрыватель в роли сервера, можно легко поменять местами роли, если это лучше соответствует Вашему варианту использования.</span><span class="sxs-lookup"><span data-stu-id="63743-132">While the samples have the player in the server role, it's easy to reverse the roles if it better fits your use case.</span></span>

### <a name="planning-the-server-to-client-authentication"></a><span data-ttu-id="63743-133">Планирование проверки подлинности "сервер-клиент"</span><span class="sxs-lookup"><span data-stu-id="63743-133">Planning the server-to-client authentication</span></span>

<span data-ttu-id="63743-134">Сервер использует цифровые сертификаты для подтверждения его подлинности клиенту.</span><span class="sxs-lookup"><span data-stu-id="63743-134">The server uses digital certificates to prove its identity to the client.</span></span> <span data-ttu-id="63743-135">Клиент проверяет сертификат сервера на этапе подтверждения соединения.</span><span class="sxs-lookup"><span data-stu-id="63743-135">The client validates the server's certificate during the connection handshake phase.</span></span> <span data-ttu-id="63743-136">Если клиент не доверяет серверу, подключение будет завершено на этом этапе.</span><span class="sxs-lookup"><span data-stu-id="63743-136">If the client doesn't trust the server, it will end the connection at this point.</span></span>

<span data-ttu-id="63743-137">Как клиент проверяет сертификат сервера и какие типы сертификатов сервера можно использовать, зависит от варианта использования.</span><span class="sxs-lookup"><span data-stu-id="63743-137">How the client validates the server certificate, and what kinds of server certificates can be used, depends on your use case.</span></span>

<span data-ttu-id="63743-138">**Вариант использования 1:** Имя узла сервера не фиксировано, или сервер не адресован по имени узла.</span><span class="sxs-lookup"><span data-stu-id="63743-138">**Use case 1:** The server hostname isn't fixed, or the server isn't addressed by host name at all.</span></span>

<span data-ttu-id="63743-139">В этом случае непрактично (или даже возможно) выдача сертификата для имени узла сервера.</span><span class="sxs-lookup"><span data-stu-id="63743-139">In this use case, it isn't practical (or even possible) to issue a certificate for the server's host name.</span></span> <span data-ttu-id="63743-140">Вместо этого рекомендуется проверять отпечаток сертификата.</span><span class="sxs-lookup"><span data-stu-id="63743-140">The recommendation here is to validate the certificate's thumbprint instead.</span></span> <span data-ttu-id="63743-141">Как и отпечаток человека, отпечаток уникально определяет сертификат.</span><span class="sxs-lookup"><span data-stu-id="63743-141">Like a human fingerprint, the thumbprint uniquely identifies a certificate.</span></span>

<span data-ttu-id="63743-142">Важно передавать отпечаток клиенту по внешнему каналу.</span><span class="sxs-lookup"><span data-stu-id="63743-142">It's important to communicate the thumbprint to the client out-of-band.</span></span> <span data-ttu-id="63743-143">Это означает, что вы не сможете отправить его через то же сетевое подключение, которое используется для удаленного взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="63743-143">That means, you can't send it over the same network connection that's used for remoting.</span></span> <span data-ttu-id="63743-144">Вместо этого можно вручную ввести его в конфигурацию клиента или проверить QR-код на клиенте.</span><span class="sxs-lookup"><span data-stu-id="63743-144">Instead, you could manually enter it into the client's configuration, or to have the client scan a QR code.</span></span>

<span data-ttu-id="63743-145">**Вариант использования 2:** Сервер может быть достигнут с помощью стабильного имени узла.</span><span class="sxs-lookup"><span data-stu-id="63743-145">**Use case 2:** The server can be reached over a stable host name.</span></span>

<span data-ttu-id="63743-146">В этом варианте использования сервер имеет определенное имя узла и известно, что это имя, скорее всего, не изменится.</span><span class="sxs-lookup"><span data-stu-id="63743-146">In this use case, the server has a specific host name, and you know this name isn't likely to change.</span></span> <span data-ttu-id="63743-147">Затем можно использовать сертификат, выданный для имени узла сервера.</span><span class="sxs-lookup"><span data-stu-id="63743-147">You can then use a certificate issued to the server's host name.</span></span> <span data-ttu-id="63743-148">Доверие будет установлено на основе имени узла и цепочки доверия сертификата.</span><span class="sxs-lookup"><span data-stu-id="63743-148">Trust will be established based on the host name and the certificate's chain of trust.</span></span>

<span data-ttu-id="63743-149">При выборе этого параметра клиенту необходимо заранее определить имя узла сервера и корневой сертификат.</span><span class="sxs-lookup"><span data-stu-id="63743-149">If you choose this option, the client needs to know the server's host name and the root certificate in advance.</span></span>

### <a name="planning-the-client-to-server-authentication"></a><span data-ttu-id="63743-150">Планирование проверки подлинности клиента и сервера</span><span class="sxs-lookup"><span data-stu-id="63743-150">Planning the client-to-server authentication</span></span>

<span data-ttu-id="63743-151">Клиенты проходят проверку подлинности на сервере с помощью маркера свободной формы.</span><span class="sxs-lookup"><span data-stu-id="63743-151">Clients authenticate against the server using a free-form token.</span></span> <span data-ttu-id="63743-152">Что должен содержать этот токен, будет снова зависеть от вашего варианта использования:</span><span class="sxs-lookup"><span data-stu-id="63743-152">What this token should contain will again depend on your use case:</span></span>

<span data-ttu-id="63743-153">**Вариант использования 1:** Необходимо только проверить удостоверение клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="63743-153">**Use case 1:** You only need to verify the client app's identity.</span></span>

<span data-ttu-id="63743-154">В этом варианте использования может быть достаточно общего секрета.</span><span class="sxs-lookup"><span data-stu-id="63743-154">In this use case, a shared secret can be sufficient.</span></span> <span data-ttu-id="63743-155">Этот секрет должен быть достаточно сложным, чтобы не догадаться.</span><span class="sxs-lookup"><span data-stu-id="63743-155">This secret must be complex enough that it can't be guessed.</span></span>

<span data-ttu-id="63743-156">Хороший общий секрет — это случайный идентификатор GUID, который вручную указывается как в конфигурации сервера, так и на клиенте.</span><span class="sxs-lookup"><span data-stu-id="63743-156">A good shared secret is a random GUID, which is manually entered in both the server's and client's configuration.</span></span> <span data-ttu-id="63743-157">Для создания такой команды можно использовать `New-Guid` команду в PowerShell.</span><span class="sxs-lookup"><span data-stu-id="63743-157">To create one you can, for example, use the `New-Guid` command in PowerShell.</span></span>

<span data-ttu-id="63743-158">Убедитесь, что этот общий секрет никогда не передается через небезопасные каналы.</span><span class="sxs-lookup"><span data-stu-id="63743-158">Make sure this shared secret is never communicated over insecure channels.</span></span> <span data-ttu-id="63743-159">Библиотека удаленного взаимодействия гарантирует, что общий секрет всегда будет отправляться зашифрованным и только доверенным одноранговым узлам.</span><span class="sxs-lookup"><span data-stu-id="63743-159">The remoting library ensures that the shared secret is always sent encrypted, and only to trusted peers.</span></span>

<span data-ttu-id="63743-160">**Вариант использования 2:** Также необходимо проверить удостоверение пользователя клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="63743-160">**Use case 2:** You also need to verify the identity of the client app's user.</span></span>

<span data-ttu-id="63743-161">Общий секрет не будет достаточно для покрытия этого варианта использования.</span><span class="sxs-lookup"><span data-stu-id="63743-161">A shared secret won't be enough to cover this use case.</span></span> <span data-ttu-id="63743-162">Вместо этого можно использовать маркеры, созданные поставщиком удостоверений.</span><span class="sxs-lookup"><span data-stu-id="63743-162">Instead, you can use tokens created by an identity provider.</span></span> <span data-ttu-id="63743-163">Рабочий процесс проверки подлинности с использованием поставщика удостоверений будет выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="63743-163">An authentication workflow using an identity provider would look like this:</span></span>

* <span data-ttu-id="63743-164">Клиент выполняет авторизацию для поставщика удостоверений и запрашивает маркер.</span><span class="sxs-lookup"><span data-stu-id="63743-164">The client authorizes against the identity provider and requests a token</span></span>
* <span data-ttu-id="63743-165">Поставщик удостоверений создает маркер и отправляет его клиенту.</span><span class="sxs-lookup"><span data-stu-id="63743-165">The identity provider generates a token and sends it to the client</span></span>
* <span data-ttu-id="63743-166">Клиент отправляет этот токен серверу с помощью удаленного взаимодействия с Holographic.</span><span class="sxs-lookup"><span data-stu-id="63743-166">The client sends this token to the server through Holographic Remoting</span></span>
* <span data-ttu-id="63743-167">Сервер проверяет маркер клиента на соответствие поставщику удостоверений.</span><span class="sxs-lookup"><span data-stu-id="63743-167">The server validates the client's token against the identity provider</span></span>

<span data-ttu-id="63743-168">Одним из примеров поставщика удостоверений является [платформа Microsoft Identity](https://docs.microsoft.com/azure/active-directory/develop/).</span><span class="sxs-lookup"><span data-stu-id="63743-168">One example of an identity provider is the [Microsoft identity platform](https://docs.microsoft.com/azure/active-directory/develop/).</span></span>

<span data-ttu-id="63743-169">Как и в предыдущем варианте использования, убедитесь, что эти маркеры не отправляются через небезопасные каналы или не предоставляются иным образом.</span><span class="sxs-lookup"><span data-stu-id="63743-169">Like in the previous use case, make sure these tokens aren't sent through insecure channels or otherwise exposed.</span></span>

## <a name="implementing-holographic-remoting-security"></a><span data-ttu-id="63743-170">Реализация безопасности удаленного взаимодействия holographic</span><span class="sxs-lookup"><span data-stu-id="63743-170">Implementing holographic remoting security</span></span>

<span data-ttu-id="63743-171">Помните, что для обеспечения безопасности подключения необходимо реализовать пользовательские удаленные и проигрыватели приложений.</span><span class="sxs-lookup"><span data-stu-id="63743-171">Remember that you need to implement custom remote and player apps if you want to enable connection security.</span></span> <span data-ttu-id="63743-172">Предоставленные примеры можно использовать в качестве отправных точек для собственных приложений.</span><span class="sxs-lookup"><span data-stu-id="63743-172">You can use the provided samples as starting points for your own apps.</span></span>

<span data-ttu-id="63743-173">Чтобы включить безопасность, вызовите `ListenSecure()` вместо `Listen()` и `ConnectSecure()` вместо, `Connect()` чтобы установить удаленное соединение.</span><span class="sxs-lookup"><span data-stu-id="63743-173">To enable security, call `ListenSecure()` instead of `Listen()`, and `ConnectSecure()` instead of `Connect()` to establish the remoting connection.</span></span>

<span data-ttu-id="63743-174">Для этих вызовов требуется предоставить реализации определенных интерфейсов для предоставления и проверки сведений, связанных с безопасностью:</span><span class="sxs-lookup"><span data-stu-id="63743-174">These calls require you to provide implementations of certain interfaces for providing and validating security-related information:</span></span>

* <span data-ttu-id="63743-175">Сервер должен реализовать поставщик сертификатов и проверяющий элемент проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="63743-175">The server needs to implement a certificate provider and an authentication validator</span></span>
* <span data-ttu-id="63743-176">Клиенту необходимо реализовать поставщик проверки подлинности и проверяющий элемент управления сертификатом.</span><span class="sxs-lookup"><span data-stu-id="63743-176">The client needs to implement an authentication provider and a certificate validator.</span></span>

<span data-ttu-id="63743-177">Все интерфейсы имеют функцию, запрашивающую выполнение действия, которая получает объект обратного вызова в качестве параметра.</span><span class="sxs-lookup"><span data-stu-id="63743-177">All interfaces have a function requesting you to take action, which receives a callback object as parameter.</span></span> <span data-ttu-id="63743-178">С помощью этого объекта можно легко реализовать асинхронную обработку запроса.</span><span class="sxs-lookup"><span data-stu-id="63743-178">Using this object, you can easily implement asynchronous handling of the request.</span></span> <span data-ttu-id="63743-179">Сохраним ссылку на этот объект и вызовите функцию завершения после завершения асинхронного действия.</span><span class="sxs-lookup"><span data-stu-id="63743-179">Keep a reference to this object, and call the completion function when the asynchronous action is complete.</span></span> <span data-ttu-id="63743-180">Функцию завершения можно вызвать из любого потока.</span><span class="sxs-lookup"><span data-stu-id="63743-180">The completion function may be called from any thread.</span></span>

>[!TIP]
><span data-ttu-id="63743-181">Реализация интерфейсов WinRT может быть легко выполнена с помощью C++/Винрт.</span><span class="sxs-lookup"><span data-stu-id="63743-181">Implementing WinRT interfaces can easily be done using C++/WinRT.</span></span> <span data-ttu-id="63743-182">Подробные сведения см. в разделе [API-интерфейсы автора с C++/WinRT](https://docs.microsoft.com//windows/uwp/cpp-and-winrt-apis/author-apis) .</span><span class="sxs-lookup"><span data-stu-id="63743-182">The [Author APIs with C++/WinRT](https://docs.microsoft.com//windows/uwp/cpp-and-winrt-apis/author-apis) chapter describes this in detail.</span></span>

>[!IMPORTANT]
><span data-ttu-id="63743-183">В `build\native\include\HolographicAppRemoting\Microsoft.Holographic.AppRemoting.idl` пакете NuGet содержится подробная документация по API, связанному с защищенными соединениями.</span><span class="sxs-lookup"><span data-stu-id="63743-183">The `build\native\include\HolographicAppRemoting\Microsoft.Holographic.AppRemoting.idl` inside the NuGet package contains detailed documentation for the API related to secure connections.</span></span>

### <a name="implementing-a-certificate-provider"></a><span data-ttu-id="63743-184">Реализация поставщика сертификатов</span><span class="sxs-lookup"><span data-stu-id="63743-184">Implementing a certificate provider</span></span>

<span data-ttu-id="63743-185">Поставщики сертификатов предоставляют серверное приложение с сертификатом для использования.</span><span class="sxs-lookup"><span data-stu-id="63743-185">Certificate providers supply the server application with the certificate to use.</span></span> <span data-ttu-id="63743-186">Реализация состоит из двух частей:</span><span class="sxs-lookup"><span data-stu-id="63743-186">The implementation consists of two parts:</span></span>

1) <span data-ttu-id="63743-187">Объект сертификата, который реализует `ICertificate` интерфейс:</span><span class="sxs-lookup"><span data-stu-id="63743-187">A certificate object, which implements the `ICertificate` interface:</span></span>

    * <span data-ttu-id="63743-188">`GetCertificatePfx()` должен возвращать двоичное содержимое `PKCS#12` хранилища сертификатов.</span><span class="sxs-lookup"><span data-stu-id="63743-188">`GetCertificatePfx()` should return the binary contents of a `PKCS#12` certificate store.</span></span> <span data-ttu-id="63743-189">`.pfx`Файл содержит `PKCS#12` данные, поэтому его содержимое можно использовать непосредственно здесь.</span><span class="sxs-lookup"><span data-stu-id="63743-189">A `.pfx` file contains `PKCS#12` data, so its contents can be used directly here.</span></span>
    * <span data-ttu-id="63743-190">`GetSubjectName()` должен возвращать понятное имя, идентифицирующее используемый сертификат.</span><span class="sxs-lookup"><span data-stu-id="63743-190">`GetSubjectName()` should return the friendly name that identifies the certificate to use.</span></span> <span data-ttu-id="63743-191">Если сертификату не присвоено понятное имя, эта функция должна возвращать имя субъекта сертификата.</span><span class="sxs-lookup"><span data-stu-id="63743-191">If no friendly name is assigned to the certificate, this function should return the certificate's subject name.</span></span>
    * <span data-ttu-id="63743-192">`GetPfxPassword()` должен вернуть пароль, необходимый для открытия хранилища сертификатов (или пустую строку, если пароль не требуется).</span><span class="sxs-lookup"><span data-stu-id="63743-192">`GetPfxPassword()` should return the password required to open the certificate store (or an empty string if no password is required).</span></span>

2) <span data-ttu-id="63743-193">Поставщик сертификатов, реализующий `ICertificateProvider` интерфейс:</span><span class="sxs-lookup"><span data-stu-id="63743-193">A certificate provider implementing the `ICertificateProvider` interface:</span></span>
    * <span data-ttu-id="63743-194">`GetCertificate()` должен создать объект сертификата и вернуть его, вызвав метод `CertificateReceived()` в объекте обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="63743-194">`GetCertificate()` should construct a certificate object and return it by calling `CertificateReceived()` on the callback object.</span></span>

### <a name="implementing-an-authentication-validator"></a><span data-ttu-id="63743-195">Реализация средства проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="63743-195">Implementing an authentication validator</span></span>

<span data-ttu-id="63743-196">Проверяющие элементы проверки подлинности получают маркер проверки подлинности, отправленный клиентом, и отвечают на результаты проверки.</span><span class="sxs-lookup"><span data-stu-id="63743-196">Authentication validators receive the authentication token sent by the client, and answer back with the validation result.</span></span>

<span data-ttu-id="63743-197">Реализуйте `IAuthenticationReceiver` интерфейс следующим образом:</span><span class="sxs-lookup"><span data-stu-id="63743-197">Implement the `IAuthenticationReceiver` interface as follows:</span></span>

* <span data-ttu-id="63743-198">`GetRealm()` должен возвращать имя области проверки подлинности (область HTTP, используемую во время подтверждения соединения удаленного взаимодействия).</span><span class="sxs-lookup"><span data-stu-id="63743-198">`GetRealm()` should return the name of the authentication realm (an HTTP realm  used during the remoting connection handshake).</span></span>
* <span data-ttu-id="63743-199">`ValidateToken()` должен проверять маркер проверки подлинности клиента и вызывать `ValidationCompleted()` объект обратного вызова с результатом проверки.</span><span class="sxs-lookup"><span data-stu-id="63743-199">`ValidateToken()` should validate the client authentication token and call `ValidationCompleted()` on the callback object with the validation result.</span></span>

### <a name="implementing-an-authentication-provider"></a><span data-ttu-id="63743-200">Реализация поставщика проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="63743-200">Implementing an authentication provider</span></span>

<span data-ttu-id="63743-201">Поставщики проверки подлинности создают или извлекают маркер проверки подлинности для отправки на сервер.</span><span class="sxs-lookup"><span data-stu-id="63743-201">Authentication providers generate or retrieve the authentication token to be sent to the server.</span></span>

<span data-ttu-id="63743-202">Реализуйте `IAuthenticationProvider` интерфейс следующим образом:</span><span class="sxs-lookup"><span data-stu-id="63743-202">Implement the `IAuthenticationProvider` interface as follows:</span></span>

* <span data-ttu-id="63743-203">`GetToken()` должен создать или получить токен проверки подлинности для отправки.</span><span class="sxs-lookup"><span data-stu-id="63743-203">`GetToken()` should generate or retrieve the authentication token to be sent.</span></span> <span data-ttu-id="63743-204">Когда маркер будет готов, вызовите `TokenReceived()` метод для объекта обратного вызова.</span><span class="sxs-lookup"><span data-stu-id="63743-204">Once the token is ready, call the `TokenReceived()` method on the callback object.</span></span>

### <a name="implementing-a-certificate-validator"></a><span data-ttu-id="63743-205">Реализация средства проверки сертификата</span><span class="sxs-lookup"><span data-stu-id="63743-205">Implementing a certificate validator</span></span>

<span data-ttu-id="63743-206">Средства проверки сертификатов получают цепочку сертификатов, отправленную сервером, и определяют, может ли сервер быть доверенным.</span><span class="sxs-lookup"><span data-stu-id="63743-206">Certificate validators receive the certificate chain sent by the server and determine whether the server can be trusted.</span></span>

<span data-ttu-id="63743-207">Для проверки сертификатов можно использовать логику проверки базовой системы.</span><span class="sxs-lookup"><span data-stu-id="63743-207">To validate certificates, you can use the validation logic of the underlying system.</span></span> <span data-ttu-id="63743-208">Эта проверка системы может либо поддерживать собственную логику проверки, либо полностью заменить ее.</span><span class="sxs-lookup"><span data-stu-id="63743-208">This system validation can either support your own validation logic, or replace it altogether.</span></span> <span data-ttu-id="63743-209">Если вы не передаете собственное средство проверки сертификатов при запросе безопасного подключения, проверка системы будет использоваться автоматически.</span><span class="sxs-lookup"><span data-stu-id="63743-209">If you don't pass your own certificate validator when requesting a secure connection, system validation will be used automatically.</span></span>

<span data-ttu-id="63743-210">В Windows проверка системы будет проверять следующее:</span><span class="sxs-lookup"><span data-stu-id="63743-210">On Windows, the system validation will check for:</span></span>

* <span data-ttu-id="63743-211">Целостность цепочки сертификатов. сертификаты формируют согласованную цепочку, которая заканчивается на доверенном корневом сертификате.</span><span class="sxs-lookup"><span data-stu-id="63743-211">Integrity of the certificate chain: the certificates form a consistent chain that ends at a trusted root certificate</span></span>
* <span data-ttu-id="63743-212">Срок действия сертификата. сертификат сервера находится в пределах интервала времени и выдается в целях проверки подлинности сервера.</span><span class="sxs-lookup"><span data-stu-id="63743-212">Certificate validity: the server's certificate is within its validity timespan, and is issued for the purpose of server authentication</span></span>
* <span data-ttu-id="63743-213">Отзыв: сертификат не был отозван</span><span class="sxs-lookup"><span data-stu-id="63743-213">Revocation: The certificate hasn't been revoked</span></span>
* <span data-ttu-id="63743-214">Совпадение имен: имя узла сервера совпадает с одним из имен узлов, для которых был выдан сертификат.</span><span class="sxs-lookup"><span data-stu-id="63743-214">Name match: The host name of the server matches one of the host names the certificate was issued for</span></span>

<span data-ttu-id="63743-215">Реализуйте `ICertificateValidator` интерфейс следующим образом:</span><span class="sxs-lookup"><span data-stu-id="63743-215">Implement the `ICertificateValidator` interface as follows:</span></span>

 * <span data-ttu-id="63743-216">`PerformSystemValidation()` должен возвращать, `true` если должна быть выполнена проверка системы, как описано выше.</span><span class="sxs-lookup"><span data-stu-id="63743-216">`PerformSystemValidation()` should return `true` if a system validation as described above should be performed.</span></span> <span data-ttu-id="63743-217">В этом случае результат проверки системы передается в качестве входных данных для `ValidateCertificate()` метода.</span><span class="sxs-lookup"><span data-stu-id="63743-217">In this case, the system validation result is passed as an input to the `ValidateCertificate()` method.</span></span>
* <span data-ttu-id="63743-218">`ValidateCertificate()` должен проверять цепочку сертификатов, а затем вызывать `CertificateValidated()` переданный обратный вызов с окончательным результатом проверки.</span><span class="sxs-lookup"><span data-stu-id="63743-218">`ValidateCertificate()` should validate the certificate chain and then call `CertificateValidated()` on the passed callback with the final validation result.</span></span> <span data-ttu-id="63743-219">Этот метод принимает цепочку сертификатов, имя сервера, с которым устанавливается соединение, и необходимость принудительного выполнения проверки отзыва.</span><span class="sxs-lookup"><span data-stu-id="63743-219">This method accepts the certificate chain, the name of the server the connection is being established with, and whether a revocation check should be forced.</span></span> <span data-ttu-id="63743-220">Если цепочка сертификатов содержит несколько сертификатов, первый из них является сертификатом субъекта.</span><span class="sxs-lookup"><span data-stu-id="63743-220">If the certificate chain contains multiple certificates, the first one is the subject certificate.</span></span>

>[!NOTE]
><span data-ttu-id="63743-221">Если для варианта использования требуется другая форма проверки (см. вариант использования сертификата #1 выше), полностью обходить проверку системы.</span><span class="sxs-lookup"><span data-stu-id="63743-221">If your use case requires a different form of validation (see certificate use case #1 above), bypass system validation entirely.</span></span> <span data-ttu-id="63743-222">Вместо этого используйте любой API или библиотеку, которые могут использовать сертификаты X. 509 в кодировке DER для декодирования цепочки сертификатов и выполнения проверок, необходимых для вашего варианта использования.</span><span class="sxs-lookup"><span data-stu-id="63743-222">Instead, use any API or library that can handle DER-encoded X.509 certificates to decode the certificate chain and perform the checks needed for your use case.</span></span>

## <a name="see-also"></a><span data-ttu-id="63743-223">См. также</span><span class="sxs-lookup"><span data-stu-id="63743-223">See Also</span></span>
* [<span data-ttu-id="63743-224">Создание приложения с голографическим удаленным взаимодействием</span><span class="sxs-lookup"><span data-stu-id="63743-224">Writing a Holographic Remoting remote app</span></span>](holographic-remoting-create-host.md)
* [<span data-ttu-id="63743-225">Создание пользовательского проигрывателя для голографического удаленного взаимодействия</span><span class="sxs-lookup"><span data-stu-id="63743-225">Writing a custom Holographic Remoting player app</span></span>](holographic-remoting-create-player.md)
* [<span data-ttu-id="63743-226">Устранение неполадок и ограничения удаленного взаимодействия с holographic</span><span class="sxs-lookup"><span data-stu-id="63743-226">Holographic Remoting troubleshooting and limitations</span></span>](holographic-remoting-troubleshooting.md)
* [<span data-ttu-id="63743-227">Условия лицензии на использование ПО для голографического удаленного взаимодействия</span><span class="sxs-lookup"><span data-stu-id="63743-227">Holographic Remoting software license terms</span></span>](https://docs.microsoft.com//legal/mixed-reality/microsoft-holographic-remoting-software-license-terms)
* [<span data-ttu-id="63743-228">Заявление Майкрософт о конфиденциальности</span><span class="sxs-lookup"><span data-stu-id="63743-228">Microsoft Privacy Statement</span></span>](https://go.microsoft.com/fwlink/?LinkId=521839)
