---
title: Захват смешанной реальности для разработчиков
description: Ознакомьтесь с рекомендациями по включению, использованию и визуализации записи смешанной реальности для разработчиков.
author: mattzmsft
ms.author: mazeller
ms.date: 02/24/2019
ms.topic: article
keywords: Нормативная бумага, Фото, видео, захват, Камера
ms.openlocfilehash: 2539c8e2a6f26ba1f36cd28502bf8d0f50803657
ms.sourcegitcommit: bd9b2734903652b106db86686428c03acf104707
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/25/2021
ms.locfileid: "98763720"
---
# <a name="mixed-reality-capture-for-developers"></a><span data-ttu-id="15344-104">Захват смешанной реальности для разработчиков</span><span class="sxs-lookup"><span data-stu-id="15344-104">Mixed reality capture for developers</span></span>

> [!NOTE]
> <span data-ttu-id="15344-105">Рекомендации по новой функции нормативных требований для HoloLens 2 см. в разделе [Render на камере ПС](#render-from-the-pv-camera-opt-in) ниже.</span><span class="sxs-lookup"><span data-stu-id="15344-105">See [Render from the PV camera](#render-from-the-pv-camera-opt-in) below for guidance on a new MRC capability for HoloLens 2.</span></span>

<span data-ttu-id="15344-106">Вы можете в любое время принять фотографию или видео [смешанной реальности](/hololens/holographic-photos-and-videos) (с соблюдением нормативных требований), но при разработке приложения следует учитывать некоторые моменты.</span><span class="sxs-lookup"><span data-stu-id="15344-106">You can take a [mixed reality capture](/hololens/holographic-photos-and-videos) (MRC) photo or video at any time, but there are few things to keep in mind when developing your application.</span></span> <span data-ttu-id="15344-107">Сюда входят рекомендации по качеству с соблюдением нормативных требований и реагированию на изменения системы при записи МРКС.</span><span class="sxs-lookup"><span data-stu-id="15344-107">This includes best practices for MRC visual quality and being responsive to system changes while MRCs are being captured.</span></span>

<span data-ttu-id="15344-108">Разработчики также могут легко интегрировать запись смешанной реальности и вставить их в свои приложения.</span><span class="sxs-lookup"><span data-stu-id="15344-108">Developers can also seamlessly integrate mixed reality capture and insertion into their apps.</span></span>

<span data-ttu-id="15344-109">НОРМАТИВная версия в HoloLens (первое поколение) поддерживает видео и фотографии до 720p, а НОРМАТИВная версия HoloLens 2 поддерживает видео вплоть до 4000 и фото до 4 КБ.</span><span class="sxs-lookup"><span data-stu-id="15344-109">MRC on HoloLens (first-generation) supports videos and photos up to 720p, while MRC on HoloLens 2 supports videos up to 1080p and photos up to 4K resolution.</span></span>

## <a name="the-importance-of-quality-mrc"></a><span data-ttu-id="15344-110">Важность НОРМАТИВного контроля качества</span><span class="sxs-lookup"><span data-stu-id="15344-110">The importance of quality MRC</span></span>

<span data-ttu-id="15344-111">Независимо от того, находятся ли снимки на снимках смешанной реальности на странице Microsoft Store или других пользователей, совместно использующих данные для захвата в социальных сетях, часто пользователи получают доступ к вашему приложению в первую очередь.</span><span class="sxs-lookup"><span data-stu-id="15344-111">Whether it's mixed reality screenshots on your Microsoft Store page or other users sharing capture content on social networks, Mixed Reality Capture media is often a users first exposure to your app.</span></span> <span data-ttu-id="15344-112">НОРМАТИВную версию можно использовать для демонстрации приложения, обучения пользователей, предоставления пользователям возможности совместного использования смешанного мира, а также для исследования пользователей и решения проблем.</span><span class="sxs-lookup"><span data-stu-id="15344-112">You can use MRC to demo your app, educate users, encourage users to share their mixed world interactions, and for user research and problem solving.</span></span>

## <a name="how-mrc-impacts-your-app"></a><span data-ttu-id="15344-113">Влияние нормативных требований на ваше приложение</span><span class="sxs-lookup"><span data-stu-id="15344-113">How MRC impacts your app</span></span>

### <a name="enabling-mrc-in-your-app"></a><span data-ttu-id="15344-114">Включение функции нормативных требований в приложении</span><span class="sxs-lookup"><span data-stu-id="15344-114">Enabling MRC in your app</span></span>

<span data-ttu-id="15344-115">По умолчанию приложению не нужно ничего делать, чтобы пользователи могли принимать смешанные записи реальность.</span><span class="sxs-lookup"><span data-stu-id="15344-115">By default, an app doesn't have to do anything to enable users to take mixed reality captures.</span></span>

### <a name="enabling-improved-alignment-for-mrc-in-your-app"></a><span data-ttu-id="15344-116">Включение улучшенного выравнивания нормативных требований в приложении</span><span class="sxs-lookup"><span data-stu-id="15344-116">Enabling improved alignment for MRC in your app</span></span>

<span data-ttu-id="15344-117">По умолчанию, запись смешанной реальности сочетает в себе сопоставленный с фотографией (ПС) выход с изображением монитора.</span><span class="sxs-lookup"><span data-stu-id="15344-117">By default, mixed reality capture combines the right eye's holographic output with the photo/video (PV) camera.</span></span> <span data-ttu-id="15344-118">Эти два источника объединяются с помощью точки фокусировки, заданной текущим выполняющимся приложением.</span><span class="sxs-lookup"><span data-stu-id="15344-118">These two sources are combined using the focus point set by the currently running immersive app.</span></span>

<span data-ttu-id="15344-119">Это означает, что голограммы за пределами плоскости фокусировки не будут выделены из-за физического расстояния между камерой ПС и отображаемым справа.</span><span class="sxs-lookup"><span data-stu-id="15344-119">This means that holograms outside the focus plane won't align because of the physical distance between the PV camera and the right display.</span></span>

#### <a name="set-the-focus-point"></a><span data-ttu-id="15344-120">Задать точку фокусировки</span><span class="sxs-lookup"><span data-stu-id="15344-120">Set the focus point</span></span>

<span data-ttu-id="15344-121">Иммерсивное приложение (на HoloLens) должно устанавливать [точку фокусировки](../unity/focus-point-in-unity.md) , где должна быть стабилизации плоскость.</span><span class="sxs-lookup"><span data-stu-id="15344-121">Immersive apps (on HoloLens) should set the [focus point](../unity/focus-point-in-unity.md) of where they want their stabilization plane to be.</span></span> <span data-ttu-id="15344-122">Это обеспечивает наилучшее выравнивание как на гарнитуре, так и в смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="15344-122">This ensures the best alignment in both the headset and in mixed reality capture.</span></span>

<span data-ttu-id="15344-123">Если точка фокусировки не задана, по умолчанию для плоскости стабилизации будет установлено 2 метра.</span><span class="sxs-lookup"><span data-stu-id="15344-123">If a focus point isn't set, the stabilization plane will default to 2 meters.</span></span>

#### <a name="render-from-the-pv-camera-opt-in"></a><span data-ttu-id="15344-124">Подготовка к просмотру с помощью камеры ПС (согласие)</span><span class="sxs-lookup"><span data-stu-id="15344-124">Render from the PV camera (opt-in)</span></span>

<span data-ttu-id="15344-125">HoloLens 2 добавляет возможность визуализации иммерсивного приложения **с камеры ПС** , когда работает смешанная запись реальность.</span><span class="sxs-lookup"><span data-stu-id="15344-125">HoloLens 2 adds the ability for an immersive app to **render from the PV camera** while mixed reality capture is running.</span></span> <span data-ttu-id="15344-126">Чтобы обеспечить правильную визуализацию приложения, приложение должно принять участие в этой функции.</span><span class="sxs-lookup"><span data-stu-id="15344-126">To ensure the app supports the additional render correctly, the app has to opt in to this functionality.</span></span>

<span data-ttu-id="15344-127">Визуализация с камеры PV обеспечивает следующие улучшения по сравнению с НОРМАТИВным опытом по умолчанию:</span><span class="sxs-lookup"><span data-stu-id="15344-127">Render from the PV camera offers the following improvements over the default MRC experience:</span></span>
* <span data-ttu-id="15344-128">Выравнивание по голограммам для физической среды и взаимодействие практических действий должны быть точными на всех расстояниях.</span><span class="sxs-lookup"><span data-stu-id="15344-128">Hologram alignment to your physical environment and hands for near interactions should be accurate at all distances.</span></span> <span data-ttu-id="15344-129">Избегайте смещения на расстоянии, отличном от точки фокусировки, как в случае с соблюдением требований по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="15344-129">Avoid having an offset at distances other than the focus point as you might see in the default MRC.</span></span>
* <span data-ttu-id="15344-130">Правый глаз на гарнитуре не будет скомпрометирован, так как он не будет использоваться для визуализации голограмм для выходных данных нормативных требований.</span><span class="sxs-lookup"><span data-stu-id="15344-130">The right eye in the headset won't be compromised, as it won't be used to render the holograms for the MRC output.</span></span>

<span data-ttu-id="15344-131">Для подготовки к просмотру с помощью камеры PV необходимо выполнить три шага:</span><span class="sxs-lookup"><span data-stu-id="15344-131">There are three steps to enable rendering from the PV camera:</span></span>
1. <span data-ttu-id="15344-132">Включение Фотовидеокамера Холографиквиевконфигуратион</span><span class="sxs-lookup"><span data-stu-id="15344-132">Enable the PhotoVideoCamera HolographicViewConfiguration</span></span>
2. <span data-ttu-id="15344-133">Обработка дополнительного Холографиккамера рендеринга</span><span class="sxs-lookup"><span data-stu-id="15344-133">Handle the additional HolographicCamera render</span></span>
3. <span data-ttu-id="15344-134">Проверьте, правильно ли отображаются шейдеры и код из этого дополнительного Холографиккамера</span><span class="sxs-lookup"><span data-stu-id="15344-134">Verify your shaders and code render correctly from this additional HolographicCamera</span></span>

##### <a name="enable-the-photovideocamera-holographicviewconfiguration-in-directx"></a><span data-ttu-id="15344-135">Включение Фотовидеокамера Холографиквиевконфигуратион в DirectX</span><span class="sxs-lookup"><span data-stu-id="15344-135">Enable the PhotoVideoCamera HolographicViewConfiguration in DirectX</span></span>

<span data-ttu-id="15344-136">Чтобы принять участие в подготовке к просмотру с камеры ПС, приложение просто включает [Холографиквиевконфигуратион](/uwp/api/Windows.Graphics.Holographic.HolographicViewConfiguration)фотовидеокамера:</span><span class="sxs-lookup"><span data-stu-id="15344-136">To opt in to rendering from the PV Camera, an app simply enables the PhotoVideoCamera's [HolographicViewConfiguration](/uwp/api/Windows.Graphics.Holographic.HolographicViewConfiguration):</span></span>
```csharp
var display = Windows.Graphics.Holographic.HolographicDisplay.GetDefault();
var view = display.TryGetViewConfiguration(Windows.Graphics.Holographic.HolographicViewConfigurationKind.PhotoVideoCamera);
if (view != null)
{
    view.IsEnabled = true;
}
```

##### <a name="handle-the-additional-holographiccamera-render-in-directx"></a><span data-ttu-id="15344-137">Обработка дополнительного рендеринга Холографиккамера в DirectX</span><span class="sxs-lookup"><span data-stu-id="15344-137">Handle the additional HolographicCamera render in DirectX</span></span>

<span data-ttu-id="15344-138">Когда приложение получает согласие на подготовку к просмотру с камеры PV и начинается запись смешанной реальности:</span><span class="sxs-lookup"><span data-stu-id="15344-138">When the app has opt-in to render from the PV camera and mixed reality capture starts:</span></span>
1. <span data-ttu-id="15344-139">Будет срабатывать событие Камерааддед Холографикспаце.</span><span class="sxs-lookup"><span data-stu-id="15344-139">HolographicSpace's CameraAdded event will fire.</span></span> <span data-ttu-id="15344-140">Это событие может быть отложено, если приложение не может справиться с камерой в данный момент.</span><span class="sxs-lookup"><span data-stu-id="15344-140">This event can be deferred if the app can't handle the camera at this time.</span></span>
2. <span data-ttu-id="15344-141">Когда событие завершится без необработанных РБП, Холографиккамера появится в списке следующего Холографикфраме Аддедкамерас.</span><span class="sxs-lookup"><span data-stu-id="15344-141">Once the event has completed with no outstanding deferrals, the HolographicCamera will appear in the next HolographicFrame's AddedCameras list.</span></span>

<span data-ttu-id="15344-142">При остановке записи смешанной реальности (или в случае, если приложение отключает конфигурацию представления при выполнении записи смешанной реальности), Холографиккамера будет отображаться в списке следующего Холографикфраме Ремоведкамерас и будет срабатывать событие Камераремовед Холографикспаце.</span><span class="sxs-lookup"><span data-stu-id="15344-142">When mixed reality capture stops (or if the app disables the view configuration while mixed reality capture is running): the HolographicCamera will appear in the next HolographicFrame's RemovedCameras list and the HolographicSpace's CameraRemoved event will fire.</span></span>

<span data-ttu-id="15344-143">В Холографиккамера было добавлено свойство [виевконфигуратион](/uwp/api/windows.graphics.holographic.holographiccamera.viewconfiguration) , помогающее определить конфигурацию, к которой принадлежит камера.</span><span class="sxs-lookup"><span data-stu-id="15344-143">A [ViewConfiguration](/uwp/api/windows.graphics.holographic.holographiccamera.viewconfiguration) property has been added to HolographicCamera to help identify the configuration a camera belongs to.</span></span>

##### <a name="enable-the-photovideocamera-holographicviewconfiguration-in-unity"></a><span data-ttu-id="15344-144">Включение Холографиквиевконфигуратион Фотовидеокамера в Unity</span><span class="sxs-lookup"><span data-stu-id="15344-144">Enable the PhotoVideoCamera HolographicViewConfiguration in Unity</span></span>

> [!NOTE]
> <span data-ttu-id="15344-145">Если вы используете Unity 2018, для этого требуется **Unity 2018.4.13 F1** или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="15344-145">If you're using Unity 2018, this requires **Unity 2018.4.13f1** or newer.</span></span> <span data-ttu-id="15344-146">Если вы используете Unity 2019, для этого требуется **unity 2019,4** или более поздняя версия.</span><span class="sxs-lookup"><span data-stu-id="15344-146">If you're using Unity 2019, this requires **Unity 2019.4**, or newer.</span></span>

<span data-ttu-id="15344-147">Чтобы принять участие в подготовке к просмотру из камеры ПС при использовании [набора средств Mixed Reality](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html), включите поставщик [параметров камеры Windows Mixed Reality](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/CameraSystem/WindowsMixedRealityCameraSettings.html) и проверьте **рендеринг с камеры PV**.</span><span class="sxs-lookup"><span data-stu-id="15344-147">To opt in to rendering from the PV Camera when using the [Mixed Reality Toolkit](https://microsoft.github.io/MixedRealityToolkit-Unity/README.html), enable the [Windows Mixed Reality Camera Settings](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/CameraSystem/WindowsMixedRealityCameraSettings.html) provider and check **Render from PV Camera**.</span></span>

<span data-ttu-id="15344-148">Если вы не используете набор средств для смешанной реальности, можно использовать компонент для [ручного](#enable-the-photovideocamera-holographicviewconfiguration-in-directx) включения, как описано выше для DirectX.</span><span class="sxs-lookup"><span data-stu-id="15344-148">If you're not using the Mixed Reality Toolkit, you can use a component to [manually opt-in](#enable-the-photovideocamera-holographicviewconfiguration-in-directx) as described above for DirectX.</span></span>

##### <a name="handle-the-additional-holographiccamera-render-in-unity"></a><span data-ttu-id="15344-149">Обработка дополнительной отрисовки Холографиккамера в Unity</span><span class="sxs-lookup"><span data-stu-id="15344-149">Handle the additional HolographicCamera render in Unity</span></span>

<span data-ttu-id="15344-150">Это делается автоматически с помощью Unity.</span><span class="sxs-lookup"><span data-stu-id="15344-150">This is done for you automatically by Unity.</span></span>

##### <a name="enable-the-photovideocamera-holographicviewconfiguration-in-unreal"></a><span data-ttu-id="15344-151">Включение Холографиквиевконфигуратион Фотовидеокамера в нереальном режиме</span><span class="sxs-lookup"><span data-stu-id="15344-151">Enable the PhotoVideoCamera HolographicViewConfiguration in Unreal</span></span>

> [!NOTE]
> <span data-ttu-id="15344-152">Для этого требуется **Unreal Engine версии 4.25** и выше.</span><span class="sxs-lookup"><span data-stu-id="15344-152">This requires **Unreal Engine 4.25** or newer.</span></span>

<span data-ttu-id="15344-153">Чтобы включить отрисовку с фотовидеокамеры, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="15344-153">To opt in to rendering from the PV Camera:</span></span>

1. <span data-ttu-id="15344-154">Вызовите функции **SetEnabledMixedRealityCamera** и **ResizeMixedRealityCamera**.</span><span class="sxs-lookup"><span data-stu-id="15344-154">Call **SetEnabledMixedRealityCamera** and **ResizeMixedRealityCamera**</span></span>
    * <span data-ttu-id="15344-155">Задайте размеры видеоизображения с помощью параметров **Size X** (Размер по X) и **Size Y** (Размер по Y).</span><span class="sxs-lookup"><span data-stu-id="15344-155">Use the **Size X** and **Size Y** values to set the video dimensions.</span></span>

![Третья камера](images/unreal-camera-3rd.PNG)

##### <a name="handle-the-additional-holographiccamera-render-in-unreal"></a><span data-ttu-id="15344-157">Обработка дополнительной визуализации Холографиккамера в нереальном режиме</span><span class="sxs-lookup"><span data-stu-id="15344-157">Handle the additional HolographicCamera render in Unreal</span></span>

<span data-ttu-id="15344-158">Это делается автоматически в нереальном режиме.</span><span class="sxs-lookup"><span data-stu-id="15344-158">This is done for you automatically by Unreal.</span></span>

##### <a name="verify-shaders-and-code-support-additional-cameras"></a><span data-ttu-id="15344-159">Проверка возможности поддержки шейдеров и кода дополнительных камер</span><span class="sxs-lookup"><span data-stu-id="15344-159">Verify shaders and code support additional cameras</span></span>

<span data-ttu-id="15344-160">Запустите запись смешанной реальности и проверьте необычное выравнивание, отсутствие содержимого или проблемы с производительностью.</span><span class="sxs-lookup"><span data-stu-id="15344-160">Run a mixed reality capture and check for unusual alignment, missing content, or performance issues.</span></span> <span data-ttu-id="15344-161">Обновите шейдеры и код соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="15344-161">Update shaders and code as appropriate.</span></span>

<span data-ttu-id="15344-162">Если в некоторых сценах не поддерживается отрисовка на дополнительную камеру, можно отключить Холографиквиевконфигуратион Фотовидеокамера.</span><span class="sxs-lookup"><span data-stu-id="15344-162">If there are certain scenes that can't support rendering to an additional camera, you can disable the PhotoVideoCamera's HolographicViewConfiguration.</span></span>

### <a name="disabling-mrc-in-your-app"></a><span data-ttu-id="15344-163">Отключение нормативных требований в приложении</span><span class="sxs-lookup"><span data-stu-id="15344-163">Disabling MRC in your app</span></span>

#### <a name="2d-app"></a><span data-ttu-id="15344-164">2D-приложение</span><span class="sxs-lookup"><span data-stu-id="15344-164">2D app</span></span>

<span data-ttu-id="15344-165">При выполнении записи смешанной реальности 2D-приложения могут закрывать свое визуальное содержимое:</span><span class="sxs-lookup"><span data-stu-id="15344-165">2D apps can choose to have their visual content obscured when mixed reality capture is running by:</span></span>
* <span data-ttu-id="15344-166">Присутствие с флагом [DXGI_PRESENT_RESTRICT_TO_OUTPUT](/windows/desktop/direct3ddxgi/dxgi-present)</span><span class="sxs-lookup"><span data-stu-id="15344-166">Present with the [DXGI_PRESENT_RESTRICT_TO_OUTPUT](/windows/desktop/direct3ddxgi/dxgi-present) flag</span></span>
* <span data-ttu-id="15344-167">Создание цепочки подкачки приложения с помощью флага [DXGI_SWAP_CHAIN_FLAG_HW_PROTECTED](/windows/desktop/api/dxgi/ne-dxgi-dxgi_swap_chain_flag)</span><span class="sxs-lookup"><span data-stu-id="15344-167">Create the app's swap chain with the [DXGI_SWAP_CHAIN_FLAG_HW_PROTECTED](/windows/desktop/api/dxgi/ne-dxgi-dxgi_swap_chain_flag) flag</span></span>
* <span data-ttu-id="15344-168">С обновлением Windows 10 2019 можно установить параметр [Исскринкаптуринаблед](/uwp/api/windows.ui.viewmanagement.applicationview.isscreencaptureenabled) аппликатионвиев</span><span class="sxs-lookup"><span data-stu-id="15344-168">With the Windows 10 May 2019 Update, setting ApplicationView's [IsScreenCaptureEnabled](/uwp/api/windows.ui.viewmanagement.applicationview.isscreencaptureenabled)</span></span>

#### <a name="immersive-app"></a><span data-ttu-id="15344-169">Иммерсивное приложение</span><span class="sxs-lookup"><span data-stu-id="15344-169">Immersive app</span></span>

<span data-ttu-id="15344-170">В иммерсивное приложение может быть исключено из захвата смешанной реальности, чтобы исключить их визуальное содержимое:</span><span class="sxs-lookup"><span data-stu-id="15344-170">Immersive apps can choose to have their visual content excluded from mixed reality capture by:</span></span>
* <span data-ttu-id="15344-171">Настройка [Исконтентпротектионенаблед](/uwp/api/windows.graphics.holographic.holographiccamerarenderingparameters.iscontentprotectionenabled) холографиккамерарендерингпараметер для отключения захвата смешанной реальности для соответствующего кадра</span><span class="sxs-lookup"><span data-stu-id="15344-171">Setting HolographicCameraRenderingParameter's [IsContentProtectionEnabled](/uwp/api/windows.graphics.holographic.holographiccamerarenderingparameters.iscontentprotectionenabled) to disable mixed reality capture for its associated frame</span></span>
* <span data-ttu-id="15344-172">Настройка [Ишардвареконтентпротектионенаблед](/uwp/api/windows.graphics.holographic.holographiccamera.ishardwarecontentprotectionenabled) холографиккамера для отключения захвата смешанной реальности для связанной с ним камеры holographic</span><span class="sxs-lookup"><span data-stu-id="15344-172">Setting HolographicCamera's [IsHardwareContentProtectionEnabled](/uwp/api/windows.graphics.holographic.holographiccamera.ishardwarecontentprotectionenabled) to disable mixed reality capture for its associated holographic camera</span></span>

#### <a name="password-keyboard"></a><span data-ttu-id="15344-173">Клавиатура с паролем</span><span class="sxs-lookup"><span data-stu-id="15344-173">Password Keyboard</span></span>

<span data-ttu-id="15344-174">В случае обновления Windows 10 2019, визуальное содержимое автоматически исключается из записи смешанной реальности, когда отображается пароль или закрепление клавиатуры.</span><span class="sxs-lookup"><span data-stu-id="15344-174">With the Windows 10 May 2019 Update, visual content is automatically excluded from mixed reality capture when a password or pin keyboard is visible.</span></span>

### <a name="knowing-when-mrc-is-active"></a><span data-ttu-id="15344-175">Знание того, когда активна НОРМАТИВная информация</span><span class="sxs-lookup"><span data-stu-id="15344-175">Knowing when MRC is active</span></span>

<span data-ttu-id="15344-176">Класс [аппкаптуре](/uwp/api/Windows.Media.Capture.AppCapture) может использоваться приложением для получения сведений о том, когда работает запись системы в смешанной реальности (для аудио или видео).</span><span class="sxs-lookup"><span data-stu-id="15344-176">The [AppCapture](/uwp/api/Windows.Media.Capture.AppCapture) class can be used by an app to know when system mixed reality capture is running (for either audio or video).</span></span>

>[!NOTE]
><span data-ttu-id="15344-177">API [Жетфоркуррентвиев](/uwp/api/windows.media.capture.appcapture.getforcurrentview) аппкаптуре может вернуть значение null, если запись смешанной реальности недоступна на устройстве.</span><span class="sxs-lookup"><span data-stu-id="15344-177">AppCapture's [GetForCurrentView](/uwp/api/windows.media.capture.appcapture.getforcurrentview) API can return null if mixed reality capture isn't available on the device.</span></span> <span data-ttu-id="15344-178">Также важно отменить регистрацию события Каптурингчанжед, когда приложение приостанавливается, в противном случае НОРМАТИВное состояние может стать заблокированным.</span><span class="sxs-lookup"><span data-stu-id="15344-178">It's also important to de-register the CapturingChanged event when your app is suspended, otherwise MRC can get into a blocked state.</span></span>

### <a name="best-practices-hololens-specific"></a><span data-ttu-id="15344-179">Рекомендации (только для HoloLens)</span><span class="sxs-lookup"><span data-stu-id="15344-179">Best practices (HoloLens-specific)</span></span>

<span data-ttu-id="15344-180">НОРМАТИВная версия должна работать без дополнительных усилий по разработке, но есть несколько моментов, которые следует учитывать при обеспечении наилучшего захвата смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="15344-180">MRC is expected to work without additional development effort, but there are a few things to be aware of when providing the best mixed reality capture experience.</span></span>

<span data-ttu-id="15344-181">**НОРМАТИВный номер использует альфа-канал голограммы для смешения с изображением [камеры](locatable-camera.md)**</span><span class="sxs-lookup"><span data-stu-id="15344-181">**MRC uses the hologram’s alpha channel to blend with the [camera](locatable-camera.md) imagery**</span></span>

<span data-ttu-id="15344-182">Самый важный шаг — сделать так, чтобы приложение было очищено до прозрачного черного, а не для снятия непрозрачного черного цвета.</span><span class="sxs-lookup"><span data-stu-id="15344-182">The most important step is to make sure your app is clearing to transparent black instead of clearing to opaque black.</span></span> <span data-ttu-id="15344-183">В Unity это выполняется по умолчанию с помощью Микседреалититулкит.</span><span class="sxs-lookup"><span data-stu-id="15344-183">In Unity, this is done by default with the MixedRealityToolkit.</span></span> <span data-ttu-id="15344-184">При разработке в не Unity может потребоваться изменить одну строку.</span><span class="sxs-lookup"><span data-stu-id="15344-184">If you're developing in non-Unity, you may need to make a one line change.</span></span>

<span data-ttu-id="15344-185">Ниже приведены некоторые артефакты, которые вы можете увидеть в НОРМАТИВе, если ваше приложение не очищается до прозрачного черного:</span><span class="sxs-lookup"><span data-stu-id="15344-185">Here are some of the artifacts you might see in MRC if your app isn't clearing to transparent black:</span></span>

<span data-ttu-id="15344-186">**Примеры сбоев**: черные границы вокруг содержимого (не удается очистить до прозрачного черного)</span><span class="sxs-lookup"><span data-stu-id="15344-186">**Example Failures**: Black edges around the content (failing to clear to transparent black)</span></span>

<table>
<tr>
<td>
<img src="images/chessboardblackedges-300px.jpg" alt="Failure to clear to transparent black: black edge artifacts around holograms"/>
</td>
<td>
<img src="images/fieldblackedges-300px.jpg" alt="Failing to clear to transparent black: black edge artifacts around holograms"/>
</td>
</tr>
</table>

<span data-ttu-id="15344-187">**Примеры сбоев**. вся фоновая сцена голограммы отображается черным цветом.</span><span class="sxs-lookup"><span data-stu-id="15344-187">**Example Failures**: The entire background scene of the hologram appears black.</span></span> <span data-ttu-id="15344-188">Установка альфа-значения фона для одного результата на черном фоне</span><span class="sxs-lookup"><span data-stu-id="15344-188">Setting a background alpha value of one results in a black background</span></span>

![Установка альфа-значения фона 1 приведет к черному фону](images/clearopaqueblack-300px.png)

<span data-ttu-id="15344-190">**Ожидаемый результат**: голограммы правильно смешиваются с реальным (ожидаемый результат при снятии на прозрачный черный цвет).</span><span class="sxs-lookup"><span data-stu-id="15344-190">**Expected Result**: Holograms appear properly blended with the real-world (expected result if clearing to transparent black)</span></span>

![Ожидаемый результат при очистке на прозрачный черный](images/cleartransparentblack-300px.png)

<span data-ttu-id="15344-192">**Решение**</span><span class="sxs-lookup"><span data-stu-id="15344-192">**Solution**:</span></span>
* <span data-ttu-id="15344-193">Измените любое содержимое, которое отображается как непрозрачный черный, для альфа-значения 0.</span><span class="sxs-lookup"><span data-stu-id="15344-193">Change any content that is showing up as opaque black to have an alpha value of 0.</span></span>
* <span data-ttu-id="15344-194">Убедитесь, что приложение очищено до прозрачного черного.</span><span class="sxs-lookup"><span data-stu-id="15344-194">Ensure that the app is clearing to transparent black.</span></span>
* <span data-ttu-id="15344-195">Unity по умолчанию автоматически очищается с помощью Микседреалититулкит, но если это приложение, отличное от Unity, необходимо изменить цвет, используемый с ID3D11DeiceContext:: Клеаррендертаржетвиев ().</span><span class="sxs-lookup"><span data-stu-id="15344-195">Unity defaults to clear automatically with the MixedRealityToolkit, but if it’s a non-Unity app you should modify the color used with ID3D11DeiceContext::ClearRenderTargetView().</span></span> <span data-ttu-id="15344-196">Необходимо убедиться, что для прозрачного черного (0, 0, 0, 0) вместо непрозрачного черного (0, 0, 0, 1).</span><span class="sxs-lookup"><span data-stu-id="15344-196">You want to ensure you clear to transparent black (0,0,0,0) instead of opaque black (0,0,0,1).</span></span>

<span data-ttu-id="15344-197">Теперь при желании можно настроить альфа-значения ресурсов, но обычно это не требуется.</span><span class="sxs-lookup"><span data-stu-id="15344-197">You can now tune the alpha values of your assets if you’d like, but typically don’t need to.</span></span> <span data-ttu-id="15344-198">В большинстве случаев МРКС будет выглядеть нормально.</span><span class="sxs-lookup"><span data-stu-id="15344-198">Most of the time, MRCs will look good out of the box.</span></span> <span data-ttu-id="15344-199">НОРМАТИВная версия предполагает предварительное умножение альфа-канала.</span><span class="sxs-lookup"><span data-stu-id="15344-199">MRC assumes pre-multiplied alpha.</span></span> <span data-ttu-id="15344-200">Альфа-значения будут влиять только на запись в отношении нормативных требований.</span><span class="sxs-lookup"><span data-stu-id="15344-200">The alpha values will only affect the MRC capture.</span></span>

### <a name="what-to-expect-when-mrc-is-enabled-on-hololens"></a><span data-ttu-id="15344-201">Что должно происходить при включении требований к HoloLens</span><span class="sxs-lookup"><span data-stu-id="15344-201">What to expect when MRC is enabled on HoloLens</span></span>

<span data-ttu-id="15344-202">Следующее относится к HoloLens (First-Generation) и HoloLens 2, если не указано иное.</span><span class="sxs-lookup"><span data-stu-id="15344-202">The following apply to both HoloLens (first-generation) and HoloLens 2, unless otherwise noted:</span></span>

* <span data-ttu-id="15344-203">Система выполняет регулирование приложения до 30 Гц.</span><span class="sxs-lookup"><span data-stu-id="15344-203">The system will throttle the application to 30-Hz rendering.</span></span> <span data-ttu-id="15344-204">Это создает некоторый запас для выполнения нормативных требований, поэтому приложению не нужно поддерживать постоянный запас бюджета, а также соответствует частоте записи видео о НОРМАТИВе в 30 кадров/с</span><span class="sxs-lookup"><span data-stu-id="15344-204">This creates some headroom for MRC to run so the app doesn’t need to keep a constant budget reserve and also matches the MRC video record framerate of 30 fps</span></span>
* <span data-ttu-id="15344-205">Содержимое голограммы в правильном глазе устройства может выглядеть как "живы" при соблюдении требований к записи/потоковой передаче: текст может стать более трудным для чтения, а голограмма могут показаться более Жагги (при включении в третью камеру визуализация в **HoloLens 2** позволяет избежать этого компромисса).</span><span class="sxs-lookup"><span data-stu-id="15344-205">Hologram content in the right eye of the device may appear to “sparkle” when recording/streaming MRC: text may become more difficult to read and hologram edges may appear more jaggy (opting in to third camera render on **HoloLens 2** avoids this compromise)</span></span>
* <span data-ttu-id="15344-206">Если приложение включено, фотографии и видеоролики с соблюдением требований к приложению будут учитываться в [фокусе](../unity/focus-point-in-unity.md) приложения, что поможет обеспечить точное позиционирование голограмм.</span><span class="sxs-lookup"><span data-stu-id="15344-206">MRC photos and videos will respect the application’s [focus point](../unity/focus-point-in-unity.md) if the application has enabled it, which will help ensure holograms are accurately positioned.</span></span> <span data-ttu-id="15344-207">В случае с видеоматериалами точка фокусировки сглаженна, поэтому голограммы могут показаться медленно переводиться при значительном изменении глубины точки фокусировки.</span><span class="sxs-lookup"><span data-stu-id="15344-207">For videos, the Focus Point is smoothed so holograms may appear to slowly drift into place if the Focus Point depth changes significantly.</span></span> <span data-ttu-id="15344-208">Голограммы, имеющие разную глубину от точки фокусировки, могут быть смещены от реального мира (см. пример ниже, где точка фокусировки установлена на 2 метрах, а голограмма находится на 1 метре).</span><span class="sxs-lookup"><span data-stu-id="15344-208">Holograms that are at different depths from the focus point may appear offset from the real world (see example below where Focus Point is set at 2 meters but hologram is positioned at 1 meter).</span></span>

![Голограммы на 2 метрах будут полностью зарегистрированы в мире.](images/hologramaccuracydistancemrc-1000px.png)

## <a name="integrating-mrc-functionality-from-within-your-app"></a><span data-ttu-id="15344-211">Интеграция функций нормативных требований из приложения</span><span class="sxs-lookup"><span data-stu-id="15344-211">Integrating MRC functionality from within your app</span></span>

<span data-ttu-id="15344-212">Приложение "смешанная реальность" может начать захватывать фотографии или видео в приложении, а захваченное содержимое становится доступным для вашего приложения без сохранения в "рулоне камеры" устройства.</span><span class="sxs-lookup"><span data-stu-id="15344-212">Your mixed reality app can start MRC photo or video capture from within the app, and the content captured is made available to your app without being stored to the device's "Camera roll."</span></span> <span data-ttu-id="15344-213">Вы можете создать настраиваемый набор средств записи или воспользоваться встроенным ИНТЕРФЕЙСом для захвата камеры.</span><span class="sxs-lookup"><span data-stu-id="15344-213">You can create a custom MRC recorder or take advantage of built-in camera capture UI.</span></span> 

### <a name="mrc-with-built-in-camera-ui"></a><span data-ttu-id="15344-214">НОРМАТИВ с помощью встроенного пользовательского интерфейса камеры</span><span class="sxs-lookup"><span data-stu-id="15344-214">MRC with built-in camera UI</span></span>

<span data-ttu-id="15344-215">Разработчики могут использовать *[API пользовательского интерфейса для записи камеры](/windows/uwp/audio-video-camera/capture-photos-and-video-with-cameracaptureui)* , чтобы получить записанную пользователем фотографию или видео смешанной реальности с помощью всего нескольких строк кода.</span><span class="sxs-lookup"><span data-stu-id="15344-215">Developers can use the *[Camera Capture UI API](/windows/uwp/audio-video-camera/capture-photos-and-video-with-cameracaptureui)* to get a user-captured mixed reality photo or video with just a few lines of code.</span></span>

<span data-ttu-id="15344-216">Этот API запускает встроенный интерфейс для камеры с соблюдением требований, где пользователи могут взять фотографию или видео и возвратить полученную запись в приложение.</span><span class="sxs-lookup"><span data-stu-id="15344-216">This API launches the built-in MRC camera UI where users can take a photo or video and returns the resulting capture to your app.</span></span> <span data-ttu-id="15344-217">Вы можете создать настраиваемый набор записей для записи смешанной реальности, если вам нужно добавить пользовательский интерфейс камеры или доступ на более низком уровне для записи потоков.</span><span class="sxs-lookup"><span data-stu-id="15344-217">You can create a custom Mixed Reality Capture recorder if you need to add your own camera UI or lower-level access to capture streams.</span></span>

### <a name="creating-a-custom-mrc-recorder"></a><span data-ttu-id="15344-218">Создание пользовательского средства записи пользовательских нормативных требований</span><span class="sxs-lookup"><span data-stu-id="15344-218">Creating a custom MRC recorder</span></span>

<span data-ttu-id="15344-219">Хотя пользователь всегда может запускать фотографию или видео с помощью службы записи системных требований, приложение может захотеть создать пользовательское приложение для камеры, включающее голограммы в потоке камеры, как и в случае с соблюдением требований.</span><span class="sxs-lookup"><span data-stu-id="15344-219">While the user can always trigger a photo or video using the system MRC capture service, an application may want to build a custom camera app that include holograms in the camera stream just like MRC.</span></span> <span data-ttu-id="15344-220">Это позволяет приложению запускать записи из пользовательского ввода, создавать пользовательский пользовательский интерфейс записи или настраивать параметры пользователя, чтобы присвоить несколько примеров.</span><span class="sxs-lookup"><span data-stu-id="15344-220">This allows the application to kick off captures from user input, build custom recording UI, or customize MRC settings to name a few examples.</span></span>

<span data-ttu-id="15344-221">**Холостудио добавляет настраиваемую биокамеру, используя эффекты нормативных требований**</span><span class="sxs-lookup"><span data-stu-id="15344-221">**HoloStudio adds a custom MRC camera using MRC effects**</span></span>

![Холостудио добавляет настраиваемую биокамеру, используя эффекты нормативных требований](images/cameraiconholostudio-300px.jpg)

<span data-ttu-id="15344-223">Приложения Unity должны увидеть [Locatable_camera_in_Unity](../unity/locatable-camera-in-unity.md) для свойства, чтобы включить голограммы.</span><span class="sxs-lookup"><span data-stu-id="15344-223">Unity Applications should see [Locatable_camera_in_Unity](../unity/locatable-camera-in-unity.md) for the property to enable holograms.</span></span>

<span data-ttu-id="15344-224">Другие приложения могут сделать это с помощью [API-интерфейсов захвата Windows Media](/uwp/api/Windows.Media.Capture.MediaCapture) для управления камерой и добавления видео и звуковых эффектов с соблюдением требований, чтобы включить виртуальные голограммы и звук приложения в все еще и видео.</span><span class="sxs-lookup"><span data-stu-id="15344-224">Other applications can do this by using the [Windows Media Capture APIs](/uwp/api/Windows.Media.Capture.MediaCapture) to control the Camera and add an MRC Video and Audio effect to include virtual holograms and application audio in stills and videos.</span></span>

<span data-ttu-id="15344-225">У приложений есть два варианта добавления этого результата:</span><span class="sxs-lookup"><span data-stu-id="15344-225">Applications have two options to add the effect:</span></span>
* <span data-ttu-id="15344-226">Старый API: [Windows. Media. Capture. медиакаптуре. аддеффектасинк ()](/uwp/api/windows.media.capture.mediacapture.addeffectasync)</span><span class="sxs-lookup"><span data-stu-id="15344-226">The older API: [Windows.Media.Capture.MediaCapture.AddEffectAsync()](/uwp/api/windows.media.capture.mediacapture.addeffectasync)</span></span>
* <span data-ttu-id="15344-227">Новый рекомендуемый API Майкрософт (Возвращает объект, позволяющий управлять динамическими свойствами): [Windows. Media. Capture. медиакаптуре. аддвидеоеффектасинк ()](/uwp/api/windows.media.capture.mediacapture.addvideoeffectasync)  /  [Windows. Media. Capture. медиакаптуре. аддаудиоеффектасинк ()](/uwp/api/windows.media.capture.mediacapture.addaudioeffectasync) , требующий, чтобы приложение создали собственную реализацию [ивидеоеффектдефинитион](/uwp/api/Windows.Media.Effects.IVideoEffectDefinition) и [IAudioEffectDefinition](/uwp/api/windows.media.effects.iaudioeffectdefinition).</span><span class="sxs-lookup"><span data-stu-id="15344-227">The new Microsoft recommended API (returns an object, making it possible to manipulate dynamic properties): [Windows.Media.Capture.MediaCapture.AddVideoEffectAsync()](/uwp/api/windows.media.capture.mediacapture.addvideoeffectasync) / [Windows.Media.Capture.MediaCapture.AddAudioEffectAsync()](/uwp/api/windows.media.capture.mediacapture.addaudioeffectasync) which require the app create its own implementation of [IVideoEffectDefinition](/uwp/api/Windows.Media.Effects.IVideoEffectDefinition) and [IAudioEffectDefinition](/uwp/api/windows.media.effects.iaudioeffectdefinition).</span></span> <span data-ttu-id="15344-228">Примеры см. в [примере приложения нормативных требований](https://github.com/microsoft/Windows-universal-samples/tree/master/Samples/HolographicMixedRealityCapture) .</span><span class="sxs-lookup"><span data-stu-id="15344-228">See the [MRC sample app](https://github.com/microsoft/Windows-universal-samples/tree/master/Samples/HolographicMixedRealityCapture) for examples.</span></span>

>[!NOTE]
> <span data-ttu-id="15344-229">Пространство имен Windows. Media. Микседреалитикаптуре не будет распознано в Visual Studio, но строки остаются действительными.</span><span class="sxs-lookup"><span data-stu-id="15344-229">The Windows.Media.MixedRealityCapture namespace will not be recognized by Visual Studio, but the strings are still valid.</span></span>

<span data-ttu-id="15344-230">Воздействие на видео с нормативными материалами (**Windows. Media. микседреалитикаптуре. микседреалитикаптуревидеоеффект**)</span><span class="sxs-lookup"><span data-stu-id="15344-230">MRC Video Effect (**Windows.Media.MixedRealityCapture.MixedRealityCaptureVideoEffect**)</span></span>

|  <span data-ttu-id="15344-231">Имя свойства</span><span class="sxs-lookup"><span data-stu-id="15344-231">Property Name</span></span>  |  <span data-ttu-id="15344-232">Type</span><span class="sxs-lookup"><span data-stu-id="15344-232">Type</span></span>  |  <span data-ttu-id="15344-233">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="15344-233">Default Value</span></span>  |  <span data-ttu-id="15344-234">Описание</span><span class="sxs-lookup"><span data-stu-id="15344-234">Description</span></span> |
|----------|----------|----------|----------|
|  <span data-ttu-id="15344-235">StreamType</span><span class="sxs-lookup"><span data-stu-id="15344-235">StreamType</span></span>  |  <span data-ttu-id="15344-236">UINT32 ([медиастреамтипе](/uwp/api/Windows.Media.Capture.MediaStreamType))</span><span class="sxs-lookup"><span data-stu-id="15344-236">UINT32 ([MediaStreamType](/uwp/api/Windows.Media.Capture.MediaStreamType))</span></span>  |  <span data-ttu-id="15344-237">1 (Видеорекорд)</span><span class="sxs-lookup"><span data-stu-id="15344-237">1 (VideoRecord)</span></span>  |  <span data-ttu-id="15344-238">Опишите поток отслеживания, для которого используется этот результат.</span><span class="sxs-lookup"><span data-stu-id="15344-238">Describe which capture stream this effect is used for.</span></span> <span data-ttu-id="15344-239">Звук недоступен.</span><span class="sxs-lookup"><span data-stu-id="15344-239">Audio isn't available.</span></span> |
|  <span data-ttu-id="15344-240">холограмкомпоситионенаблед</span><span class="sxs-lookup"><span data-stu-id="15344-240">HologramCompositionEnabled</span></span>  |  <span data-ttu-id="15344-241">Логическое</span><span class="sxs-lookup"><span data-stu-id="15344-241">boolean</span></span>  |  <span data-ttu-id="15344-242">true</span><span class="sxs-lookup"><span data-stu-id="15344-242">TRUE</span></span>  |  <span data-ttu-id="15344-243">Флаг для включения или отключения голограмм в видеозаписи.</span><span class="sxs-lookup"><span data-stu-id="15344-243">Flag to enable or disable holograms in video capture.</span></span> |
|  <span data-ttu-id="15344-244">рекордингиндикаторенаблед</span><span class="sxs-lookup"><span data-stu-id="15344-244">RecordingIndicatorEnabled</span></span>  |  <span data-ttu-id="15344-245">Логическое</span><span class="sxs-lookup"><span data-stu-id="15344-245">boolean</span></span>  |  <span data-ttu-id="15344-246">true</span><span class="sxs-lookup"><span data-stu-id="15344-246">TRUE</span></span>  |  <span data-ttu-id="15344-247">Флаг для включения или отключения индикатора записи на экране во время записи голограммы.</span><span class="sxs-lookup"><span data-stu-id="15344-247">Flag to enable or disable recording indicator on screen during hologram capturing.</span></span> |
|  <span data-ttu-id="15344-248">видеостабилизатионенаблед</span><span class="sxs-lookup"><span data-stu-id="15344-248">VideoStabilizationEnabled</span></span>  |  <span data-ttu-id="15344-249">Логическое</span><span class="sxs-lookup"><span data-stu-id="15344-249">boolean</span></span>  |  <span data-ttu-id="15344-250">FALSE</span><span class="sxs-lookup"><span data-stu-id="15344-250">FALSE</span></span>  |  <span data-ttu-id="15344-251">Флаг, позволяющий включать или отключать видео стабилизации, включенные в средство регистрации HoloLens.</span><span class="sxs-lookup"><span data-stu-id="15344-251">Flag to enable or disable video stabilization powered by the HoloLens tracker.</span></span> |
|  <span data-ttu-id="15344-252">видеостабилизатионбуфферленгс</span><span class="sxs-lookup"><span data-stu-id="15344-252">VideoStabilizationBufferLength</span></span>  |  <span data-ttu-id="15344-253">ЗНАЧЕНИЕМ</span><span class="sxs-lookup"><span data-stu-id="15344-253">UINT32</span></span>  |  <span data-ttu-id="15344-254">0</span><span class="sxs-lookup"><span data-stu-id="15344-254">0</span></span>  |  <span data-ttu-id="15344-255">Укажите, сколько кадров с предысторией используется для видео стабилизации.</span><span class="sxs-lookup"><span data-stu-id="15344-255">Set how many historical frames are used for video stabilization.</span></span> <span data-ttu-id="15344-256">0 — это 0-задержка и почти "бесплатная" с точки зрения мощности и производительности.</span><span class="sxs-lookup"><span data-stu-id="15344-256">0 is 0-latency and nearly "free" from a power and performance perspective.</span></span> <span data-ttu-id="15344-257">15 рекомендуется использовать для наивысшего качества (за счет 15 кадров задержки и памяти).</span><span class="sxs-lookup"><span data-stu-id="15344-257">15 is recommended for highest quality (at the cost of 15 frames of latency and memory).</span></span> |
|  <span data-ttu-id="15344-258">глобалопаЦитикоеффиЦиент</span><span class="sxs-lookup"><span data-stu-id="15344-258">GlobalOpacityCoefficient</span></span>  |  <span data-ttu-id="15344-259">FLOAT</span><span class="sxs-lookup"><span data-stu-id="15344-259">float</span></span>  |  <span data-ttu-id="15344-260">0,9 (HoloLens) 1,0 (иммерсивное головной телефон)</span><span class="sxs-lookup"><span data-stu-id="15344-260">0.9 (HoloLens) 1.0 (Immersive headset)</span></span>  |  <span data-ttu-id="15344-261">Установите коэффициент глобальной прозрачности для голограммы в диапазоне от 0,0 (полностью прозрачный) до 1,0 (полностью непрозрачный).</span><span class="sxs-lookup"><span data-stu-id="15344-261">Set global opacity coefficient of hologram in range from 0.0 (fully transparent) to 1.0 (fully opaque).</span></span> |
|  <span data-ttu-id="15344-262">бланконпротектедконтент</span><span class="sxs-lookup"><span data-stu-id="15344-262">BlankOnProtectedContent</span></span>  |  <span data-ttu-id="15344-263">Логическое</span><span class="sxs-lookup"><span data-stu-id="15344-263">boolean</span></span>  |  <span data-ttu-id="15344-264">FALSE</span><span class="sxs-lookup"><span data-stu-id="15344-264">FALSE</span></span>  |  <span data-ttu-id="15344-265">Установите флаг, чтобы включить или отключить возврат пустого кадра, если имеется 2D-приложение UWP, показывающее защищенное содержимое.</span><span class="sxs-lookup"><span data-stu-id="15344-265">Flag to enable or disable returning an empty frame if there's a 2d UWP app showing protected content.</span></span> <span data-ttu-id="15344-266">Если этот флаг имеет значение false, а двухмерная приложение UWP отображает защищенное содержимое, то 2D-приложение UWP будет заменено защищенной текстурой содержимого как на гарнитуре, так и в записи смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="15344-266">If this flag is false and a 2d UWP app is showing protected content, the 2d UWP app will be replaced by a protected content texture in both the headset and in the mixed reality capture.</span></span> |
|  <span data-ttu-id="15344-267">шовхидденмеш</span><span class="sxs-lookup"><span data-stu-id="15344-267">ShowHiddenMesh</span></span>  |  <span data-ttu-id="15344-268">Логическое</span><span class="sxs-lookup"><span data-stu-id="15344-268">boolean</span></span>  |  <span data-ttu-id="15344-269">FALSE</span><span class="sxs-lookup"><span data-stu-id="15344-269">FALSE</span></span>  |  <span data-ttu-id="15344-270">Флаг для включения или отключения отображения скрытой сетки областей и соседнего содержимого камеры Holographic.</span><span class="sxs-lookup"><span data-stu-id="15344-270">Flag to enable or disable showing the holographic camera's hidden area mesh and neighboring content.</span></span> |
| <span data-ttu-id="15344-271">аутпутсизе</span><span class="sxs-lookup"><span data-stu-id="15344-271">OutputSize</span></span> | <span data-ttu-id="15344-272">Размер</span><span class="sxs-lookup"><span data-stu-id="15344-272">Size</span></span> | <span data-ttu-id="15344-273">0, 0</span><span class="sxs-lookup"><span data-stu-id="15344-273">0, 0</span></span> | <span data-ttu-id="15344-274">Задайте желаемый размер выходных данных после кадрирования для видео стабилизации.</span><span class="sxs-lookup"><span data-stu-id="15344-274">Set the desired output size after cropping for video stabilization.</span></span> <span data-ttu-id="15344-275">Размер кадрирования по умолчанию выбирается, если задано значение 0 или указан недопустимый размер выходных данных.</span><span class="sxs-lookup"><span data-stu-id="15344-275">A default crop size is chosen if 0 or an invalid output size is specified.</span></span> |
| <span data-ttu-id="15344-276">преферредхолограмперспективе</span><span class="sxs-lookup"><span data-stu-id="15344-276">PreferredHologramPerspective</span></span> | <span data-ttu-id="15344-277">ЗНАЧЕНИЕМ</span><span class="sxs-lookup"><span data-stu-id="15344-277">UINT32</span></span> | <span data-ttu-id="15344-278">**Отображение параметров камеры** на портале устройств Windows</span><span class="sxs-lookup"><span data-stu-id="15344-278">**Render from Camera** setting in the Windows Device Portal</span></span> | <span data-ttu-id="15344-279">Перечисление, используемое для указания того, какую конфигурацию представления с помощью камеры holographic следует записать: 0 (дисплей) означает, что приложение не будет запрашивать отрисовку из фото-или видеокамеры, 1 (Фотовидеокамера) запросит приложение подготовиться к просмотру из фотографии или видеокамеры (если оно поддерживается приложением).</span><span class="sxs-lookup"><span data-stu-id="15344-279">Enum used to indicate which holographic camera view configuration should be captured: 0 (Display) means that the app won't be asked to render from the photo/video camera, 1 (PhotoVideoCamera) will ask the app to render from the photo/video camera (if the app supports it).</span></span> <span data-ttu-id="15344-280">Поддерживается только в HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="15344-280">Only supported on HoloLens 2</span></span> |

>[!NOTE]
> <span data-ttu-id="15344-281">Вы можете изменить значение по умолчанию **преферредхолограмперспективе** на портале устройств Windows, перейдя на [страницу записи смешанной реальности](using-the-windows-device-portal.md#mixed-reality-capture) и отменив отметку **с камеры**.</span><span class="sxs-lookup"><span data-stu-id="15344-281">You can change the default value of **PreferredHologramPerspective** in the Windows Device Portal by going to the [Mixed Reality Capture page](using-the-windows-device-portal.md#mixed-reality-capture) and unchecking **Render from Camera**.</span></span> <span data-ttu-id="15344-282">Значение по умолчанию равно **1 (фотовидеокамера)**, но его можно снять, чтобы задать для него значение **0 (экран)**.</span><span class="sxs-lookup"><span data-stu-id="15344-282">The setting defaults to **1 (PhotoVideoCamera)**, but can be unchecked to set it to **0 (Display)**.</span></span>
>
> <span data-ttu-id="15344-283">Значение по умолчанию **преферредхолограмперспективе** было **0 (дисплей)** до обновления июня 2020 (windows holographic, версия 2004, сборка 19041,1106 и Windows holographic, версия 1903 Build 18362,1064).</span><span class="sxs-lookup"><span data-stu-id="15344-283">The default value of **PreferredHologramPerspective** was **0 (Display)** prior to the June 2020 update (Windows Holographic, version 2004 build 19041.1106 and Windows Holographic, version 1903 build 18362.1064).</span></span>

<span data-ttu-id="15344-284">НОРМАТИВный звуковой результат (**Windows. Media. микседреалитикаптуре. микседреалитикаптуреаудиоеффект**)</span><span class="sxs-lookup"><span data-stu-id="15344-284">MRC Audio Effect (**Windows.Media.MixedRealityCapture.MixedRealityCaptureAudioEffect**)</span></span>

| <span data-ttu-id="15344-285">Имя свойства</span><span class="sxs-lookup"><span data-stu-id="15344-285">Property Name</span></span> | <span data-ttu-id="15344-286">Type</span><span class="sxs-lookup"><span data-stu-id="15344-286">Type</span></span> | <span data-ttu-id="15344-287">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="15344-287">Default Value</span></span> | <span data-ttu-id="15344-288">Описание</span><span class="sxs-lookup"><span data-stu-id="15344-288">Description</span></span> |
|----------|----------|----------|----------|
| <span data-ttu-id="15344-289">миксермоде</span><span class="sxs-lookup"><span data-stu-id="15344-289">MixerMode</span></span> | <span data-ttu-id="15344-290">ЗНАЧЕНИЕМ</span><span class="sxs-lookup"><span data-stu-id="15344-290">UINT32</span></span> | <span data-ttu-id="15344-291">2 (MIC и системные аудио)</span><span class="sxs-lookup"><span data-stu-id="15344-291">2 (Mic and System audio)</span></span> | <span data-ttu-id="15344-292">Перечисление, используемое для указания того, какие источники звука следует использовать: 0 (только MIC Audio), 1 (только для системных аудио), 2 (MIC и системные аудио)</span><span class="sxs-lookup"><span data-stu-id="15344-292">Enum used to indicate which audio sources should be used: 0 (Mic audio only), 1 (System audio only), 2 (Mic and System audio)</span></span> |
| <span data-ttu-id="15344-293">лупбаккгаин</span><span class="sxs-lookup"><span data-stu-id="15344-293">LoopbackGain</span></span> | <span data-ttu-id="15344-294">FLOAT</span><span class="sxs-lookup"><span data-stu-id="15344-294">float</span></span> | <span data-ttu-id="15344-295">Настройка **усиления звука приложения** на портале устройств Windows</span><span class="sxs-lookup"><span data-stu-id="15344-295">**App Audio Gain** setting in the Windows Device Portal</span></span> | <span data-ttu-id="15344-296">Применить к системному звуковому тому.</span><span class="sxs-lookup"><span data-stu-id="15344-296">Gain to apply to system audio volume.</span></span> <span data-ttu-id="15344-297">Диапазон от 0,0 до 5,0.</span><span class="sxs-lookup"><span data-stu-id="15344-297">Ranges from 0.0 to 5.0.</span></span> <span data-ttu-id="15344-298">Поддерживается только в HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="15344-298">Only supported on HoloLens 2</span></span> |
| <span data-ttu-id="15344-299">микрофонегаин</span><span class="sxs-lookup"><span data-stu-id="15344-299">MicrophoneGain</span></span> | <span data-ttu-id="15344-300">FLOAT</span><span class="sxs-lookup"><span data-stu-id="15344-300">float</span></span> | <span data-ttu-id="15344-301">Параметр " **Усиление звука с микрофона** " на портале устройств Windows</span><span class="sxs-lookup"><span data-stu-id="15344-301">**Mic Audio Gain** setting in the Windows Device Portal</span></span> | <span data-ttu-id="15344-302">Примените к тому, чтобы применить микрофон.</span><span class="sxs-lookup"><span data-stu-id="15344-302">Gain to apply to mic volume.</span></span> <span data-ttu-id="15344-303">Диапазон от 0,0 до 5,0.</span><span class="sxs-lookup"><span data-stu-id="15344-303">Ranges from 0.0 to 5.0.</span></span> <span data-ttu-id="15344-304">Поддерживается только в HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="15344-304">Only supported on HoloLens 2</span></span> |

>[!NOTE]
> <span data-ttu-id="15344-305">Вы можете изменить значение по умолчанию **лупбаккгаин** или **микрофонегаин** на портале устройств Windows, перейдя на [страницу захвата смешанной реальности](using-the-windows-device-portal.md#mixed-reality-capture) и настроив ползунок рядом с соответствующими параметрами.</span><span class="sxs-lookup"><span data-stu-id="15344-305">You can change the default value of **LoopbackGain** or **MicrophoneGain** in the Windows Device Portal by going to the [Mixed Reality Capture page](using-the-windows-device-portal.md#mixed-reality-capture) and adjusting the slider next to their respective settings.</span></span> <span data-ttu-id="15344-306">Оба параметра по умолчанию имеют значение **1,0**, но могут быть установлены для любого значения в диапазоне от **0,0** до **5,0**.</span><span class="sxs-lookup"><span data-stu-id="15344-306">Both settings default to **1.0**, but can be set to any value between **0.0** and **5.0**.</span></span>
>
> <span data-ttu-id="15344-307">Использование портала устройств Windows для настройки значений усиления по умолчанию было добавлено в июне 2020 обновления (Windows holographic, версия 2004 сборка 19041,1106 и Windows holographic, версия 1903 Build 18362,1064).</span><span class="sxs-lookup"><span data-stu-id="15344-307">Using Windows Device Portal to configure the default gain values was added with the June 2020 update (Windows Holographic, version 2004 build 19041.1106 and Windows Holographic, version 1903 build 18362.1064).</span></span>

### <a name="simultaneous-mrc-limitations"></a><span data-ttu-id="15344-308">Ограничения на одновременное соблюдение требований</span><span class="sxs-lookup"><span data-stu-id="15344-308">Simultaneous MRC limitations</span></span>

<span data-ttu-id="15344-309">Необходимо иметь в виду некоторые ограничения, когда несколько приложений обращаются к НОРМАТИВным данным в одно и то же время.</span><span class="sxs-lookup"><span data-stu-id="15344-309">You need to be aware of certain limitations when multiple apps are accessing MRC at the same time.</span></span>

#### <a name="photovideo-camera-access"></a><span data-ttu-id="15344-310">Доступ к фото и видеокамере</span><span class="sxs-lookup"><span data-stu-id="15344-310">Photo/video camera access</span></span>

<span data-ttu-id="15344-311">В HoloLens 1 не удается записать фотографию или записать видео, пока процесс записывает видео или отправит фотографию.</span><span class="sxs-lookup"><span data-stu-id="15344-311">On HoloLens 1, MRC will fail to capture a photo or capture video while a process is recording video or taking a photo.</span></span> <span data-ttu-id="15344-312">Обратная попытка также имеет значение true: Если норматив работает, приложение не сможет получить доступ к камере.</span><span class="sxs-lookup"><span data-stu-id="15344-312">The reverse is also true: if MRC is running, the application will fail to get access to the camera.</span></span> 

<span data-ttu-id="15344-313">С помощью HoloLens 2 можно предоставить общий доступ к камере.</span><span class="sxs-lookup"><span data-stu-id="15344-313">With HoloLens 2, it's possible for you to share access to the camera.</span></span> <span data-ttu-id="15344-314">Если вам не требуется прямой контроль над разрешением или частотой кадров, можно инициализировать Медиакаптуре, используя [свойство шаредмоде](/uwp/api/windows.media.capture.mediacaptureinitializationsettings.sharingmode?view=winrt-19041) с шаредреадонли.</span><span class="sxs-lookup"><span data-stu-id="15344-314">If you don't need direct control of the resolution or frame-rate, you can initialize MediaCapture using the [SharedMode property](/uwp/api/windows.media.capture.mediacaptureinitializationsettings.sharingmode?view=winrt-19041) with SharedReadOnly.</span></span>  

##### <a name="built-in-mrc-photovideo-camera-access"></a><span data-ttu-id="15344-315">Встроенный доступ к фотографиям и видеокамере с соблюдением требований</span><span class="sxs-lookup"><span data-stu-id="15344-315">Built-in MRC photo/video camera access</span></span>

<span data-ttu-id="15344-316">Функции нормативных требований, встроенные в Windows 10 (с помощью Кортаны, меню "Пуск", ярлыков оборудования, Miracast, портала устройств Windows):</span><span class="sxs-lookup"><span data-stu-id="15344-316">MRC functionality built into Windows 10 (via Cortana, Start Menu, hardware shortcuts, Miracast, Windows Device Portal):</span></span>

* <span data-ttu-id="15344-317">Будет выполняться с Ексклусивеконтрол по умолчанию</span><span class="sxs-lookup"><span data-stu-id="15344-317">Will run with ExclusiveControl by default</span></span>

<span data-ttu-id="15344-318">Однако поддержка была добавлена в подсистему требований к работе в общем режиме:</span><span class="sxs-lookup"><span data-stu-id="15344-318">However, support has been added to MRC subsystem to operate in a shared mode:</span></span> 

* <span data-ttu-id="15344-319">Если приложение запрашивает Ексклусивеконтрол доступ к фото-и видеокамере, встроенная НОРМАТИВная плата автоматически прекращает использовать фото и видеокамеру, поэтому запрос приложения будет выполнен.</span><span class="sxs-lookup"><span data-stu-id="15344-319">If an app requests ExclusiveControl access to the photo/video camera, built-in MRC will automatically stop using the photo/video camera so the app's request will succeed</span></span> 
* <span data-ttu-id="15344-320">Если сборка с соблюдением нормативных требований запущена, когда приложение имеет Ексклусивеконтрол, встроенное НОРМАТИВное выражение будет работать в режиме Шаредреадонли</span><span class="sxs-lookup"><span data-stu-id="15344-320">If built in MRC is started while an app has ExclusiveControl, built-in MRC will run in SharedReadOnly mode</span></span> 

<span data-ttu-id="15344-321">Эта функция общего режима имеет определенные ограничения.</span><span class="sxs-lookup"><span data-stu-id="15344-321">This shared mode functionality has certain restrictions:</span></span>

* <span data-ttu-id="15344-322">Фото через Кортану, ярлыки оборудования или меню "Пуск": требуется обновление Windows 10 от апреля 2018 (или более поздней версии).</span><span class="sxs-lookup"><span data-stu-id="15344-322">Photo via Cortana, hardware shortcuts, or Start Menu: Requires the Windows 10 April 2018 Update (or later)</span></span>
* <span data-ttu-id="15344-323">Видео с помощью Кортаны, ярлыков оборудования или меню "Пуск": требуется обновление Windows 10 от апреля 2018 (или более поздней версии).</span><span class="sxs-lookup"><span data-stu-id="15344-323">Video via Cortana, hardware shortcuts, or Start Menu: Requires the Windows 10 April 2018 Update (or later)</span></span>
* <span data-ttu-id="15344-324">Потоковая передача требований по Miracast: требуется обновление Windows 10 октября 2018 (или более поздней версии).</span><span class="sxs-lookup"><span data-stu-id="15344-324">Streaming MRC over Miracast: Requires the Windows 10 October 2018 Update (or later)</span></span>
* <span data-ttu-id="15344-325">Потоковая передача требований с помощью портала устройств Windows или вспомогательного приложения HoloLens: требуется HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="15344-325">Streaming MRC over Windows Device Portal or via the HoloLens companion app: Requires HoloLens 2</span></span>

>[!NOTE]
> <span data-ttu-id="15344-326">Разрешение и частота кадров встроенного пользовательского интерфейса камеры с нормой электрооборудования может уменьшиться от обычных значений, когда другое приложение использует фото-или видеокамеру.</span><span class="sxs-lookup"><span data-stu-id="15344-326">The resolution and frame-rate of the built-in MRC camera UI might be reduced from its normal values when another app is using the photo/video camera.</span></span>

#### <a name="mrc-access-for-developers"></a><span data-ttu-id="15344-327">НОРМАТИВный доступ для разработчиков</span><span class="sxs-lookup"><span data-stu-id="15344-327">MRC access for developers</span></span>

<span data-ttu-id="15344-328">При использовании функции нормативных требований рекомендуется всегда запрашивать монопольный доступ к камере.</span><span class="sxs-lookup"><span data-stu-id="15344-328">We recommend you always request Exclusive control for the camera when using MRC.</span></span> <span data-ttu-id="15344-329">Это обеспечит приложению полный контроль над параметрами камеры при условии, что вы знаете об ограничениях, перечисленных выше.</span><span class="sxs-lookup"><span data-stu-id="15344-329">This will ensure your application has full control of the settings for the camera as long as you're aware of the limitations listed above.</span></span> 

* <span data-ttu-id="15344-330">Создание объекта записи мультимедиа с помощью [параметров инициализации](/uwp/api/windows.media.capture.mediacaptureinitializationsettings?view=winrt-19041)</span><span class="sxs-lookup"><span data-stu-id="15344-330">Create a media capture object using the [initialization settings](/uwp/api/windows.media.capture.mediacaptureinitializationsettings?view=winrt-19041)</span></span>
* <span data-ttu-id="15344-331">Установка свойства [шарингмоде](/uwp/api/windows.media.capture.mediacaptureinitializationsettings.sharingmode?view=winrt-19041#Windows_Media_Capture_MediaCaptureInitializationSettings_SharingMode) в **монопольном режиме**</span><span class="sxs-lookup"><span data-stu-id="15344-331">Set the [SharingMode](/uwp/api/windows.media.capture.mediacaptureinitializationsettings.sharingmode?view=winrt-19041#Windows_Media_Capture_MediaCaptureInitializationSettings_SharingMode) property to **exclusive**</span></span>

> [!CAUTION]
> <span data-ttu-id="15344-332">Прежде чем продолжить, внимательно прочтите [Примечания шарингмоде](/uwp/api/windows.media.capture.mediacaptureinitializationsettings.sharingmode?view=winrt-19041#remarks) .</span><span class="sxs-lookup"><span data-stu-id="15344-332">Be sure to carefully read the [SharingMode remarks](/uwp/api/windows.media.capture.mediacaptureinitializationsettings.sharingmode?view=winrt-19041#remarks) before continuing.</span></span>

* <span data-ttu-id="15344-333">Настройка камеры в нужном виде</span><span class="sxs-lookup"><span data-stu-id="15344-333">Set up your camera the way you want it</span></span>
* <span data-ttu-id="15344-334">Запустите приложение, запишите видеокадры с помощью API запуска, а затем включите НОРМАТИВную память.</span><span class="sxs-lookup"><span data-stu-id="15344-334">Start the app, capture video frames with the start API, then enable MRC</span></span>

> [!CAUTION]
> <span data-ttu-id="15344-335">Если вы запускаете функцию нормативных требований перед запуском приложения, мы не можем гарантировать, что функция будет работать должным образом.</span><span class="sxs-lookup"><span data-stu-id="15344-335">If you start MRC before you start your app, we can't guarantee the feature will work as expected.</span></span>

<span data-ttu-id="15344-336">Полный пример описанного выше процесса можно найти в [образце отслеживания с помощью holographic лиц](/samples/microsoft/windows-universal-samples/holographicfacetracking).</span><span class="sxs-lookup"><span data-stu-id="15344-336">You can find a full sample of the above process in the [holographic face tracking sample](/samples/microsoft/windows-universal-samples/holographicfacetracking).</span></span>

> [!NOTE]
> <span data-ttu-id="15344-337">До выхода обновления Windows 10 от апреля 2018 пользовательское средство записи пользовательских учетных записей взаимоисключающее с соблюдением нормативных требований системы (запись фотографий, запись видео или потоковая передача с портала устройств Windows).</span><span class="sxs-lookup"><span data-stu-id="15344-337">Before the Windows 10 April 2018 Update, an app's custom MRC recorder was mutually exclusive with system MRC (capturing photos, capturing videos, or streaming from the Windows Device Portal).</span></span>

## <a name="see-also"></a><span data-ttu-id="15344-338">См. также раздел</span><span class="sxs-lookup"><span data-stu-id="15344-338">See also</span></span>

* [<span data-ttu-id="15344-339">Смешанный захват реальности</span><span class="sxs-lookup"><span data-stu-id="15344-339">Mixed reality capture</span></span>](/hololens/holographic-photos-and-videos)
* [<span data-ttu-id="15344-340">Зрительское представление</span><span class="sxs-lookup"><span data-stu-id="15344-340">Spectator view</span></span>](spectator-view.md)
* [<span data-ttu-id="15344-341">Общие сведения о разработке Unity</span><span class="sxs-lookup"><span data-stu-id="15344-341">Unity Development Overview</span></span>](../unity/unity-development-overview.md)
* [<span data-ttu-id="15344-342">Обзор разработки для Unreal</span><span class="sxs-lookup"><span data-stu-id="15344-342">Unreal development overview</span></span>](../unreal/unreal-development-overview.md)
