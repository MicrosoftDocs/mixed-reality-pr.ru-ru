---
title: Использование XAML с голографическими приложениями DirectX
description: Объясняет влияние переключения между плоскими представлениями XAML и иммерсивное представлением в приложении DirectX, а также позволяет эффективно использовать представление XAML и режим погружения.
author: mikeriches
ms.author: mriches
ms.date: 08/04/2020
ms.topic: article
keywords: Windows Mixed Reality, UWP, Управление представлением приложений, XAML, клавиатура, пошаговое руководство, DirectX
ms.openlocfilehash: 4908ffbded879709c848a4d767c35a150aa3dfba
ms.sourcegitcommit: 09599b4034be825e4536eeb9566968afd021d5f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/03/2020
ms.locfileid: "91683379"
---
# <a name="using-xaml-with-holographic-directx-apps"></a><span data-ttu-id="6cbe3-104">Использование XAML с голографическими приложениями DirectX</span><span class="sxs-lookup"><span data-stu-id="6cbe3-104">Using XAML with holographic DirectX apps</span></span>

> [!NOTE]
> <span data-ttu-id="6cbe3-105">Эта статья связана с устаревшими собственными API-интерфейсами WinRT.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-105">This article relates to the legacy WinRT native APIs.</span></span>  <span data-ttu-id="6cbe3-106">Для новых проектов собственных приложений рекомендуется использовать **[API опенкср](../native/openxr-getting-started.md)** .</span><span class="sxs-lookup"><span data-stu-id="6cbe3-106">For new native app projects, we recommend using the **[OpenXR API](../native/openxr-getting-started.md)** .</span></span>

<span data-ttu-id="6cbe3-107">В этом разделе объясняется влияние переключения между [плоскими представлениями XAML и иммерсивное](../../design/app-views.md) представлением в приложении DirectX, а также способы эффективного использования представления XAML и представления в режиме погружения.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-107">This topic explains the impact of switching between [2D XAML views and immersive views](../../design/app-views.md) in your DirectX app, and how to make efficient use of both a XAML view and immersive view.</span></span>

## <a name="xaml-view-switching-overview"></a><span data-ttu-id="6cbe3-108">Обзор переключения представлений XAML</span><span class="sxs-lookup"><span data-stu-id="6cbe3-108">XAML view switching overview</span></span>

<span data-ttu-id="6cbe3-109">В HoloLens, обычно иммерсивное приложение, которое позже может отобразить представление XAML, должно сначала инициализировать это представление XAML, а затем сразу переключаться на иммерсивное представление.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-109">On HoloLens, a generally immersive app that may later display a 2D XAML view must initialize that XAML view first and immediately switch to an immersive view from there.</span></span> <span data-ttu-id="6cbe3-110">Это означает, что XAML будет загружен, прежде чем приложение сможет выполнять любые действия.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-110">This means XAML will load before your app can do anything.</span></span> <span data-ttu-id="6cbe3-111">В результате это приведет к небольшому увеличению времени запуска, и XAML продолжит занимать память в процессе приложения, пока она находится в фоновом режиме. время задержки запуска и использования памяти зависит от того, что приложение выполняет с XAML перед переключением на собственное представление.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-111">As a result, there will be a small increase in your startup time, and XAML will continue to occupy memory space in your app process while it resides in the background; the amount of startup delay and memory usage depends on what your app does with XAML before switching to the native view.</span></span> <span data-ttu-id="6cbe3-112">Если вы ничего не сделаете с кодом запуска XAML, за исключением запуска иммерсивного представления, это влияние должно быть незначительным.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-112">If you do nothing in your XAML start up code at first except start your immersive view, the impact should be minor.</span></span> <span data-ttu-id="6cbe3-113">Кроме того, так как более holographic-визуализация выполняется непосредственно в иммерсивное представление, во время этой отрисовки можно избежать каких-либо ограничений, связанных с XAML.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-113">Also, because your holographic rendering is done directly to the immersive view, you will avoid any XAML-related restrictions on that rendering.</span></span>

<span data-ttu-id="6cbe3-114">Обратите внимание, что объем используемой памяти вычисляется как для ЦП, так и для GPU.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-114">Note that the memory usage counts for both CPU and GPU.</span></span> <span data-ttu-id="6cbe3-115">Direct3D 11 способен переключать виртуальную графическую память, но может не суметь переключать некоторые или все ресурсы GPU XAML, и может возникнуть заметное снижение производительности.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-115">Direct3D 11 is able to swap virtual graphics memory, but it might not be able to swap out some or all of the XAML GPU resources, and there might be a noticeable performance hit.</span></span> <span data-ttu-id="6cbe3-116">В любом случае, не загружая никакие функции XAML, вы оставите больше места для вашего приложения и предоставляете лучшие возможности.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-116">Either way, not loading any XAML features you don't need will leave more room for your app and provide a better experience.</span></span>

## <a name="xaml-view-switching-workflow"></a><span data-ttu-id="6cbe3-117">Рабочий процесс переключения представления XAML</span><span class="sxs-lookup"><span data-stu-id="6cbe3-117">XAML view switching workflow</span></span>

<span data-ttu-id="6cbe3-118">Рабочий процесс для приложения, который переходит непосредственно из XAML в режим погружения, выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="6cbe3-118">The workflow for an app that goes directly from XAML to immersive mode is like so:</span></span>
* <span data-ttu-id="6cbe3-119">Приложение запускается в двухмерном представлении XAML.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-119">The app starts up in the 2D XAML view.</span></span>
* <span data-ttu-id="6cbe3-120">Начальная последовательность XAML приложения определяет, поддерживает ли текущая система более holographic%:</span><span class="sxs-lookup"><span data-stu-id="6cbe3-120">The app’s XAML startup sequence detects if the current system supports holographic rendering:</span></span>
* <span data-ttu-id="6cbe3-121">Если это так, приложение создает иммерсивное представление и сразу же переводит его на передний план.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-121">If so, the app creates the immersive view and brings it to the foreground right away.</span></span> <span data-ttu-id="6cbe3-122">Загрузка XAML пропускается для любых ненужных устройств Windows Mixed Reality, включая все классы отрисовки и загрузку ресурсов в представлении XAML.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-122">XAML loading is skipped for anything not necessary on Windows Mixed Reality devices, including any rendering classes and asset loading in the XAML view.</span></span> <span data-ttu-id="6cbe3-123">Если приложение использует XAML для ввода с клавиатуры, то эта страница ввода должна по-прежнему быть создана.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-123">If the app is using XAML for keyboard input, that input page should still be created.</span></span>
* <span data-ttu-id="6cbe3-124">В противном случае представление XAML может работать с бизнес-процессами обычным образом.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-124">If not, the XAML view can proceed with business as usual.</span></span>

## <a name="tip-for-rendering-graphics-across-both-views"></a><span data-ttu-id="6cbe3-125">Совет по отрисовке графики в обоих представлениях</span><span class="sxs-lookup"><span data-stu-id="6cbe3-125">Tip for rendering graphics across both views</span></span>

<span data-ttu-id="6cbe3-126">Если приложению требуется реализовать некоторый объем отрисовки в DirectX для представления XAML в Windows Mixed Reality, лучшим элементом является создание одного модуля подготовки отчетов, который может работать с обоими представлениями.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-126">If your app needs to implement some amount of rendering in DirectX for the XAML view in Windows Mixed Reality, your best bet is to create one renderer that can work with both views.</span></span> <span data-ttu-id="6cbe3-127">Модуль подготовки отчетов должен быть одним экземпляром, к которому можно получить доступ из обоих представлений, и он должен иметь возможность переключения между двухмерной и holographic отрисовкой.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-127">The renderer should be one instance that can be accessed from both views, and it should be able to switch between 2D and holographic rendering.</span></span> <span data-ttu-id="6cbe3-128">Таким образом, ресурсы GPU загружаются только один раз — это сокращает время загрузки, влияние на память и объем ресурсов, которые необходимо поменять местами при переключении представлений.</span><span class="sxs-lookup"><span data-stu-id="6cbe3-128">That way GPU assets are only loaded once - this reduces load times, memory impact, and the amount of resources to be swapped when switching views.</span></span>
