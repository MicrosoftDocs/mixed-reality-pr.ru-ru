---
title: Использование XAML с голографическими приложениями DirectX
description: Объясняет влияние переключения между плоскими представлениями XAML и иммерсивное представлением в приложении DirectX, а также позволяет эффективно использовать представление XAML и режим погружения.
author: mikeriches
ms.author: mriches
ms.date: 08/04/2020
ms.topic: article
keywords: Windows Mixed Reality, UWP, Управление представлением приложений, XAML, клавиатура, пошаговое руководство, DirectX
ms.openlocfilehash: 4908ffbded879709c848a4d767c35a150aa3dfba
ms.sourcegitcommit: 09599b4034be825e4536eeb9566968afd021d5f3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/03/2020
ms.locfileid: "91683379"
---
# <a name="using-xaml-with-holographic-directx-apps"></a>Использование XAML с голографическими приложениями DirectX

> [!NOTE]
> Эта статья связана с устаревшими собственными API-интерфейсами WinRT.  Для новых проектов собственных приложений рекомендуется использовать **[API опенкср](../native/openxr-getting-started.md)** .

В этом разделе объясняется влияние переключения между [плоскими представлениями XAML и иммерсивное](../../design/app-views.md) представлением в приложении DirectX, а также способы эффективного использования представления XAML и представления в режиме погружения.

## <a name="xaml-view-switching-overview"></a>Обзор переключения представлений XAML

В HoloLens, обычно иммерсивное приложение, которое позже может отобразить представление XAML, должно сначала инициализировать это представление XAML, а затем сразу переключаться на иммерсивное представление. Это означает, что XAML будет загружен, прежде чем приложение сможет выполнять любые действия. В результате это приведет к небольшому увеличению времени запуска, и XAML продолжит занимать память в процессе приложения, пока она находится в фоновом режиме. время задержки запуска и использования памяти зависит от того, что приложение выполняет с XAML перед переключением на собственное представление. Если вы ничего не сделаете с кодом запуска XAML, за исключением запуска иммерсивного представления, это влияние должно быть незначительным. Кроме того, так как более holographic-визуализация выполняется непосредственно в иммерсивное представление, во время этой отрисовки можно избежать каких-либо ограничений, связанных с XAML.

Обратите внимание, что объем используемой памяти вычисляется как для ЦП, так и для GPU. Direct3D 11 способен переключать виртуальную графическую память, но может не суметь переключать некоторые или все ресурсы GPU XAML, и может возникнуть заметное снижение производительности. В любом случае, не загружая никакие функции XAML, вы оставите больше места для вашего приложения и предоставляете лучшие возможности.

## <a name="xaml-view-switching-workflow"></a>Рабочий процесс переключения представления XAML

Рабочий процесс для приложения, который переходит непосредственно из XAML в режим погружения, выглядит следующим образом:
* Приложение запускается в двухмерном представлении XAML.
* Начальная последовательность XAML приложения определяет, поддерживает ли текущая система более holographic%:
* Если это так, приложение создает иммерсивное представление и сразу же переводит его на передний план. Загрузка XAML пропускается для любых ненужных устройств Windows Mixed Reality, включая все классы отрисовки и загрузку ресурсов в представлении XAML. Если приложение использует XAML для ввода с клавиатуры, то эта страница ввода должна по-прежнему быть создана.
* В противном случае представление XAML может работать с бизнес-процессами обычным образом.

## <a name="tip-for-rendering-graphics-across-both-views"></a>Совет по отрисовке графики в обоих представлениях

Если приложению требуется реализовать некоторый объем отрисовки в DirectX для представления XAML в Windows Mixed Reality, лучшим элементом является создание одного модуля подготовки отчетов, который может работать с обоими представлениями. Модуль подготовки отчетов должен быть одним экземпляром, к которому можно получить доступ из обоих представлений, и он должен иметь возможность переключения между двухмерной и holographic отрисовкой. Таким образом, ресурсы GPU загружаются только один раз — это сокращает время загрузки, влияние на память и объем ресурсов, которые необходимо поменять местами при переключении представлений.
