---
title: Создание трехмерных моделей для использования в домашних условиях
description: требования к активам и руководство по разработке для трехмерных моделей, используемых в Windows Mixed Reality home на обеих гарнитурах HoloLens и иммерсивного (VR).
author: thmignon
ms.author: thmignon
ms.date: 03/21/2018
ms.topic: article
keywords: 3D, моделирование, руководство по моделированию, требования к ресурсам, руководства по разработке, средство запуска, трехмерное средство запуска, текстура, материалы, сложность, треугольники, сетка, многоугольники, предельные значения, границы, наушники смешанной реальности, гарнитура Windows Mixed Reality, гарнитура виртуальной реальности
ms.openlocfilehash: 9fdd485c67a757d40b049c08f114ce9982aafc27e9103c4b31c21fd8af08d186
ms.sourcegitcommit: a1c086aa83d381129e62f9d8942f0fc889ffcab0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2021
ms.locfileid: "115207684"
---
# <a name="create-3d-models-for-use-in-the-home"></a>Создание трехмерных моделей для использования в домашних условиях

[Windows Mixed Reality home](../discover/navigating-the-windows-mixed-reality-home.md) является отправной точкой, где пользователи начинают работу перед запуском приложений. при проектировании приложения для Windows Mixed Reality гарнитурах используйте [трехмерную модель в качестве средства запуска приложений](implementing-3d-app-launchers.md) и разместите [трехмерные ссылки на Windows Mixed Reality домашней странице](implementing-3d-app-launchers.md#3d-deep-links-secondarytiles). в этой статье описаны рекомендации по созданию трехмерных моделей, совместимых с Windows Mixed Reality home.

## <a name="asset-requirements-overview"></a>Обзор требований к ресурсам

при создании трехмерных моделей для Windows Mixed Reality существуют некоторые требования, которым должны соответствовать все активы: 
1. [Экспорт](#exporting-models) -активы должны доставляться в формате файла GLBA (двоичный глтф)
2. [Моделирование](#modeling-guidelines) — активы должны быть менее 10 000 треугольников, содержать не более 64 узлов и 32 подсетей на Лод
3. [Материалы](#material-guidelines) — текстуры не могут быть больше 4096 x 4096, а наименьшая mipная схема должна быть не больше 4 в любом измерении.
4. [Анимация](#animation-guidelines) -анимация не может быть длиннее 20 минут со скоростью 30 кадров/с (36 000 опорных кадров) и должна содержать <= 8192 целевые вершины.
5. [Оптимизация](#optimizations) — активы следует оптимизировать с помощью [виндовсмрассетконвертер](https://github.com/Microsoft/glTF-Toolkit/releases). *требуется для Windows версий ос <= 1709** и рекомендуется в Windows версий ос >= 1803

оставшаяся часть этой статьи содержит подробный обзор этих требований и дополнительные рекомендации, чтобы обеспечить хорошую работу моделей с Windows Mixed Reality домашней. 

## <a name="detailed-guidance"></a>Подробное руководство

### <a name="exporting-models"></a>Экспорт моделей

главная страница Windows Mixed Reality ждет, что 3d-ресурсы будут доставляться с использованием формата файла glba с внедренными изображениями и двоичными данными. GLBA — это двоичная версия формата Глтф, который является прямым свободным открытым стандартом для доставки трехмерных ресурсов, поддерживаемой группой Кхронос. так как глтф развивается как промышленный стандарт для взаимодействия с трехмерным содержимым, он будет поддерживаться корпорацией майкрософт в различных Windows приложениях и интерфейсах. Если вы еще не создавали ресурс-контейнер Глтф, вы сможете найти [список поддерживаемых средств экспорта и конвертеров](https://github.com/KhronosGroup/glTF/blob/master/README.md#converters-and-exporters) на странице глтф Рабочей группы GitHub.  

### <a name="modeling-guidelines"></a>Рекомендации по моделированию

для обеспечения совместимости с домашним интерфейсом "смешанная реальность" Windows планируется создание ресурсов с использованием следующих руководств по моделированию. При моделировании в вашей программе по своему усмотрению учитывайте следующие рекомендации и ограничения.
1. Для оси up должно быть задано значение "Y".
2. Ресурс должен иметь значение "Forward", направленное на положительную ось Z.
3. Все активы должны быть построены на плоскости основания в источнике сцены (0, 0, 0).
4. Рабочие единицы должны иметь значение "измерительы и активы", чтобы ресурсы можно было создавать в масштабе мира.
5. Все сетки не нужно объединять, но рекомендуется при использовании устройств с ограниченными ресурсами
6. Все сетки должны совместно использовать один материал, при этом только один набор текстур используется для всего ресурса.
7. UVs должны быть размещены в квадратном расположении в 0-1. Старайтесь не использовать текстуры мозаичного заполнения, хотя это и разрешено.
8. Multi-UVs не поддерживается
9. Двусторонние материалы не поддерживаются

### <a name="triangle-counts-and-levels-of-detail-lods"></a>Количество треугольников и уровни детализации (Лодс)

Windows Mixed Reality home не поддерживает модели с более чем 10 000 треугольниками. Перед экспортом рекомендуется выполнить триангуляцию сеток, чтобы они не превышали этот счетчик. Windows MR также поддерживает дополнительные геометрические уровни детализации (Лодс), чтобы обеспечить работоспособность и высокое качество работы. [Виндовсмрассетконвертер](https://github.com/Microsoft/glTF-Toolkit/releases) поможет объединить 3 версии модели в одну модель. GLBA. Windows определяет, какие из лод должны отображаться в зависимости от объема экрана, который занимает модель. Поддерживаются только три уровня Лод со следующими рекомендуемыми числами треугольников:
<br>

|  Уровень Лод  |  Рекомендуемое число треугольников  |  Максимальное число треугольников | 
|------|------|------|
|  ЛОД 0 |  10 000 |  10 000 | 
|  ЛОД 1 |  5 000  |  10 000 | 
|  ЛОД 2 |  2500  |  10 000 | 

### <a name="node-counts-and-submesh-limits"></a>Ограничения количества узлов и подсети

Windows Mixed Reality home не поддерживает модели с более чем 64 узлами или 32 подсетей на лод. Узлы являются концепцией в [спецификации глтф](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy) , определяющей объекты в сцене. Подсети определяются в массиве [примитивов](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#meshes) сетки в объекте. 

|  Функция |  Описание  |  Максимальное поддерживаемое | Документация |
|------|------|------|------|
|  Узлы |  Объекты в сцене Глтф |  64 на Лод | [Здесь](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy)|
|  Подсети |  Сумма примитивов во всех сетках |  32 на Лод | [Здесь](https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#meshes)|

## <a name="material-guidelines"></a>Руководства по материалам

Текстуры должны быть подготовлены с помощью рабочего процесса грубого использования PBR. Начнем с создания полного набора текстур, включая Албедо, обычная, перекрытия, металл и грубое значение. Windows Mixed Reality поддерживает текстуры с разрешением до 4096x4096, но рекомендуется создавать на 512 x 512. Текстуры должны быть созданы с разрешением, кратным 4. Это требование к формату сжатия, применяемому к текстурам в шагах экспорта, описанных ниже. При создании карт MIP или текстуры наименьшее значение MIP должно быть не более 4x4.
<br>

|  Рекомендуемый размер текстуры  |  Максимальный размер текстуры | Наименьший MIP
|----|----|----|
|  512 x 512  |  4096x4096 | Максимальное число 4x4|

### <a name="albedo-base-color-map"></a>Схема албедо (базовый цвет)

Необработанный цвет без сведений о освещении. Эта схема также содержит сведения о отражении и диффузии для металлического (белого на карте металла) и изолированного (черного на карте металлические) поверхностей.

### <a name="normal"></a>Норм.

Нормальная схема пространства тангенса

### <a name="roughness-map"></a>Схема неровностей

Описывает микроповерхность объекта. Белый 1,0 — грубое черно-то 0,0 — Гладкий. Эта схема предоставляет ресурсу больше всего символов, так как он действительно описывает поверхность. Например, царапины, отпечатки пальцев, растушевка, гриме и т. д.

### <a name="ambient-occlusion-map"></a>Внешняя схема перекрытия

Масштабная схема значений с областями перекрыто Light, которая блокирует отражения

### <a name="metallic-map"></a>Металлический карте

Сообщает шейдеру, если что-то произошло. Необработанный металл = 1,0 белый без металла = 0,0 черный. Могут быть серые значения, указывающие на то, что что-то покрывает необработанный металл, например мотокросса, но в целом эта схема должна быть только черно-белой.

## <a name="optimizations"></a>Оптимизация

Windows Mixed Reality home предлагает серию оптимизаций на основе базовой спецификации глтф, определенной с помощью пользовательских расширений. эти оптимизации необходимы для Windows версий <= 1709 и рекомендуются в более новых версиях Windows. вы можете легко оптимизировать любую модель глтф 2,0, используя [преобразователь Windows Mixed Realityных ресурсов, доступный на GitHub](https://github.com/Microsoft/glTF-Toolkit/releases). Это средство будет выполнять правильную упаковку и оптимизацию текстуры, как указано ниже. Для общего использования мы рекомендуем использовать Виндовсмрассетконвертер, но если вам нужен больший контроль над опытом и хотите создать собственный конвейер оптимизации, вы можете обратиться к подробной спецификации ниже.  

> [!NOTE]
> Полный список возможностей для точных ограничений модели см. в статье [Оптимизация 3D-модели](/dynamics365/mixed-reality/guides/3d-content-guidelines/optimize-models) для использования в приложениях Dynamics 365.

### <a name="materials"></a>Материалы

чтобы улучшить время загрузки актива в средах со смешанной нагрузкой, Windows MR поддерживает визуализацию сжатых текстур DDS, упакованных в соответствии со схемой упаковки, определенной в этом разделе. Для ссылок на текстуры DDS используется [расширение MSFT_texture_dds](https://github.com/sbtron/glTF/tree/MSFT_lod/extensions/Vendor/MSFT_texture_dds). Настоятельно рекомендуется сжимать текстуры. 

#### <a name="hololens"></a>HoloLens

при работе в смешанной реальности на основе HoloLens планируется упаковка текстур с помощью 2-текстурной установки с использованием следующей спецификации упаковки:
<br>

|  Глтф, свойство  |  Текстура  |  Схема упаковки | 
|----------|----------|----------|
|  пбрметалликраугхнесс  |  baseColorTexture  |  Красный (R), зеленый (G), синий (B) | 
|  [MSFT_packing_normalRoughnessMetallic](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_normalRoughnessMetallic/README.md)  |  нормалраугхнессметалликтекстуре  |  Обычная (RG), грубая (B), металлическая (A) | 


При сжатии текстур DDS на каждой карте ожидается следующее сжатие:
<br>

|  Текстура  |  Ожидаемое сжатие | 
|------|------|
|  Басеколортекстуре, Нормалраугхнессметалликтекстуре |  BC7 | 

#### <a name="immersive-vr-headsets"></a>Головные гарнитуры (VR)

на Windows Mixed Reality пк для использования в качестве высокопроизводительных гарнитур (VR) текстуры упаковываются с помощью 3-текстурной установки с использованием следующей спецификации упаковки:

##### <a name="windows-os--1803"></a>Windows >ОС = 1803

<br>

|  Глтф, свойство  |  Текстура  |  Схема упаковки | 
|----------|----------|----------|
|  пбрметалликраугхнесс  |  baseColorTexture  |  Красный (R), зеленый (G), синий (B) | 
|  [MSFT_packing_occlusionRoughnessMetallic](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)  |  окклусионраугхнессметалликтекстуре  |  Перекрытия (R), грубая (G), металлическая (B) | 
|  [MSFT_packing_occlusionRoughnessMetallic](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)  |  normalTexture  |  Обычная (RG) | 

При сжатии текстур DDS на каждой карте ожидается следующее сжатие:
<br>

|  Текстура  |  Ожидаемое сжатие | 
|------|------|
|  normalTexture  |  BC5 | 
|  Басеколортекстуре, Окклусионраугхнессметалликтекстуре  |  BC7 | 

##### <a name="windows-os--1709"></a>Windows <ОС = 1709
<br>

|  Глтф, свойство  |  Текстура  |  Схема упаковки | 
|----------|----------|----------|
|  пбрметалликраугхнесс  |  baseColorTexture  |  Красный (R), зеленый (G), синий (B) | 
|  [MSFT_packing_occlusionRoughnessMetallic](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)  |  раугхнессметалликокклусионтекстуре  |  Приблизительная (R), металлическая (G), перекрытия (B) | 
|  [MSFT_packing_occlusionRoughnessMetallic](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)  |  normalTexture  |  Обычная (RG) | 

При сжатии текстур DDS на каждой карте ожидается следующее сжатие:
<br>

|  Текстура  |  Ожидаемое сжатие | 
|------|------|
|  normalTexture  |  BC5 | 
|  Басеколортекстуре, Раугхнессметалликокклусионтекстуре | BC7 |

### <a name="adding-mesh-lods"></a>Добавление сетки Лодс

Windows MR использует геометрический узел Лодс для отрисовки трехмерных моделей на различных уровнях детализации в зависимости от покрытия на экране. Хотя эта функция технически не является обязательной, ее рекомендуется использовать для всех ресурсов. в настоящее время Windows поддерживает три уровня детализации. По умолчанию Лод имеет значение 0, что соответствует наивысшему качеству. Другие Лодс пронумерованы последовательно, например 1, 2 и получают более низкий уровень качества. [преобразователь Windows Mixed Reality ресурсов](https://github.com/Microsoft/glTF-Toolkit/releases) поддерживает создание ресурсов, соответствующих этой спецификации лод, принимая несколько моделей глтф и объединяя их в один актив с допустимыми уровнями лод. В следующей таблице приведены ожидаемые Лод упорядочивания и цели треугольника.
<br>

|  Уровень Лод  |  Рекомендуемое число треугольников  |  Максимальное число треугольников | 
|-------|-------|-------|
|  ЛОД 0 |  10 000 |  10 000 | 
|  ЛОД 1 |  5 000  |  10 000 | 
|  ЛОД 2 |  2500  |  10 000 | 

При использовании Лодс всегда указывайте 3 уровня Лод. Отсутствие Лодс приведет к непредвиденному отображению модели, так как система Лод переключается на уровень отсутствующих Лод. Глтф 2,0 в настоящее время не поддерживает Лодс как часть ядра спецификации. Лодс следует определить с помощью [расширения MSFT_LOD](https://github.com/sbtron/glTF/tree/MSFT_lod/extensions/Vendor/MSFT_lod).

### <a name="screen-coverage"></a>Покрытие экрана

лодс отображаются в Windows Mixed Reality на основе системы, которая определяется значением покрытия экрана, заданным для каждого лод. Объекты, в настоящее время использующие большую часть пространства экрана, отображаются на более высоком уровне Лод. Покрытие экрана не является частью основной спецификации Глтф 2,0 и должно быть указано с помощью MSFT_ScreenCoverage в разделе "дополнения" [расширения MSFT_lod](https://github.com/sbtron/glTF/tree/MSFT_lod/extensions/Vendor/MSFT_lod).
<br>

|  Уровень Лод  |  Рекомендуемый диапазон  |  Диапазон по умолчанию | 
|-------|-------|-------|
|  ЛОД 0  |  100%-50% |  0,5 | 
|  ЛОД 1 |  В 50%-20%  |  0.2 | 
|  ЛОД 2 |  Менее 20%-1%  |  0,01 | 
|  ЛОД 4  |  С 1%  |  - | 

## <a name="animation-guidelines"></a>Рекомендации по анимации

> [!NOTE]
> эта функция была добавлена как часть [Windows 10 обновления за апрель 2018](/windows/mixed-reality/enthusiast-guide/release-notes-april-2018). в более ранних версиях Windows эти анимации не воспроизводятся, однако они по-прежнему будут загружаться при разработке в соответствии с инструкциями в этой статье.  

домашняя страница mixed reality поддерживает анимированные объекты глтф на гарнитурах HoloLens и иммерсивного (VR). Если вы хотите активировать анимацию для модели, необходимо использовать расширение "Схема анимации" в формате Глтф. Это расширение позволяет запускать анимацию в модели Глтф на основе присутствия пользователя в мире, например запускать анимацию, когда пользователь близко к объекту или когда он смотрит на него. Если объект Глтф имеет анимацию, но не определяет триггеры, анимация не будет воспроизводиться. В разделе ниже описывается один рабочий процесс для добавления этих триггеров в любой анимированный объект Глтф.

### <a name="tools"></a>Инструменты

Сначала скачайте следующие средства, если они еще не установлены. Эти средства позволяют легко открыть любую модель Глтф, просмотреть ее, внести изменения и сохранить обратно как Глтф или. GLBA:
1. [Visual Studio Code](https://code.visualstudio.com/)
2. [Средства Глтф для Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=cesium.gltf-vscode)


### <a name="opening-and-previewing-the-model"></a>Открытие и предварительный просмотр модели

Для начала откройте модель Глтф в VSCode, перетащив файл Глтф в окно редактора. Если вы используете. GLBA, а не Глтф-файл, его можно импортировать в VSCode с помощью скачанной надстройки средств Глтф. Перейдите в меню "вид-> Командная палитра" и начните вводить "Глтф" в палитре команд и выберите "Глтф: Import from GLBA", который будет отображать средство выбора файлов для импорта GLBA. 

После открытия модели Глтф вы увидите JSON в окне редактора. Вы также можете просмотреть модель в динамическом средстве просмотра 3D-файлов с помощью команды, щелкнув правой кнопкой мыши имя файла и выбрав в контекстном меню команду "Глтф: Preview 3D Model". 

### <a name="adding-the-triggers"></a>Добавление триггеров

Триггеры анимации добавляются в модель Глтф в JSON с помощью расширения "Схема анимации". расширение "схема анимации" является общедоступным [в документации на GitHub](https://github.com/msfeldstein/glTF/blob/04f7005206257cf97b215df5e3f469d7838c1fee/extensions/Vendor/FB_animation_map/README.md) (примечание: это черновое расширение). Чтобы добавить расширение в модель, просто прокрутите файл Глтф в редакторе и добавьте блок "Екстенсионсусед" и "Extensions" в файл, если они еще не существуют. В разделе "Екстенсионсусед" вы добавите ссылку на расширение "EXT_animation_map" и в блок "Extensions" вы добавите сопоставления в анимацию в модели.

Как отмечалось [в спецификации](https://github.com/msfeldstein/glTF/blob/04f7005206257cf97b215df5e3f469d7838c1fee/extensions/Vendor/FB_animation_map/README.md) , вы определяете, что запускает анимацию, используя "семантическую" строку в списке "анимации", которая представляет собой массив индексов анимации. В примере ниже мы указали анимацию для воспроизведения, когда пользователь облаками на объект:

```json
  "extensionsUsed": [
    "EXT_animation_map"
  ],
  "extensions" : {
      "EXT_animation_map" : {
            "bindings": [
                {
                    "semantic": "GAZE",
                    "animations": [0]
                }
            ]
      }
  }
```
следующая семантика триггеров анимации поддерживается Windows Mixed Reality домашней.  
* "ALWAYS": непрерывный цикл анимации
* "УДЕРЖИВАЕТся": циклический перебор в течение всей длительности, когда объект был извлечен.
* "Взгляните": циклический просмотр объекта
* "Близость": циклический просмотр объекта с помощью средства просмотра
* "Указатель": циклический перебор, когда пользователь указывает на объект

### <a name="saving-and-exporting"></a>Сохранение и экспорт

После внесения изменений в модель Глтф можно сохранить ее непосредственно в виде Глтф. Можно также щелкнуть правой кнопкой мыши имя файла в редакторе и выбрать "Глтф: Export to GLBA (двоичный файл)", чтобы экспортировать файл. GLBA. 

### <a name="restrictions"></a>Ограничения

Анимация не может быть длиннее 20 минут и не может содержать более 36 000 опорных кадров (20 минут с частотой 30 кадров/с). Кроме того, при использовании анимации на основе целевого объекта трансформация не превышает 8192 целевых вершин или меньше. превышение этих счетчиков приведет к тому, что анимированный ресурс не будет поддерживаться в Windows Mixed Reality домашняя страница. 

|Функция|Максимум|
|-----|-----|
|Duration|20 минут|
|Опорные кадры|36 000| 
|Целевые вершины трансформации|8192|

## <a name="gltf-implementation-notes"></a>Заметки о реализации Глтф

Windows MR не поддерживает зеркальное отображение геометрических объектов с использованием отрицательных масштабов. Геометрический объект с отрицательными масштабами, скорее всего, приведет к визуальным артефактам.

ресурс глтф должен указывать на сцену по умолчанию, используя атрибут сцены для подготовки к просмотру Windows MR. кроме того, Windows глтф loader до [Windows 10 обновления от апреля 2018](/windows/mixed-reality/enthusiast-guide/release-notes-april-2018) **требует наличия** методов доступа:
* Должны иметь значения min и Max.
* СКАЛЯР типа должен быть параметра ComponentType UNSIGNED_SHORT (5123) или UNSIGNED_INT (5125).
* Типы VEC2 и VEC3 должны быть параметра ComponentType FLOAT (5126).

Следующие свойства материала используются из основной спецификации Глтф 2,0, но не требуются.
* Басеколорфактор, Металликфактор, Раугхнессфактор
* Басеколортекстуре: должен указывать на текстуру, хранящуюся в DDS.
* Емиссиветекстуре: должен указывать на текстуру, хранящуюся в DDS.
* emissiveFactor
* алфамоде

Следующие свойства материала не учитываются из основной спецификации:
* Все UVs
* Металраугхнесстекстуре: вместо этого следует использовать оптимизированную для оптимизации упаковку текстуры (Майкрософт), определенную ниже
* Нормалтекстуре: вместо этого следует использовать оптимизированную для оптимизации упаковку текстуры (Майкрософт), определенную ниже
* нормалскале
* Окклусионтекстуре: вместо этого следует использовать оптимизированную для оптимизации упаковку текстуры (Майкрософт), определенную ниже
* окклусионстренгс

Windows MR не поддерживает линии и точки в примитивном режиме. 

Поддерживается только один атрибут UV-вершины.

## <a name="more-resources"></a>Дополнительные ресурсы

* [программы экспорта и конвертеры Глтф](https://github.com/KhronosGroup/glTF#converters-and-exporters)
* [глтф набор средств](https://github.com/Microsoft/glTF-Toolkit)
* [Спецификация Глтф 2,0](https://github.com/KhronosGroup/glTF/blob/master/README.md)
* [Спецификация расширения Microsoft Глтф Лод](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_lod/README.md)
* [Спецификация расширений упаковки для текстуры смешанной реальности PC](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_occlusionRoughnessMetallic/README.md)
* [HoloLens Спецификация расширений упаковки текстур смешанной реальности](https://github.com/KhronosGroup/glTF/blob/master/extensions/2.0/Vendor/MSFT_packing_normalRoughnessMetallic/README.md)
* [Спецификация Глтф расширений текстур Microsoft DDS](https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds)

## <a name="see-also"></a>См. также раздел

* [Реализация средств запуска трехмерных приложений (приложения UWP)](implementing-3d-app-launchers.md)
* [Реализация средств запуска трехмерных приложений (приложения Win32)](implementing-3d-app-launchers-win32.md)
* [Навигация по дому с технологией Windows Mixed Reality](../discover/navigating-the-windows-mixed-reality-home.md)