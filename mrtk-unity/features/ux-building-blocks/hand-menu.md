---
title: Меню руки
description: Пример сцены меню руки в МРТК
author: cre8ivepark
ms.author: dongpark
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, смешанная реальность, разработка, мртк, хандмену,
ms.openlocfilehash: ecf05b687c52dab68302b9b66b3890aca31b5635b803084abd6845f31de974e0
ms.sourcegitcommit: a1c086aa83d381129e62f9d8942f0fc889ffcab0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/05/2021
ms.locfileid: "115226509"
---
# <a name="hand-menu"></a>Меню руки

![Пример интерфейса меню руки](../images/solver/MRTK_UX_HandMenu.png)

Меню руки позволяют пользователям быстро открыть пользовательский интерфейс, подключенный вручную, для часто используемых функций. Чтобы предотвратить ложную активацию при взаимодействии с другими объектами, меню руки предоставляет такие параметры, как "требовать использование плоской руки" и "использовать активацию с помощью взгляда". Рекомендуется использовать эти параметры для предотвращения нежелательной активации.

## <a name="hand-menu-examples"></a>Примеры меню руки

Сцена **хандменуексамплес. Unity** находится в ``MRTK/Examples/Demos/HandTracking/Scenes`` папке. Во время работы сцена активирует только выбранный тип меню.
<br/><img src="../images/hand-menu/MRTK_HandMenu_ExampleScene.png" width="600px" alt="HandMenu_ExampleScene">

Prefabs меню можно найти в ``MRTK/Examples/Demos/HandTracking/Prefabs`` папке.

### <a name="handmenu_small_hideonhanddrop-and-handmenu_medium_hideonhanddrop"></a>HandMenu_Small_HideOnHandDrop и HandMenu_Medium_HideOnHandDrop

Эти два примера просто активируют и деактивируют объект Менуконтент для отображения и скрытия меню в событии **онфирссанддетектед ()** и **онлассандлост ()** .
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example1.png" width="600" alt="HandMenu_ExampleScene 1">
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example2.png" width="600" alt="HandMenu_ExampleScene 2">

### <a name="handmenu_large_worldlock_on_grabandpull"></a>HandMenu_Large_WorldLock_On_GrabAndPull

Для более сложных меню, требующих более длительного взаимодействия, рекомендуется блокировать меню в мир. В этом примере пользователь может взять и извлечь в мир мира, а также активировать и деактивировать Менуконтент для событий **онфирссанддетектед ()** и **онлассандлост ()** .
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example3.png" width="600" alt="HandMenu_ExampleScene 3">

`ManipulationHandler`Эта форма делает ее захваченной и перемещаемой. Событие **начала манипуляции** **солверхандлер. упдатесолверс** деактивируется до мира — блокировка меню. Кроме того, в нем отображается **кнопка Закрыть** , позволяющая пользователю закрыть меню после завершения задачи. Событие **завершения манипуляции** вызывает **хандконстраинтпалмуп. стартворлдлоккреаттаччекккораутине** , чтобы позволить пользователю вернуть меню к руки, вызывая и просматривая карманный ПК.
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example4.png" width="600" alt="HandMenu_ExampleScene 4">

Кнопка " **Закрыть** " повторно активирует **солверхандлер. Упдатесолверс** и скрывает **менуконтент**.
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example5.png" alt="HandMenu_ExampleScene 5">

### <a name="handmenu_large_autoworldlock_on_handdrop"></a>HandMenu_Large_AutoWorldLock_On_HandDrop

Этот пример похож на HandMenu_Large_WorldLock_On_GrabAndPull. Единственное отличие заключается в том, что меню автоматически будет заблокировано по всему миру. Это делается просто без скрытия события Менуконтент для **онлассандлост ()** . Режим извлечения & извлечение выполняется так же, как HandMenu_Large_WorldLock_On_GrabAndPull примере.

## <a name="scripts"></a>Сценарии

[`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) предоставляет решатель, который ограничивает отслеживаемый объект областью, безопасной для содержимого, ограничиваемого руками (например, пользовательский интерфейс, меню и т. д.). Безопасными считаются области, которые не пересекаются с рукой. Производный класс [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint), вызываемый [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp), также включен для демонстрации общего поведения активации объекта, отслеживаемого решателем, когда ладонь обращена к пользователю.

Дополнительные сведения см. в подсказках, доступных для каждого [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) Свойства. Некоторые свойства более подробно описаны ниже.

<img src="../images/solver/MRTK_Solver_HandConstraintPalmUp.png" width="450" alt="HandMenu_ExampleScene Palm up">

* **зона Сейф**. в зоне безопасности указывается, где с рукой можно ограничить содержимое. Рекомендуется размещать содержимое на стороне Улнар, чтобы избежать перекрытия с учетом руки и улучшения качества взаимодействия. Сейфные зоны рассчитываются путем того, что ориентация «руки» проецируется в плоскость, ортогональную по отношению к представлению камеры, и райкастинг с ограничивающим прямоугольником вокруг руки. зоны Сейф определяются для работы с, [`IMixedRealityHand`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityHand) но также работают с другими типами контроллеров. Рекомендуется исследовать, какая зона безопасности представляется в разных типах контроллеров.

* **Следовать перед камерой до переворота** В этом случае поиск решения будет выполняться вручную до тех пор, пока меню не будет полностью согласовано с окном взгляда, после чего он получит камеру. Это работает путем изменения Солверротатионбехавиор в Хандконстраинтсолвер, от Лукаттраккедобжект до Лукатмаинкамера в качестве угла GazeAlignment с поиском решения.

<img src="../images/solver/MRTK_Solver_HandConstraintSafeZones.png" width="450" alt="HandMenu Safe Zones">

* **События активации**. в настоящее время [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) триггеры имеют четыре события активации. Эти события можно использовать во многих разных сочетаниях для создания уникальных [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) поведений `MRTK/Examples/Demos/HandTracking/Scenes/` . примеры этих вариантов поведения см. в сцене хандбаседменуексампле.

  * *Онхандактивате*: активируется, когда рука удовлетворяет методу ишандактиве.
  * *Онханддеактивате*: активируется, если метод ишандактиве больше не удовлетворен.
  * *Онфирссанддетектед*: происходит, когда состояние отслеживания руки изменяется с No руки на первый рукой в представлении.
  * *Онлассандлост*: происходит при изменении состояния отслеживания с хотя бы одной руки в представлении на отсутствие руки.

* **Поиск решения. логика активации и деактивации**: в настоящее время рекомендация по активации и деактивации [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) логики заключается в использовании значения упдатесолвер солверхандлер, а не при отключении или включении объекта. Это можно увидеть в примере сцены с помощью обработчиков на основе редактора, запускаемых после событий "Онманипулатионстартед/Манипулатионхандлер" присоединенного меню.

  * *Остановка логики ограничения вручную*. при попытке задать остановку объекта с ограничением руки (а также не выполнять логику активации и деактивации) задайте для параметра Упдатесолвер значение false вместо отключения хандконстраинтпалмуп.
    * Если вы хотите включить логику повторного подключения на основе взгляда (или даже не на основе взгляда), затем следует вызвать функцию Хандконстраинтпалмуп. Стартворлдлоккреаттаччекккораутине (). Это вызовет соподпрограмму, которая затем проверит, соблюдается ли критерий "Исвалидконтроллер", и установит Упдатесолвер в значение true (или если объект отключен).
  * *Запуск логики ограничения вручную*: при попытке задать объект с ограничением руки для повторного запуска после руки (в зависимости от того, соответствует ли он условиям активации), установите для параметра упдатесолвер солверхандлер значение true.

* **Повторное присоединение логики**. в настоящее время [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) можно автоматически повторно присоединить целевой объект к отслеживающей точке независимо от того, имеет ли Упдатесолвер солверхандлер значение true или нет. Это делается с помощью вызова функции Стартворлдлоккреаттаччекккораутине () Хандконстраинтпалмуп после того, как она была заблокирована в мире (в данном случае фактически устанавливается значение Солверхандлер Упдатесолвер равным false).

## <a name="see-also"></a>См. также раздел

* [Кнопка](button.md)
* [Ближайшее меню](near-menu.md)
