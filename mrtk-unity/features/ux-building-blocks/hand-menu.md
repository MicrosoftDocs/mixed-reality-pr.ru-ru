---
title: Меню руки
description: Пример сцены меню руки в МРТК
author: cre8ivepark
ms.author: dongpark
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, смешанная реальность, разработка, мртк, хандмену,
ms.openlocfilehash: 9bb0276c048912b4f463dd93d3303c9a3af8fe29
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2021
ms.locfileid: "113177526"
---
# <a name="hand-menu"></a><span data-ttu-id="051ad-104">Меню руки</span><span class="sxs-lookup"><span data-stu-id="051ad-104">Hand menu</span></span>

![Пример UX меню руки](../images/solver/MRTK_UX_HandMenu.png)

<span data-ttu-id="051ad-106">Меню руки позволяют пользователям быстро открыть пользовательский интерфейс, подключенный вручную, для часто используемых функций.</span><span class="sxs-lookup"><span data-stu-id="051ad-106">Hand menus allow users to quickly bring up hand-attached UI for frequently used functions.</span></span> <span data-ttu-id="051ad-107">Чтобы предотвратить ложную активацию при взаимодействии с другими объектами, меню руки предоставляет такие параметры, как "требовать использование плоской руки" и "использовать активацию с помощью взгляда".</span><span class="sxs-lookup"><span data-stu-id="051ad-107">To prevent false activation while interacting with other objects, hand menu provides options such as 'Require Flat Hand' and 'Use Gaze Activation'.</span></span> <span data-ttu-id="051ad-108">Рекомендуется использовать эти параметры для предотвращения нежелательной активации.</span><span class="sxs-lookup"><span data-stu-id="051ad-108">It is recommended to use these options to prevent unwanted activation.</span></span>

## <a name="hand-menu-examples"></a><span data-ttu-id="051ad-109">Примеры меню руки</span><span class="sxs-lookup"><span data-stu-id="051ad-109">Hand menu examples</span></span>

<span data-ttu-id="051ad-110">Сцена **хандменуексамплес. Unity** находится в ``MRTK/Examples/Demos/HandTracking/Scenes`` папке.</span><span class="sxs-lookup"><span data-stu-id="051ad-110">**HandMenuExamples.unity** scene is under ``MRTK/Examples/Demos/HandTracking/Scenes`` folder.</span></span> <span data-ttu-id="051ad-111">Во время работы сцена активирует только выбранный тип меню.</span><span class="sxs-lookup"><span data-stu-id="051ad-111">When it is running, the scene will only activate currently selected menu type.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_ExampleScene.png" width="600px" alt="HandMenu_ExampleScene">

<span data-ttu-id="051ad-112">Prefabs меню можно найти в ``MRTK/Examples/Demos/HandTracking/Prefabs`` папке.</span><span class="sxs-lookup"><span data-stu-id="051ad-112">You can find these hand menu prefabs under ``MRTK/Examples/Demos/HandTracking/Prefabs`` folder.</span></span>

### <a name="handmenu_small_hideonhanddrop-and-handmenu_medium_hideonhanddrop"></a><span data-ttu-id="051ad-113">HandMenu_Small_HideOnHandDrop и HandMenu_Medium_HideOnHandDrop</span><span class="sxs-lookup"><span data-stu-id="051ad-113">HandMenu_Small_HideOnHandDrop and HandMenu_Medium_HideOnHandDrop</span></span>

<span data-ttu-id="051ad-114">Эти два примера просто активируют и деактивируют объект Менуконтент для отображения и скрытия меню в событии **онфирссанддетектед ()** и **онлассандлост ()** .</span><span class="sxs-lookup"><span data-stu-id="051ad-114">These two examples simply activate and deactivate the MenuContent object to show and hide menu on **OnFirstHandDetected()** and **OnLastHandLost()** event.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example1.png" width="600" alt="HandMenu_ExampleScene 1">
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example2.png" width="600" alt="HandMenu_ExampleScene 2">

### <a name="handmenu_large_worldlock_on_grabandpull"></a><span data-ttu-id="051ad-115">HandMenu_Large_WorldLock_On_GrabAndPull</span><span class="sxs-lookup"><span data-stu-id="051ad-115">HandMenu_Large_WorldLock_On_GrabAndPull</span></span>

<span data-ttu-id="051ad-116">Для более сложных меню, требующих более длительного взаимодействия, рекомендуется блокировать меню в мир.</span><span class="sxs-lookup"><span data-stu-id="051ad-116">For more complex menus that require longer interaction time, it is recommended to world-lock the menu.</span></span> <span data-ttu-id="051ad-117">В этом примере пользователь может взять и извлечь в мир мира, а также активировать и деактивировать Менуконтент для событий **онфирссанддетектед ()** и **онлассандлост ()** .</span><span class="sxs-lookup"><span data-stu-id="051ad-117">In this example, the user can grab and pull to world-lock the menu, in addition to activating and deactivating the MenuContent on **OnFirstHandDetected()** and **OnLastHandLost()** events.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example3.png" width="600" alt="HandMenu_ExampleScene 3">

<span data-ttu-id="051ad-118">`ManipulationHandler`Эта форма делает ее захваченной и перемещаемой.</span><span class="sxs-lookup"><span data-stu-id="051ad-118">Backplate's `ManipulationHandler` makes it grabbable and movable.</span></span> <span data-ttu-id="051ad-119">Событие **начала манипуляции** **солверхандлер. упдатесолверс** деактивируется до мира — блокировка меню.</span><span class="sxs-lookup"><span data-stu-id="051ad-119">**On Manipulation Started** event, **SolverHandler.UpdateSolvers** is deactivated to world-lock the menu.</span></span> <span data-ttu-id="051ad-120">Кроме того, в нем отображается **кнопка Закрыть** , позволяющая пользователю закрыть меню после завершения задачи.</span><span class="sxs-lookup"><span data-stu-id="051ad-120">Additionally, it shows the **Close button** to allow the user to close the menu when the task is finished.</span></span> <span data-ttu-id="051ad-121">Событие **завершения манипуляции** вызывает **хандконстраинтпалмуп. стартворлдлоккреаттаччекккораутине** , чтобы позволить пользователю вернуть меню к руки, вызывая и просматривая карманный ПК.</span><span class="sxs-lookup"><span data-stu-id="051ad-121">**On Manipulation Ended** event, it calls **HandConstraintPalmUp.StartWorldLockReattachCheckCoroutine** to allow the user bring the menu back to hand by raising and looking at the palm.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example4.png" width="600" alt="HandMenu_ExampleScene 4">

<span data-ttu-id="051ad-122">Кнопка " **Закрыть** " повторно активирует **солверхандлер. Упдатесолверс** и скрывает **менуконтент**.</span><span class="sxs-lookup"><span data-stu-id="051ad-122">**Close** button reactivates **SolverHandler.UpdateSolvers** and hide the **MenuContent**.</span></span>
<br/><img src="../images/hand-menu/MRTK_HandMenu_Example5.png" alt="HandMenu_ExampleScene 5">

### <a name="handmenu_large_autoworldlock_on_handdrop"></a><span data-ttu-id="051ad-123">HandMenu_Large_AutoWorldLock_On_HandDrop</span><span class="sxs-lookup"><span data-stu-id="051ad-123">HandMenu_Large_AutoWorldLock_On_HandDrop</span></span>

<span data-ttu-id="051ad-124">Этот пример похож на HandMenu_Large_WorldLock_On_GrabAndPull.</span><span class="sxs-lookup"><span data-stu-id="051ad-124">This example is similar to HandMenu_Large_WorldLock_On_GrabAndPull.</span></span> <span data-ttu-id="051ad-125">Единственное отличие заключается в том, что меню автоматически будет заблокировано по всему миру.</span><span class="sxs-lookup"><span data-stu-id="051ad-125">The only difference is that the menu will be automatically world-locked on hand drop.</span></span> <span data-ttu-id="051ad-126">Это делается просто без скрытия события Менуконтент для **онлассандлост ()** .</span><span class="sxs-lookup"><span data-stu-id="051ad-126">This is done by simply not hiding the MenuContent on **OnLastHandLost()** event.</span></span> <span data-ttu-id="051ad-127">Режим извлечения & извлечение выполняется так же, как HandMenu_Large_WorldLock_On_GrabAndPull примере.</span><span class="sxs-lookup"><span data-stu-id="051ad-127">Grab & pull behavior is same as HandMenu_Large_WorldLock_On_GrabAndPull example.</span></span>

## <a name="scripts"></a><span data-ttu-id="051ad-128">Скрипты</span><span class="sxs-lookup"><span data-stu-id="051ad-128">Scripts</span></span>

<span data-ttu-id="051ad-129">Это [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) поведение предоставляет поисковый механизм, который ограничивает объект, защищенный объектом, на регион с ограниченным содержимым (например, Пользовательский интерфейс, меню и т. д.).</span><span class="sxs-lookup"><span data-stu-id="051ad-129">The [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) behavior provides a solver that constrains the tracked object to a region safe for hand constrained content (such as hand UI, menus, etc).</span></span> <span data-ttu-id="051ad-130">Сейф регионы считаются областями, которые не пересекаются с рукой.</span><span class="sxs-lookup"><span data-stu-id="051ad-130">Safe regions are considered areas that don't intersect with the hand.</span></span> <span data-ttu-id="051ad-131">Производный класс, [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) вызываемый, [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) также включается, чтобы продемонстрировать типичное поведение активации объекта, отслеживающего Поиск решения, когда пользователь переводит себя в карманный ПК.</span><span class="sxs-lookup"><span data-stu-id="051ad-131">A derived class of [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) called [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) is also included to demonstrate a common behavior of activating the solver tracked object when the palm is facing the user.</span></span>

<span data-ttu-id="051ad-132">Дополнительные сведения см. в подсказках, доступных для каждого [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) Свойства.</span><span class="sxs-lookup"><span data-stu-id="051ad-132">Please see the tool tips available for each [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) property for additional documentation.</span></span> <span data-ttu-id="051ad-133">Некоторые свойства более подробно описаны ниже.</span><span class="sxs-lookup"><span data-stu-id="051ad-133">A few properties are defined in more detail below.</span></span>

<img src="../images/solver/MRTK_Solver_HandConstraintPalmUp.png" width="450" alt="HandMenu_ExampleScene Palm up">

* <span data-ttu-id="051ad-134">**зона Сейф**. в зоне безопасности указывается, где с рукой можно ограничить содержимое.</span><span class="sxs-lookup"><span data-stu-id="051ad-134">**Safe Zone**: The safe zone specifies where on the hand to constrain content.</span></span> <span data-ttu-id="051ad-135">Рекомендуется размещать содержимое на стороне Улнар, чтобы избежать перекрытия с учетом руки и улучшения качества взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="051ad-135">It is recommended that content be placed on the Ulnar Side to avoid overlap with the hand and improved interaction quality.</span></span> <span data-ttu-id="051ad-136">Сейфные зоны рассчитываются путем того, что ориентация «руки» проецируется в плоскость, ортогональную по отношению к представлению камеры, и райкастинг с ограничивающим прямоугольником вокруг руки.</span><span class="sxs-lookup"><span data-stu-id="051ad-136">Safe zones are calculated by taking the hands orientation projected into a plane orthogonal to the camera's view and raycasting against a bounding box around the hands.</span></span> <span data-ttu-id="051ad-137">зоны Сейф определяются для работы с, [`IMixedRealityHand`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityHand) но также работают с другими типами контроллеров.</span><span class="sxs-lookup"><span data-stu-id="051ad-137">Safe zones are defined to work with [`IMixedRealityHand`](xref:Microsoft.MixedReality.Toolkit.Input.IMixedRealityHand) but also works with other controller types.</span></span> <span data-ttu-id="051ad-138">Рекомендуется исследовать, какая зона безопасности представляется в разных типах контроллеров.</span><span class="sxs-lookup"><span data-stu-id="051ad-138">It is recommended to explore what each safe zone represents on different controller types.</span></span>

* <span data-ttu-id="051ad-139">**Следовать перед камерой до переворота** В этом случае поиск решения будет выполняться вручную до тех пор, пока меню не будет полностью согласовано с окном взгляда, после чего он получит камеру.</span><span class="sxs-lookup"><span data-stu-id="051ad-139">**Follow Hand Until Facing Camera** With this active, solver will follow hand rotation until the menu is sufficiently aligned with the gaze, at which point it faces the camera.</span></span> <span data-ttu-id="051ad-140">Это работает путем изменения Солверротатионбехавиор в Хандконстраинтсолвер, от Лукаттраккедобжект до Лукатмаинкамера в качестве угла GazeAlignment с поиском решения.</span><span class="sxs-lookup"><span data-stu-id="051ad-140">This works by changing the SolverRotationBehavior in the HandConstraintSolver, from LookAtTrackedObject to LookAtMainCamera as the GazeAlignment angle with the solver varies.</span></span>

<img src="../images/solver/MRTK_Solver_HandConstraintSafeZones.png" width="450" alt="HandMenu Safe Zones">

* <span data-ttu-id="051ad-141">**События активации**. в настоящее время [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) триггеры имеют четыре события активации.</span><span class="sxs-lookup"><span data-stu-id="051ad-141">**Activation Events**: Currently the [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) triggers four activation events.</span></span> <span data-ttu-id="051ad-142">Эти события можно использовать во многих разных сочетаниях для создания уникальных [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) поведений `MRTK/Examples/Demos/HandTracking/Scenes/` . примеры этих вариантов поведения см. в сцене хандбаседменуексампле.</span><span class="sxs-lookup"><span data-stu-id="051ad-142">These events can be used in many different combinations to create unique [`HandConstraint`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraint) behaviors, please see the HandBasedMenuExample scene under `MRTK/Examples/Demos/HandTracking/Scenes/` for examples of these behaviors.</span></span>

  * <span data-ttu-id="051ad-143">*Онхандактивате*: активируется, когда рука удовлетворяет методу ишандактиве.</span><span class="sxs-lookup"><span data-stu-id="051ad-143">*OnHandActivate*: triggers when a hand satisfies the IsHandActive method.</span></span>
  * <span data-ttu-id="051ad-144">*Онханддеактивате*: активируется, если метод ишандактиве больше не удовлетворен.</span><span class="sxs-lookup"><span data-stu-id="051ad-144">*OnHandDeactivate*: triggers when the IsHandActive method is no longer satisfied.</span></span>
  * <span data-ttu-id="051ad-145">*Онфирссанддетектед*: происходит, когда состояние отслеживания руки изменяется с No руки на первый рукой в представлении.</span><span class="sxs-lookup"><span data-stu-id="051ad-145">*OnFirstHandDetected*: occurs when the hand tracking state changes from no hands in view, to the first hand in view.</span></span>
  * <span data-ttu-id="051ad-146">*Онлассандлост*: происходит при изменении состояния отслеживания с хотя бы одной руки в представлении на отсутствие руки.</span><span class="sxs-lookup"><span data-stu-id="051ad-146">*OnLastHandLost*: occurs when the hand tracking state changes from at least one hand in view, to no hands in view.</span></span>

* <span data-ttu-id="051ad-147">**Поиск решения. логика активации и деактивации**: в настоящее время рекомендация по активации и деактивации [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) логики заключается в использовании значения упдатесолвер солверхандлер, а не при отключении или включении объекта.</span><span class="sxs-lookup"><span data-stu-id="051ad-147">**Solver Activation/Deactivation Logic**: Currently the recommendation for activating and deactivating [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) logic is to do so through the use of the SolverHandler's UpdateSolver value, rather than by disabling/enabling the object.</span></span> <span data-ttu-id="051ad-148">Это можно увидеть в примере сцены с помощью обработчиков на основе редактора, запускаемых после событий "Онманипулатионстартед/Манипулатионхандлер" присоединенного меню.</span><span class="sxs-lookup"><span data-stu-id="051ad-148">This can be seen in the example scene through the editor-based hooks triggered after the attached menu's ManipulationHandler "OnManipulationStarted/Ended" events.</span></span>

  * <span data-ttu-id="051ad-149">*Остановка логики ограничения вручную*. при попытке задать остановку объекта с ограничением руки (а также не выполнять логику активации и деактивации) задайте для параметра Упдатесолвер значение false вместо отключения хандконстраинтпалмуп.</span><span class="sxs-lookup"><span data-stu-id="051ad-149">*Stopping the hand-constraint logic*: When trying to set the hand constrained object to stop (as well as not run the activation/deactivation logic), set UpdateSolver to False rather than disabling HandConstraintPalmUp.</span></span>
    * <span data-ttu-id="051ad-150">Если вы хотите включить логику повторного подключения на основе взгляда (или даже не на основе взгляда), затем следует вызвать функцию Хандконстраинтпалмуп. Стартворлдлоккреаттаччекккораутине ().</span><span class="sxs-lookup"><span data-stu-id="051ad-150">If you want to enable the gaze-based (or even non-gaze-based) Reattach logic, this is then followed by calling the HandConstraintPalmUp.StartWorldLockReattachCheckCoroutine() function.</span></span> <span data-ttu-id="051ad-151">Это вызовет соподпрограмму, которая затем проверит, соблюдается ли критерий "Исвалидконтроллер", и установит Упдатесолвер в значение true (или если объект отключен).</span><span class="sxs-lookup"><span data-stu-id="051ad-151">This will trigger a coroutine that then continues to check if the "IsValidController" criteria is met and will set UpdateSolver to True once it is (or the object is disabled)</span></span>
  * <span data-ttu-id="051ad-152">*Запуск логики ограничения вручную*: при попытке задать объект с ограничением руки для повторного запуска после руки (в зависимости от того, соответствует ли он условиям активации), установите для параметра упдатесолвер солверхандлер значение true.</span><span class="sxs-lookup"><span data-stu-id="051ad-152">*Starting the hand-constraint logic*: When trying to set the hand constrained object to start following your hand again (based on whether it meets the activation criteria), set the SolverHandler's UpdateSolver to true.</span></span>

* <span data-ttu-id="051ad-153">**Повторное присоединение логики**. в настоящее время [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) можно автоматически повторно присоединить целевой объект к отслеживающей точке независимо от того, имеет ли Упдатесолвер солверхандлер значение true или нет.</span><span class="sxs-lookup"><span data-stu-id="051ad-153">**Reattach Logic**: Currently the [`HandConstraintPalmUp`](xref:Microsoft.MixedReality.Toolkit.Utilities.Solvers.HandConstraintPalmUp) is able to automatically reattach the target object to the tracked point, regardless of whether the SolverHandler's UpdateSolver is True or not.</span></span> <span data-ttu-id="051ad-154">Это делается с помощью вызова функции Стартворлдлоккреаттаччекккораутине () Хандконстраинтпалмуп после того, как она была заблокирована в мире (в данном случае фактически устанавливается значение Солверхандлер Упдатесолвер равным false).</span><span class="sxs-lookup"><span data-stu-id="051ad-154">This is done through calling the HandConstraintPalmUp's StartWorldLockReattachCheckCoroutine() function, after it's been world-locked (which in this case, is effectively setting the SolverHandler's UpdateSolver to False).</span></span>

## <a name="see-also"></a><span data-ttu-id="051ad-155">См. также:</span><span class="sxs-lookup"><span data-stu-id="051ad-155">See also</span></span>

* [<span data-ttu-id="051ad-156">Button</span><span class="sxs-lookup"><span data-stu-id="051ad-156">Button</span></span>](button.md)
* [<span data-ttu-id="051ad-157">Ближайшее меню</span><span class="sxs-lookup"><span data-stu-id="051ad-157">Near Menu</span></span>](near-menu.md)
