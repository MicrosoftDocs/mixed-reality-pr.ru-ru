---
title: Диспетчер ограничений
description: Общие сведения о диспетчере ограничений в МРТК
author: CDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, смешанная реальность, разработка, MRTK
ms.openlocfilehash: 7036bb552952a0e45a8ba465d769a8952e48bc36
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2021
ms.locfileid: "113177554"
---
# <a name="constraint-manager"></a>Диспетчер ограничений

Диспетчер ограничений позволяет применять к преобразованию набор компонентов ограничений. [`TransformConstraint`](xref:Microsoft.MixedReality.Toolkit.UI.TransformConstraint)Можно принять во внимание компоненты типа, присоединенные к игровому объекту.
По умолчанию диспетчер ограничений автоматически соберет все [компоненты ограничений](#transform-constraints) , присоединенные к игровому объекту, и применит их к обработанным преобразованиям.
Однако пользователи могут явно настроить список примененных ограничений вручную и разрешить применение только подмножества присоединенных ограничений.

В настоящее время следующие элементы UX МРТК поддерживают диспетчер ограничений:

- [Элемент управления Bounds](bounds-control.md)
- [Манипулятор объекта](object-manipulator.md)

## <a name="inspector-properties-and-fields"></a>Свойства и поля инспектора

Управление ограничениями может осуществляться в двух режимах:

- Автоматический выбор ограничений
- Выбор ограничений вручную

### <a name="auto-constraint-selection"></a>Автоматический выбор ограничений

<img src="../images/constraint-manager/AutoSelection.png" width="600" alt="Auto Selection">

Режим по умолчанию для диспетчера ограничений, выбор автоматического ограничения, предоставит список всех присоединенных ограничений, а также [кнопки переход к](#go-to-component) и [Добавить ограничение](#add-constraint-to-game-object).

#### <a name="add-constraint-to-game-object"></a>Добавить ограничение к игровому объекту

Эта кнопка позволяет добавлять компонент ограничения непосредственно из инспектора диспетчера ограничений. Все типы ограничений в проекте должны быть видимыми здесь. Дополнительные сведения см. в разделе [ограничения преобразования](#transform-constraints) .

#### <a name="go-to-component"></a>Переход к компоненту

Все ограничения, обнаруженные в объекте будет, перечислены здесь с помощью кнопки *"переход к компоненту* ". Эта кнопка приведет к прокрутке инспектора до выбранного компонента ограничения, чтобы его можно было настроить.

### <a name="manual-constraint-selection"></a>Выбор ограничений вручную

<img src="../images/constraint-manager/ManualSelection.png" width="600" alt="Manual Selection">

Если для диспетчера ограничений задан режим вручную, то все ограничения, связанные в списке ограничений, обрабатываются и применяются к преобразованию. В отображаемом списке будут показаны только выбранные пользователем ограничения, а также [кнопки](#go-to-component) и параметры для удаления или добавления записей.
При первом включении режима "вручную" Диспетчер ограничений заполнит список всеми доступными компонентами в качестве отправной точки для выбора присоединенных компонентов ограничений.

### <a name="remove-entry"></a>Удалить запись

Это приведет к удалению записи из списка, выбранного вручную. Обратите внимание, что этот параметр не удаляет компонент ограничения из игрового объекта. Компоненты ограничений всегда необходимо удалять вручную, чтобы предотвратить случайное разбиение любого другого компонента, ссылающегося на этот компонент.

### <a name="add-entry"></a>Добавить запись

Добавить запись открывает раскрывающийся список всех доступных компонентов ограничений, которые еще не включены в список вручную. Щелкнув любую из записей, вы добавите этот компонент к выбранному ограничению вручную.

### <a name="add-new-constraint"></a>Добавить новое ограничение

Этот параметр позволяет добавить компонент выбранного типа к игровому объекту и добавить только что созданный компонент ограничения в список ручных ограничений.

## <a name="transform-constraints"></a>Ограничения преобразования

Ограничения можно использовать для ограничения манипуляций. Например, некоторым приложениям может потребоваться поворот, но также требуется, чтобы объект оставался вертикальным. В этом случае `RotationAxisConstraint` можно добавить объект к объекту и использовать его для ограничения поворота по оси y. МРТК предоставляет ряд ограничений, которые описаны ниже.

Кроме того, можно определить новые ограничения и использовать их для создания уникального поведения манипуляции, которое может потребоваться для некоторых приложений. Для этого создайте скрипт, который наследует от [`TransformConstraint`](xref:Microsoft.MixedReality.Toolkit.UI.TransformConstraint) и реализует абстрактное `ConstraintType` свойство и абстрактный `ApplyConstraint` метод. При добавлении нового ограничения к объекту оно должно ограничивать манипуляцию определенным способом. Это новое ограничение должно также отображаться в [автоматическом выборе](#auto-constraint-selection) диспетчера ограничений или в раскрывающемся списке [Добавить запись](#add-entry) в ручном режиме.

Все ограничения, предоставляемые МРТК, имеют следующие свойства:

#### <a name="hand-type"></a>Тип руки

Указывает, используется ли ограничение для одного руки, двух операций или обоих видов манипуляций. Так как это свойство является флагом, можно выбрать оба параметра.

- *Один рукой*. ограничение будет использоваться во время одной манипуляции, если выбрано.
- *Два руки*: ограничение будет использоваться во время двух манипуляций, если выбрано.

#### <a name="proximity-type"></a>Тип сходства

Указывает, используется ли ограничение для обработки практически, дальнего или обоих видов. Так как это свойство является флагом, можно выбрать оба параметра.

- *NEAR*: ограничение будет использоваться во время близкой манипуляции, если оно выбрано.
- *FAR*: во время манипуляции будет использоваться ограничение, если оно выбрано.

### <a name="faceuserconstraint"></a>фацеусерконстраинт

<img src="../images/object-manipulator/MRTK_Constraint_FaceUser.gif" width="400" alt="Constraint Face User">

Если это ограничение прикрепляется к объекту, поворот будет ограничен, поэтому объект всегда будет лицом к пользователю. Это удобно для планшетов и панелей. `FaceUserConstraint`Ниже приведены свойства для.

#### <a name="face-away"></a>Лицевая сторону

Объект отрывается от пользователя, если значение равно true.

### <a name="fixeddistanceconstraint"></a>фикседдистанцеконстраинт

<img src="../images/object-manipulator/MRTK_Constraint_FixedDistance.gif" width="400" alt="Constraint Fixed distances">

Это ограничение устраняет расстояние между управляемым объектом и другим преобразованием объекта при запуске манипуляции. Это полезно для такого поведения, как исправление расстояния от управляемого объекта до преобразования Head. `FixedDistanceConstraint`Ниже приведены свойства для.

#### <a name="constraint-transform"></a>Преобразование ограничений

Это другое преобразование, в котором управляемый объект будет иметь фиксированное расстояние до. По умолчанию используется преобразование Camera.

### <a name="fixedrotationtouserconstraint"></a>фикседротатионтаусерконстраинт

<img src="../images/object-manipulator/MRTK_Constraint_FixedRotationToUser.gif" width="400" alt="Fixed Rotation">

Это ограничение исправляет относительный поворот между пользователем и управляемым объектом во время его манипуляции. Это полезно для планшетов и панелей, так как это гарантирует, что управляемый объект всегда будет показывать ту же грань пользователю, что и в начале манипуляции. Не `FixedRotationToUserConstraint` имеет уникальных свойств.

### <a name="fixedrotationtoworldconstraint"></a>фикседротатионтоворлдконстраинт

<img src="../images/object-manipulator/MRTK_Constraint_FixedRotationToWorld.gif" width="400" alt="Fixed rotation to the world">

Это ограничение устраняет глобальное вращение управляемого объекта во время его манипуляции. Это может быть полезно в случаях, когда вращение не должно быть частью манипуляции. Не `FixedRotationToWorldConstraint` имеет уникальных свойств:

### <a name="maintainapparentsizeconstraint"></a>маинтаинаппарентсизеконстраинт

<img src="../images/object-manipulator/MRTK_Constraint_MaintainApparentSize.gif" width="400" alt="Maintain Apparent size">

Если это ограничение прикрепляется к объекту независимо от того, насколько он находится от пользователя, он будет сохранять тот же видимый размер для пользователя (т. е. он занимает ту же часть поля зрения пользователя). Это можно использовать для того, чтобы панель планшета или текста оставалась доступной для чтения при манипуляции. Не `MaintainApparentSizeConstraint` имеет уникальных свойств:

### <a name="moveaxisconstraint"></a>мовеаксисконстраинт

<img src="../images/object-manipulator/MRTK_Constraint_MoveAxis.gif" width="400" alt="Constraint Move Axis">

Это ограничение можно использовать для исправления осей, вдоль которых можно переместить управляемый объект. Это может быть полезно для манипуляций с объектами на поверхности плоскости или вдоль линии. `MoveAxisConstraint`Ниже приведены свойства для.

#### <a name="constraint-on-movement"></a>Ограничение на перемещение

Указывает, для каких осей запрещается перемещение. По умолчанию эти оси будут глобальными, а не локальными, но их можно изменить ниже. Поскольку это свойство является флагом, можно выбрать любое количество параметров.

- *Ось x*: перемещение по оси x ограничено, если оно выбрано.
- *Ось y*: перемещение по оси y ограничено, если оно выбрано.
- *Ось z*: перемещение по оси z ограничено, если оно выбрано.

#### <a name="use-local-space-for-constraint"></a>Использовать локальное пространство для ограничения

При значении true ограничения для локальных преобразований управляемого объекта будут ограничены. Значение по умолчанию: false.

### <a name="rotationaxisconstraint"></a>ротатионаксисконстраинт

<img src="../images/object-manipulator/MRTK_Constraint_RotationAxis.gif" width="400" alt="Constraint Rotation Axis">

Это ограничение можно использовать, чтобы исправить, какие оси можно поворачивать с помощью управляемого объекта. Это может быть полезно для сохранения управляемого объекта по вертикали, но по-прежнему разрешает вращение по оси y. `RotationAxisConstraint`Ниже приведены свойства для.

#### <a name="constraint-on-rotation"></a>Ограничение при повороте

Указывает, какие оси не препятствуют повороту. По умолчанию эти оси будут глобальными, а не локальными, но их можно изменить ниже. Поскольку это свойство является флагом, можно выбрать любое количество параметров.

- *Ось y*: поворот оси y ограничен, если он выбран.
- *Ось z*: поворот оси z ограничен, если он выбран.
- *Ось x*: поворот вокруг оси x ограничен, если он выбран.

#### <a name="use-local-space-for-constraint"></a>Использовать локальное пространство для ограничения

При значении true ограничения для локальных преобразований управляемого объекта будут ограничены. Значение по умолчанию: false.

### <a name="minmaxscaleconstraint"></a>минмаксскалеконстраинт

<img src="../images/object-manipulator/MRTK_Constraint_MinMaxScale.gif" width="400" alt="Min Max Constatint">

Это ограничение позволяет задать минимальное и максимальное значения для шкалы управляемого объекта. Это полезно для предотвращения слишком большого или недопустимого масштабирования объектов пользователями. `MinMaxScaleConstraint`Ниже приведены свойства для.

#### <a name="scale-minimum"></a>Минимум шкалы

Минимальное значение масштаба во время манипуляции.

#### <a name="scale-maximum"></a>Максимальный масштаб

Максимальное значение масштаба во время манипуляции.

#### <a name="relative-to-initial-state"></a>Относительно первоначального состояния

Если значение равно true, приведенные выше значения будут интерпретироваться как относительные от исходного масштаба объектов. В противном случае они будут интерпретироваться как абсолютные значения масштаба.
