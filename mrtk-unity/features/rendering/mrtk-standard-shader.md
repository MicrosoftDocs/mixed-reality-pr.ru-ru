---
title: Стандартный шейдер MRTK
description: Документация по Мрткстандардшадер
author: CDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, Смешанная реальность, разработка, МРТК, шейдер материалов
ms.openlocfilehash: 8b570ebb023305cecbeca16b32832417a3f57cce
ms.sourcegitcommit: c0ba7d7bb57bb5dda65ee9019229b68c2ee7c267
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2021
ms.locfileid: "110145118"
---
# <a name="mrtk-standard-shader"></a><span data-ttu-id="aecf9-104">Стандартный шейдер MRTK</span><span class="sxs-lookup"><span data-stu-id="aecf9-104">MRTK Standard Shader</span></span>

![Примеры стандартных шейдеров](../images/mrtk-standard-shader/MRTK_StandardShader.jpg)

<span data-ttu-id="aecf9-106">Стандартная система затенения МРТК использует один гибкий шейдер, который может обеспечить визуальные элементы, аналогичные стандартному шейдеру Unity, реализовывать основные принципы [разработки](https://www.microsoft.com/design/fluent/) , а также работать на устройствах смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="aecf9-106">MRTK Standard shading system utilizes a single, flexible shader that can achieve visuals similar to Unity's Standard Shader, implement [Fluent Design System](https://www.microsoft.com/design/fluent/) principles, and remain performant on mixed reality devices.</span></span>

## <a name="example-scenes"></a><span data-ttu-id="aecf9-107">Примеры сцен</span><span class="sxs-lookup"><span data-stu-id="aecf9-107">Example scenes</span></span>

<span data-ttu-id="aecf9-108">Примеры материалов шейдера можно найти в сцене **материалгаллери** в разделе `MRTK/Examples/Demos/StandardShader/Scenes/` .</span><span class="sxs-lookup"><span data-stu-id="aecf9-108">You can find the shader material examples in the **MaterialGallery** scene under `MRTK/Examples/Demos/StandardShader/Scenes/`.</span></span> <span data-ttu-id="aecf9-109">Все материалы в этой сцене используют шейдер МРТК/Standard.</span><span class="sxs-lookup"><span data-stu-id="aecf9-109">All materials in this scene are using the MRTK/Standard shader.</span></span>

![Коллекция материалов](../images/mrtk-standard-shader/MRTK_MaterialGallery.jpg)

<span data-ttu-id="aecf9-111">Можно найти сцену сравнения, чтобы сравнить и протестировать МРТК/Стандартный шейдер с примером шейдера Unity/Standard в сцене **стандардматериалкомпарисон** в разделе `MRTK/Examples/Demos/StandardShader/Scenes/` .</span><span class="sxs-lookup"><span data-stu-id="aecf9-111">You can find a comparison scene to compare and test the MRTK/Standard shader against the Unity/Standard shader example in the **StandardMaterialComparison** scene under `MRTK/Examples/Demos/StandardShader/Scenes/`.</span></span>

![Сравнение материалов](../images/mrtk-standard-shader/MRTK_StandardMaterialComparison.gif)

## <a name="architecture"></a><span data-ttu-id="aecf9-113">Архитектура</span><span class="sxs-lookup"><span data-stu-id="aecf9-113">Architecture</span></span>

<span data-ttu-id="aecf9-114">Система заливки МРТК/Standard — это «Uber шейдер», который использует [функцию «вариант программы шейдера Unity](https://docs.unity3d.com/Manual/SL-MultipleProgramVariants.html) » для автоматического создания оптимального кода шейдера на основе свойств материала.</span><span class="sxs-lookup"><span data-stu-id="aecf9-114">The MRTK/Standard shading system is an "uber shader" that uses [Unity's shader program variant feature](https://docs.unity3d.com/Manual/SL-MultipleProgramVariants.html) to auto-generate optimal shader code based on material properties.</span></span> <span data-ttu-id="aecf9-115">Когда пользователь выбирает свойства материала в инспекторе материалов, он повлечет за собой только затраты на производительность для включенных функций.</span><span class="sxs-lookup"><span data-stu-id="aecf9-115">When a user selects material properties in the material inspector, they only incur performance cost for features they have enabled.</span></span>

## <a name="material-inspector"></a><span data-ttu-id="aecf9-116">Инспектор материалов</span><span class="sxs-lookup"><span data-stu-id="aecf9-116">Material inspector</span></span>

<span data-ttu-id="aecf9-117">Пользовательский инспектор материалов существует для вызываемого шейдера МРТК/Standard [`MixedRealityStandardShaderGUI.cs`](xref:Microsoft.MixedReality.Toolkit.Editor.MixedRealityStandardShaderGUI) .</span><span class="sxs-lookup"><span data-stu-id="aecf9-117">A custom material inspector exists for the MRTK/Standard shader called [`MixedRealityStandardShaderGUI.cs`](xref:Microsoft.MixedReality.Toolkit.Editor.MixedRealityStandardShaderGUI).</span></span> <span data-ttu-id="aecf9-118">Инспектор автоматически включает или отключает функции шейдера на основе выбора пользователя и АИДЕС при настройке состояния визуализации.</span><span class="sxs-lookup"><span data-stu-id="aecf9-118">The inspector automatically enables/disables shader features, based on user selection and aides in setting up render state.</span></span> <span data-ttu-id="aecf9-119">Дополнительные сведения о каждом компоненте **см. в подсказке для каждого свойства в редакторе Unity.**</span><span class="sxs-lookup"><span data-stu-id="aecf9-119">For more information about each feature **please hover over each property in the Unity Editor for a tooltip.**</span></span>

![Инспектор материалов](../images/mrtk-standard-shader/MRTK_MaterialInspector.jpg)

<span data-ttu-id="aecf9-121">Первая часть инспектора управляет состоянием рендеринга материала.</span><span class="sxs-lookup"><span data-stu-id="aecf9-121">The first portion of the inspector controls the material's render state.</span></span> <span data-ttu-id="aecf9-122">*Режим рендеринга* определяет, когда и как будет подготавливаться материал.</span><span class="sxs-lookup"><span data-stu-id="aecf9-122">*Rendering Mode* determines when and how a material will be rendered.</span></span> <span data-ttu-id="aecf9-123">Целью шейдера МРТК/Standard является отражение [режимов рендеринга, находящихся в шейдере Unity/Standard](https://docs.unity3d.com/Manual/StandardShaderMaterialParameterRenderingMode.html).</span><span class="sxs-lookup"><span data-stu-id="aecf9-123">The aim of the MRTK/Standard shader is to mirror the [rendering modes found in the Unity/Standard shader](https://docs.unity3d.com/Manual/StandardShaderMaterialParameterRenderingMode.html).</span></span> <span data-ttu-id="aecf9-124">Шейдер МРТК/Standard также включает режим подготовки к просмотру и *Пользовательский* *режим отрисовки* для полного пользовательского элемента управления.</span><span class="sxs-lookup"><span data-stu-id="aecf9-124">The MRTK/Standard shader also includes an *Additive* rendering mode and *Custom* rendering mode for complete user control.</span></span>

| <span data-ttu-id="aecf9-125">Режим рендеринга</span><span class="sxs-lookup"><span data-stu-id="aecf9-125">Rendering Mode</span></span> |         <span data-ttu-id="aecf9-126">Описание:</span><span class="sxs-lookup"><span data-stu-id="aecf9-126">Description</span></span>                                                       |
|----------------|---------------------------------------------------------------------------|
| <span data-ttu-id="aecf9-127">Непрозрачный</span><span class="sxs-lookup"><span data-stu-id="aecf9-127">Opaque</span></span>         | <span data-ttu-id="aecf9-128">Параметры Подходит для нормальных сплошных объектов без прозрачных областей.</span><span class="sxs-lookup"><span data-stu-id="aecf9-128">(Default) Suitable for normal solid objects with no transparent areas.</span></span>    |
| <span data-ttu-id="aecf9-129">Отверстий</span><span class="sxs-lookup"><span data-stu-id="aecf9-129">Cutout</span></span>         | <span data-ttu-id="aecf9-130">Позволяет создавать прозрачные эффекты с жесткими краями между прозрачными и прозрачными областями.</span><span class="sxs-lookup"><span data-stu-id="aecf9-130">Allows creation of transparent effects that have hard edges between the opaque and transparent areas.</span></span> <span data-ttu-id="aecf9-131">В этом режиме не существует полупрозрачных областей, текстура имеет значение 100% непрозрачность или невидимо.</span><span class="sxs-lookup"><span data-stu-id="aecf9-131">In this mode, there are no semi-transparent areas, the texture is either 100% opaque, or invisible.</span></span> <span data-ttu-id="aecf9-132">Это полезно при использовании прозрачности для создания формы материалов, например растительности.</span><span class="sxs-lookup"><span data-stu-id="aecf9-132">This is useful when using transparency to create the shape of materials, such as vegetation.</span></span> |
| <span data-ttu-id="aecf9-133">Исчезание</span><span class="sxs-lookup"><span data-stu-id="aecf9-133">Fade</span></span>           | <span data-ttu-id="aecf9-134">Позволяет значениям прозрачности полностью ослабить объект, включая любые отраженные блики или отражения, которые он может иметь.</span><span class="sxs-lookup"><span data-stu-id="aecf9-134">Allows the transparency values to entirely fade an object out, including any specular highlights or reflections it may have.</span></span> <span data-ttu-id="aecf9-135">Этот режим удобен, если нужно анимировать объект в режиме затухания. Он не подходит для отрисовки реалистичных прозрачных материалов, таких как четкий пластик или эффект стекла, так как отражения и выделения также будут удалены.</span><span class="sxs-lookup"><span data-stu-id="aecf9-135">This mode is useful if you want to animate an object fading in or out. It is not suitable for rendering realistic transparent materials such as clear plastic or glass because the reflections and highlights will also be faded out.</span></span> |
| <span data-ttu-id="aecf9-136">Прозрачный</span><span class="sxs-lookup"><span data-stu-id="aecf9-136">Transparent</span></span>    | <span data-ttu-id="aecf9-137">Подходит для визуализации реалистичных прозрачных материалов, таких как четкие пластика или стекло.</span><span class="sxs-lookup"><span data-stu-id="aecf9-137">Suitable for rendering realistic transparent materials such as clear plastic or glass.</span></span> <span data-ttu-id="aecf9-138">В этом режиме материал будет принимать значения прозрачности (на основе альфа-канала текстуры и альфа-составляющей цвета оттенка).</span><span class="sxs-lookup"><span data-stu-id="aecf9-138">In this mode, the material itself will take on transparency values (based on the texture’s alpha channel and the alpha of the tint colour).</span></span> <span data-ttu-id="aecf9-139">Однако отражения и выделения освещения остаются видимыми в полной мере, как в случае с реальными прозрачными материалами.</span><span class="sxs-lookup"><span data-stu-id="aecf9-139">However, reflections and lighting highlights will remain visible at full clarity as is the case with real transparent materials.</span></span> |
| <span data-ttu-id="aecf9-140">Аддитивный</span><span class="sxs-lookup"><span data-stu-id="aecf9-140">Additive</span></span>       | <span data-ttu-id="aecf9-141">Включает режим смешения, который суммирует предыдущий цвет пикселя с текущим цветом пикселя.</span><span class="sxs-lookup"><span data-stu-id="aecf9-141">Enables an additive blending mode, which sums the previous pixel color with the current pixel color.</span></span> <span data-ttu-id="aecf9-142">Это предпочтительный режим прозрачности, позволяющий избежать проблем с сортировкой по прозрачности.</span><span class="sxs-lookup"><span data-stu-id="aecf9-142">This is the preferred transparency mode to avoid transparency sorting issues.</span></span>     |
| <span data-ttu-id="aecf9-143">Другой</span><span class="sxs-lookup"><span data-stu-id="aecf9-143">Custom</span></span>         | <span data-ttu-id="aecf9-144">Позволяет управлять каждым аспектом режима рендеринга вручную.</span><span class="sxs-lookup"><span data-stu-id="aecf9-144">Allows for every aspect of the rendering mode to be controlled manually.</span></span> <span data-ttu-id="aecf9-145">Только для расширенного использования.</span><span class="sxs-lookup"><span data-stu-id="aecf9-145">For advanced usage only.</span></span>   |

![Режимы подготовки к просмотру](../images/mrtk-standard-shader/MRTK_RenderingModes.jpg)

| <span data-ttu-id="aecf9-147">Режим отбора</span><span class="sxs-lookup"><span data-stu-id="aecf9-147">Cull Mode</span></span> |             <span data-ttu-id="aecf9-148">Описание:</span><span class="sxs-lookup"><span data-stu-id="aecf9-148">Description</span></span>                                                                                                                                                                       |
|-----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="aecf9-149">Выключено</span><span class="sxs-lookup"><span data-stu-id="aecf9-149">Off</span></span>       | <span data-ttu-id="aecf9-150">Отключает отбор лиц.</span><span class="sxs-lookup"><span data-stu-id="aecf9-150">Disables face culling.</span></span> <span data-ttu-id="aecf9-151">Для отбора следует установить значение OFF, только если требуется двусторонняя сетка.</span><span class="sxs-lookup"><span data-stu-id="aecf9-151">Culling should only be set to Off when a two sided mesh is required.</span></span>                                                                                        |
| <span data-ttu-id="aecf9-152">Front</span><span class="sxs-lookup"><span data-stu-id="aecf9-152">Front</span></span>     | <span data-ttu-id="aecf9-153">Включение внешнего отбора лицевой стороны.</span><span class="sxs-lookup"><span data-stu-id="aecf9-153">Enables front face culling.</span></span>                                                                                                                                                        |
| <span data-ttu-id="aecf9-154">Назад</span><span class="sxs-lookup"><span data-stu-id="aecf9-154">Back</span></span>      | <span data-ttu-id="aecf9-155">Параметры Включает [отбор лицевой стороны](https://en.wikipedia.org/wiki/Back-face_culling).</span><span class="sxs-lookup"><span data-stu-id="aecf9-155">(Default) Enables [back face culling](https://en.wikipedia.org/wiki/Back-face_culling).</span></span> <span data-ttu-id="aecf9-156">Для повышения производительности отрисовки должно быть включено истечение для обратной стороны.</span><span class="sxs-lookup"><span data-stu-id="aecf9-156">Back face culling should be enabled as often as possible to improve rendering performance.</span></span> |

## <a name="performance"></a><span data-ttu-id="aecf9-157">Производительность</span><span class="sxs-lookup"><span data-stu-id="aecf9-157">Performance</span></span>

<span data-ttu-id="aecf9-158">Одним из основных преимуществ использования стандартного шейдера МРТК для стандартного шейдера Unity является производительность.</span><span class="sxs-lookup"><span data-stu-id="aecf9-158">One of the primary advantages to using the MRTK Standard shader over the Unity standard shader is performance.</span></span> <span data-ttu-id="aecf9-159">Стандартный шейдер МРТК является расширяемым и использует только включенные функции.</span><span class="sxs-lookup"><span data-stu-id="aecf9-159">The MRTK Standard Shader is extensible to only utilize the features enabled.</span></span> <span data-ttu-id="aecf9-160">Однако также был написан Стандартный шейдер МРТК для предоставления сравнимых результатов Aesthetic в качестве шейдера стандарта Unity, но с меньшими затратами.</span><span class="sxs-lookup"><span data-stu-id="aecf9-160">However, the MRTK Standard shader has also been written to deliver comparable aesthetic results as the Unity Standard shader, but at a much lower cost.</span></span> <span data-ttu-id="aecf9-161">Простой способ сравнить производительность шейдера заключается в количестве операций, которые необходимо выполнить с помощью GPU.</span><span class="sxs-lookup"><span data-stu-id="aecf9-161">One simple way to compare shader performance is via the number of operations that needs to be performed on the GPU.</span></span> <span data-ttu-id="aecf9-162">Конечно, величина вычислений может отклонения от включенных функций и других конфигураций подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="aecf9-162">Of course, the magnitude of calculations may fluctuate by features enabled and other rendering configurations.</span></span> <span data-ttu-id="aecf9-163">Но в целом стандартный шейдер МРТК выполняет значительно меньше вычислений, чем стандартный шейдер Unity.</span><span class="sxs-lookup"><span data-stu-id="aecf9-163">But, in general, the MRTK Standard shader performs significantly less computation than the Unity Standard shader.</span></span>

<span data-ttu-id="aecf9-164">Пример статистики для стандартного шейдера Unity</span><span class="sxs-lookup"><span data-stu-id="aecf9-164">Unity Standard shader statistics example</span></span>

![Статистика стандартных шейдеров Unity](../images/performance/UnityStandardShader-Stats.PNG)

<span data-ttu-id="aecf9-166">Пример статистики стандартного шейдера МРТК</span><span class="sxs-lookup"><span data-stu-id="aecf9-166">MRTK Standard shader statistics example</span></span>

![Статистика стандартного шейдера МРТК](../images/performance/MRTKStandardShader-Stats.PNG)

> [!NOTE]
> <span data-ttu-id="aecf9-168">Эти результаты можно создать, выбрав и просмотрев [ресурс шейдера](https://docs.unity3d.com/Manual/class-Shader.html) в инспекторе Unity, а затем нажав кнопку *компилировать и показывать код* .</span><span class="sxs-lookup"><span data-stu-id="aecf9-168">These results can be generated by selecting and viewing a [shader asset](https://docs.unity3d.com/Manual/class-Shader.html) in the Unity inspector, then clicking the *Compile and show code* button.</span></span>

## <a name="lighting"></a><span data-ttu-id="aecf9-169">Освещение</span><span class="sxs-lookup"><span data-stu-id="aecf9-169">Lighting</span></span>

<span data-ttu-id="aecf9-170">МРТК/Standard использует простую аппроксимацию для освещения.</span><span class="sxs-lookup"><span data-stu-id="aecf9-170">The MRTK/Standard uses a simple approximation for lighting.</span></span> <span data-ttu-id="aecf9-171">Поскольку этот шейдер не вычисляется для физической корректности и экономии энергии, он быстро и эффективно готовится к просмотру.</span><span class="sxs-lookup"><span data-stu-id="aecf9-171">Because this shader does not calculate for physical correctness and energy conservation, it renders quickly and efficiently.</span></span> <span data-ttu-id="aecf9-172">Blinn-Phong является основным приемом освещения, который смешивается с Френелю и освещением на основе изображений и отражается как физическое освещение.</span><span class="sxs-lookup"><span data-stu-id="aecf9-172">Blinn-Phong is the primary lighting technique which is blended with Fresnel and image-based lighting to approximate physically-based lighting.</span></span> <span data-ttu-id="aecf9-173">Шейдер поддерживает следующие приемы освещения:</span><span class="sxs-lookup"><span data-stu-id="aecf9-173">The shader supports the following lighting techniques:</span></span>

### <a name="directional-light"></a><span data-ttu-id="aecf9-174">Направленное освещение</span><span class="sxs-lookup"><span data-stu-id="aecf9-174">Directional light</span></span>

<span data-ttu-id="aecf9-175">Шейдер будет учитывать направление, цвет и интенсивность первого векторного освещения Unity в сцене (если она включена).</span><span class="sxs-lookup"><span data-stu-id="aecf9-175">The shader will respect the direction, color, and intensity of the first Unity Directional Light in the scene (if enabled).</span></span> <span data-ttu-id="aecf9-176">Динамические источники света, световые индикаторы или любой другой источник Unity не будут рассматриваться в режиме освещения в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="aecf9-176">Dynamic point lights, spot lights, or any other Unity light will not be considered in real time lighting.</span></span>

### <a name="spherical-harmonics"></a><span data-ttu-id="aecf9-177">Сферические гармонические колебания</span><span class="sxs-lookup"><span data-stu-id="aecf9-177">Spherical harmonics</span></span>

<span data-ttu-id="aecf9-178">Шейдер будет использовать легкие зонды для приблизительного освещения сцены с помощью [сферических гармоний](https://docs.unity3d.com/Manual/LightProbes-TechnicalInformation.html), если они включены.</span><span class="sxs-lookup"><span data-stu-id="aecf9-178">The shader will use Light Probes to approximate lights in the scene using [Spherical Harmonics](https://docs.unity3d.com/Manual/LightProbes-TechnicalInformation.html), if enabled.</span></span> <span data-ttu-id="aecf9-179">Расчеты сферических гармоний выполняются на вершину, чтобы сократить затраты на вычисления.</span><span class="sxs-lookup"><span data-stu-id="aecf9-179">Spherical harmonics calculations are performed per vertex to reduce calculation cost.</span></span>

### <a name="lightmapping"></a><span data-ttu-id="aecf9-180">лигхтмаппинг</span><span class="sxs-lookup"><span data-stu-id="aecf9-180">Lightmapping</span></span>

<span data-ttu-id="aecf9-181">Для статического освещения шейдер будет учитывать лигхтмапс, построенные [системой Лигхтмаппинг](https://docs.unity3d.com/Manual/Lightmapping.html)Unity.</span><span class="sxs-lookup"><span data-stu-id="aecf9-181">For static lighting, the shader will respect lightmaps built by Unity's [Lightmapping system](https://docs.unity3d.com/Manual/Lightmapping.html).</span></span> <span data-ttu-id="aecf9-182">Просто пометьте модуль подготовки отчетов как статический (или лигхтмап статический), чтобы использовать лигхтмапс.</span><span class="sxs-lookup"><span data-stu-id="aecf9-182">Simply mark the renderer as static (or lightmap static) to use lightmaps.</span></span>

### <a name="hover-light"></a><span data-ttu-id="aecf9-183">Светлое наведение</span><span class="sxs-lookup"><span data-stu-id="aecf9-183">Hover light</span></span>

* <span data-ttu-id="aecf9-184">См. [освещение наведения](hover-light.md)</span><span class="sxs-lookup"><span data-stu-id="aecf9-184">See [Hover Light](hover-light.md)</span></span>

### <a name="proximity-light"></a><span data-ttu-id="aecf9-185">Неблизкое освещение</span><span class="sxs-lookup"><span data-stu-id="aecf9-185">Proximity light</span></span>

* <span data-ttu-id="aecf9-186">См. [освещение](proximity-light.md)</span><span class="sxs-lookup"><span data-stu-id="aecf9-186">See [Proximity Light](proximity-light.md)</span></span>

## <a name="lightweight-scriptable-render-pipeline-support"></a><span data-ttu-id="aecf9-187">Поддержка упрощенного скрипта рендеринга</span><span class="sxs-lookup"><span data-stu-id="aecf9-187">Lightweight Scriptable Render Pipeline support</span></span>

<span data-ttu-id="aecf9-188">МРТК содержит путь обновления, позволяющий разработчикам использовать упрощенный скрипт рендеринга (ЛВРП) Unity с помощью шейдеров МРТК.</span><span class="sxs-lookup"><span data-stu-id="aecf9-188">The MRTK contains an upgrade path to allow developers to utilize Unity's Lightweight Scriptable Render Pipeline (LWRP) with MRTK shaders.</span></span> <span data-ttu-id="aecf9-189">Проверено в Unity 2019.1.1 F1 и пакет 5.7.2. Lightweight RP.</span><span class="sxs-lookup"><span data-stu-id="aecf9-189">Tested in Unity 2019.1.1f1 and Lightweight RP 5.7.2 package.</span></span> <span data-ttu-id="aecf9-190">инструкции по началу работы с ЛВРП см. на [этой странице](https://docs.unity3d.com/Packages/com.unity.render-pipelines.lightweight@5.10/manual/getting-started-with-lwrp.html).</span><span class="sxs-lookup"><span data-stu-id="aecf9-190">or instructions on getting started with the LWRP, see [this page](https://docs.unity3d.com/Packages/com.unity.render-pipelines.lightweight@5.10/manual/getting-started-with-lwrp.html).</span></span>

<span data-ttu-id="aecf9-191">Чтобы выполнить обновление МРТК, выберите пункт " **набор средств для смешанной реальности — > служебные программы-> обновить Стандартный ШЕЙДЕР мртк для упрощенного конвейера визуализации** ".</span><span class="sxs-lookup"><span data-stu-id="aecf9-191">To perform the MRTK upgrade, select: **Mixed Reality Toolkit -> Utilities -> Upgrade MRTK Standard Shader for Lightweight Render Pipeline**</span></span>

![Обновление лврп](../images/mrtk-standard-shader/MRTK_LWRPUpgrade.jpg)

<span data-ttu-id="aecf9-193">После обновления будет изменен шейдер МРТК/Standard и все его пурпурные (ошибки шейдера), которые должны быть исправлены.</span><span class="sxs-lookup"><span data-stu-id="aecf9-193">After the upgrade occurs, the MRTK/Standard shader will be altered and any magenta (shader error) materials should be fixed.</span></span> <span data-ttu-id="aecf9-194">Чтобы убедиться, что обновление выполнено успешно, проверьте наличие обновлений в консоли для: **обновленные активы/микседреалититулкит/стандардассетс/shaders/микседреалитистандард. шейдер для использования с упрощенным конвейером отрисовки.**</span><span class="sxs-lookup"><span data-stu-id="aecf9-194">To verify the upgrade successfully occurred, check the console for: **Upgraded Assets/MixedRealityToolkit/StandardAssets/Shaders/MixedRealityStandard.shader for use with the Lightweight Render Pipeline.**</span></span>

## <a name="ugui-support"></a><span data-ttu-id="aecf9-195">Поддержка УГУИ</span><span class="sxs-lookup"><span data-stu-id="aecf9-195">UGUI support</span></span>

<span data-ttu-id="aecf9-196">Стандартная система заливки МРТК работает с встроенной [системой пользовательского интерфейса](https://docs.unity3d.com/Manual/UISystem.html)Unity.</span><span class="sxs-lookup"><span data-stu-id="aecf9-196">The MRTK Standard shading system works with Unity's built in [UI system](https://docs.unity3d.com/Manual/UISystem.html).</span></span> <span data-ttu-id="aecf9-197">В компонентах пользовательского интерфейса Unity матрица unity_ObjectToWorld не является матрицей преобразования локального преобразования, в которой находится графический компонент, но на его родительском холсте.</span><span class="sxs-lookup"><span data-stu-id="aecf9-197">On Unity UI components, the unity_ObjectToWorld matrix is not the transformation matrix of the local transform the Graphic component lives on but that of its parent Canvas.</span></span> <span data-ttu-id="aecf9-198">Многие эффекты МРТК/Standard шейдера должны быть известны по шкале объектов.</span><span class="sxs-lookup"><span data-stu-id="aecf9-198">Many MRTK/Standard shader effects require object scale to be known.</span></span> <span data-ttu-id="aecf9-199">Чтобы решить эту проблему, параметр [`ScaleMeshEffect.cs`](xref:Microsoft.MixedReality.Toolkit.Input.Utilities.ScaleMeshEffect) будет хранить сведения о масштабировании в атрибутах каналов UV во время создания сетки пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="aecf9-199">To solve this issue, the [`ScaleMeshEffect.cs`](xref:Microsoft.MixedReality.Toolkit.Input.Utilities.ScaleMeshEffect) will store scaling information into UV channel attributes during UI mesh construction.</span></span>

<span data-ttu-id="aecf9-200">Обратите внимание, что при использовании компонента образа Unity рекомендуется указать для исходного изображения "нет (спрайт)", чтобы пользовательский интерфейс Unity не создавал дополнительные вершины.</span><span class="sxs-lookup"><span data-stu-id="aecf9-200">Note, when using a Unity Image component, it is recommended to specify "None (Sprite)" for the Source Image to prevent Unity UI from generating extra vertices.</span></span>

<span data-ttu-id="aecf9-201">Холст в МРТК запрашивает добавление объекта, [`ScaleMeshEffect.cs`](xref:Microsoft.MixedReality.Toolkit.Input.Utilities.ScaleMeshEffect) когда он необходим:</span><span class="sxs-lookup"><span data-stu-id="aecf9-201">A Canvas within the MRTK will prompt for the addition of a [`ScaleMeshEffect.cs`](xref:Microsoft.MixedReality.Toolkit.Input.Utilities.ScaleMeshEffect) when one is required:</span></span>

![масштабирование сетки](../images/mrtk-standard-shader/MRTK_ScaleMeshEffect.jpg)

## <a name="texture-combiner"></a><span data-ttu-id="aecf9-203">Средство объединения текстур</span><span class="sxs-lookup"><span data-stu-id="aecf9-203">Texture combiner</span></span>

<span data-ttu-id="aecf9-204">Чтобы повысить четность с помощью стандартного шейдера Unity на пиксельной панели, значения гладкости, эмиссионный и перекрытия, все это можно контролировать с помощью [упаковки канала](http://wiki.polycount.com/wiki/ChannelPacking).</span><span class="sxs-lookup"><span data-stu-id="aecf9-204">To improve parity with the Unity Standard shader per pixel metallic, smoothness, emissive, and occlusion values can all be controlled via [channel packing](http://wiki.polycount.com/wiki/ChannelPacking).</span></span> <span data-ttu-id="aecf9-205">Пример:</span><span class="sxs-lookup"><span data-stu-id="aecf9-205">For example:</span></span>

![Пример схемы канала](../images/mrtk-standard-shader/MRTK_ChannelMap.gif)

<span data-ttu-id="aecf9-207">При использовании упаковки канала необходимо только выбрать и загрузить одну текстуру в память, а не четыре отдельные единицы.</span><span class="sxs-lookup"><span data-stu-id="aecf9-207">When you use channel packing, you only have to sample and load one texture into memory instead of four separate ones.</span></span> <span data-ttu-id="aecf9-208">При написании текстурных карт в программе, такой как веществ или Photoshop, вы можете упаковать их следующим образом:</span><span class="sxs-lookup"><span data-stu-id="aecf9-208">When you write your texture maps in a program like Substance or Photoshop, you can hand pack them like the following:</span></span>

| <span data-ttu-id="aecf9-209">Channel</span><span class="sxs-lookup"><span data-stu-id="aecf9-209">Channel</span></span> | <span data-ttu-id="aecf9-210">Свойство</span><span class="sxs-lookup"><span data-stu-id="aecf9-210">Property</span></span>             |
|---------|----------------------|
| <span data-ttu-id="aecf9-211">Красный</span><span class="sxs-lookup"><span data-stu-id="aecf9-211">Red</span></span>     | <span data-ttu-id="aecf9-212">Краска</span><span class="sxs-lookup"><span data-stu-id="aecf9-212">Metallic</span></span>             |
| <span data-ttu-id="aecf9-213">Зеленый</span><span class="sxs-lookup"><span data-stu-id="aecf9-213">Green</span></span>   | <span data-ttu-id="aecf9-214">Загораживание</span><span class="sxs-lookup"><span data-stu-id="aecf9-214">Occlusion</span></span>            |
| <span data-ttu-id="aecf9-215">Синий</span><span class="sxs-lookup"><span data-stu-id="aecf9-215">Blue</span></span>    | <span data-ttu-id="aecf9-216">Эмиссия (оттенки серого)</span><span class="sxs-lookup"><span data-stu-id="aecf9-216">Emission (Greyscale)</span></span> |
| <span data-ttu-id="aecf9-217">Коэффициент альфа</span><span class="sxs-lookup"><span data-stu-id="aecf9-217">Alpha</span></span>   | <span data-ttu-id="aecf9-218">Гладкости</span><span class="sxs-lookup"><span data-stu-id="aecf9-218">Smoothness</span></span>           |

<span data-ttu-id="aecf9-219">Также можно использовать инструмент для МРТК текстуры.</span><span class="sxs-lookup"><span data-stu-id="aecf9-219">Or, you can use the MRTK Texture Combiner Tool.</span></span> <span data-ttu-id="aecf9-220">Чтобы открыть средство, выберите элемент **набор средств для смешанной реальности — > служебные программы — > средство объединения текстур** , которое откроет следующее окно:</span><span class="sxs-lookup"><span data-stu-id="aecf9-220">To open the tool, select: **Mixed Reality Toolkit -> Utilities -> Texture Combiner** which will open the below window:</span></span>

![Пример средства для объединения текстур](../images/mrtk-standard-shader/MRTK_TextureCombiner.jpg)

<span data-ttu-id="aecf9-222">Это окно можно автоматически заполнить, выбрав Стандартный шейдер Unity и щелкнув "Автозаполнение из стандартного материала".</span><span class="sxs-lookup"><span data-stu-id="aecf9-222">This window can be automatically filled out by selecting a Unity Standard shader and clicking "Autopopulate from Standard Material."</span></span> <span data-ttu-id="aecf9-223">Можно также вручную указать текстуру (или постоянное значение) на красный, зеленый, синий или альфа-канал.</span><span class="sxs-lookup"><span data-stu-id="aecf9-223">Or, you can manually specify a texture (or constant value) per red, green, blue, or alpha channel.</span></span> <span data-ttu-id="aecf9-224">Сочетание текстуры — это ускорение GPU и не требует, чтобы текстура ввода была доступной для ЦП.</span><span class="sxs-lookup"><span data-stu-id="aecf9-224">The texture combination is GPU accelerated and does not require the input texture to be CPU accessible.</span></span>

## <a name="additional-feature-documentation"></a><span data-ttu-id="aecf9-225">Документация по дополнительным функциям</span><span class="sxs-lookup"><span data-stu-id="aecf9-225">Additional feature documentation</span></span>

<span data-ttu-id="aecf9-226">Ниже приведены дополнительные сведения о некоторых функциях, доступных в шейдере МРТК/Standard.</span><span class="sxs-lookup"><span data-stu-id="aecf9-226">Below are extra details on a handful of feature details available with the MRTK/Standard shader.</span></span>

### <a name="primitive-clipping"></a><span data-ttu-id="aecf9-227">Вырезка примитива</span><span class="sxs-lookup"><span data-stu-id="aecf9-227">Primitive clipping</span></span>

![вырезка примитива](../images/mrtk-standard-shader/MRTK_PrimitiveClipping.gif)

* <span data-ttu-id="aecf9-229">См. [отсеченный примитив](clipping-primitive.md)</span><span class="sxs-lookup"><span data-stu-id="aecf9-229">See [Clipping Primitive](clipping-primitive.md)</span></span>

### <a name="mesh-outlines"></a><span data-ttu-id="aecf9-230">Контуры сетки</span><span class="sxs-lookup"><span data-stu-id="aecf9-230">Mesh outlines</span></span>

<span data-ttu-id="aecf9-231">Многие приемы структуры сетки выполняются с помощью метода [завершающей обработки](https://docs.unity3d.com/Manual/PostProcessingOverview.html) .</span><span class="sxs-lookup"><span data-stu-id="aecf9-231">Many mesh outline techniques are done using a [post processing](https://docs.unity3d.com/Manual/PostProcessingOverview.html) technique.</span></span> <span data-ttu-id="aecf9-232">После обработки обеспечивается качественная обработка, но она может быть чрезмерно дорогостоящей на многих устройствах смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="aecf9-232">Post processing provides great quality outlines, but can be prohibitively expensive on many Mixed Reality devices.</span></span> <span data-ttu-id="aecf9-233">Вы можете найти сцену, которая демонстрирует использование контуров сетки в сцене  **аутлиниксамплес** в разделе `MRTK/Examples/Demos/StandardShader/Scenes/` .</span><span class="sxs-lookup"><span data-stu-id="aecf9-233">You can find a scene that demonstrates usage of mesh outlines in the  **OutlineExamples** scene under `MRTK/Examples/Demos/StandardShader/Scenes/`.</span></span>

<img src="../images/mrtk-standard-shader/MRTK_MeshOutline.jpg" width="900" alt="Mesh Outline">

<span data-ttu-id="aecf9-234">[`MeshOutline.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshOutline) и [`MeshOutlineHierarchy.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshOutlineHierarchy) могут использоваться для отрисовки контура вокруг модуля подготовки сетки.</span><span class="sxs-lookup"><span data-stu-id="aecf9-234">[`MeshOutline.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshOutline) and [`MeshOutlineHierarchy.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshOutlineHierarchy) can be used to render an outline around a mesh renderer.</span></span> <span data-ttu-id="aecf9-235">При включении этого компонента вводится дополнительный проход визуализации объекта, который выводится на экран, но он предназначен для запуска перформантли на устройствах с мобильными устройствами смешанной реальности и не использует процессы POST.</span><span class="sxs-lookup"><span data-stu-id="aecf9-235">Enabling this component introduces an additional render pass of the object being outlined, but is designed to run performantly on mobile Mixed Reality devices and does not utilize any post processes.</span></span> <span data-ttu-id="aecf9-236">Ограничения этого воздействия: он не работает с объектами, которые не ватертигхт (или должны быть на двух сторонах), и проблемы с глубиной сортировки могут возникать в перекрывающихся объектах.</span><span class="sxs-lookup"><span data-stu-id="aecf9-236">Limitations of this effect include it not working well on objects which are not watertight (or required to be two sided) and depth sorting issues can occur on overlapping objects.</span></span>

<span data-ttu-id="aecf9-237">Поведение структуры предназначено для использования в сочетании с шейдером МРТК/Standard.</span><span class="sxs-lookup"><span data-stu-id="aecf9-237">The outline behaviors are designed to be used in conjunction with the MRTK/Standard shader.</span></span> <span data-ttu-id="aecf9-238">Структурные материалы обычно являются сплошным унлит цветом, но могут быть настроены для достижения широкого спектра эффектов.</span><span class="sxs-lookup"><span data-stu-id="aecf9-238">Outline materials are usually a solid unlit color, but can be configured to achieve a wide array of effects.</span></span> <span data-ttu-id="aecf9-239">Настройка по умолчанию для материала в виде структуры выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="aecf9-239">The default configuration of a outline material is as follows:</span></span>

<img src="../images/mrtk-standard-shader/MRTK_OutlineMaterial.jpg" width="450" alt="Mesh Outline Material">

1. <span data-ttu-id="aecf9-240">Запись глубины — необходимо отключить для структурных материалов, чтобы убедиться, что структура не мешает отрисовке других объектов.</span><span class="sxs-lookup"><span data-stu-id="aecf9-240">Depth Write - should be disabled for outline materials to make sure the outline does not prevent other objects from rendering.</span></span>
2. <span data-ttu-id="aecf9-241">Для отрисовки структуры необходимо включить на уровне вершин.</span><span class="sxs-lookup"><span data-stu-id="aecf9-241">Vertex Extrusion - needs to be enabled to render the outline.</span></span>
3. <span data-ttu-id="aecf9-242">Используйте плавные нормали. Этот параметр является необязательным для некоторых сеток.</span><span class="sxs-lookup"><span data-stu-id="aecf9-242">Use Smooth Normals - this setting is optional for some meshes.</span></span> <span data-ttu-id="aecf9-243">Объемы изменяются путем перемещения вершины в нормальном расположении, в некоторых сетках, выходящих по умолчанию, будут вычислены ненепрерывности в структуре.</span><span class="sxs-lookup"><span data-stu-id="aecf9-243">Extrusion occurs by moving a vertex along a vertex normal, on some meshes extruding along the default normals will cause discontinuities in the outline.</span></span> <span data-ttu-id="aecf9-244">Чтобы устранить эти неудобства, можно установить этот флажок, чтобы использовать другой набор сглаженных нормалей, созданных [`MeshSmoother.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshSmoother)</span><span class="sxs-lookup"><span data-stu-id="aecf9-244">To fix these discontinuities, you can check this box to use another set of smoothed normals which get generated by [`MeshSmoother.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshSmoother)</span></span>

<span data-ttu-id="aecf9-245">[`MeshSmoother.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshSmoother) — это компонент, который можно использовать для автоматического создания гладких нормалей в сети.</span><span class="sxs-lookup"><span data-stu-id="aecf9-245">[`MeshSmoother.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshSmoother) is a component which can be used to automatically generate smoothed normals on a mesh.</span></span> <span data-ttu-id="aecf9-246">Этот метод группирует вершины в сетке, которая совместно используют одно и то же расположение в пространстве, а затем усредняет нормали этих вершин.</span><span class="sxs-lookup"><span data-stu-id="aecf9-246">This method groups vertices in a mesh that share the same location in space then averages the normals of those vertices.</span></span> <span data-ttu-id="aecf9-247">Этот процесс создает копию базовой сетки и должен использоваться только при необходимости.</span><span class="sxs-lookup"><span data-stu-id="aecf9-247">This process creates a copy of the underlying mesh and should be used only when required.</span></span>

<img src="../images/mrtk-standard-shader/MRTK_SmoothNormals.jpg" width="450" alt="Smooth Normals Outline">

1. <span data-ttu-id="aecf9-248">Плавные нормали, созданные с помощью [`MeshSmoother.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshSmoother) .</span><span class="sxs-lookup"><span data-stu-id="aecf9-248">Smooth normals generated via [`MeshSmoother.cs`](xref:Microsoft.MixedReality.Toolkit.Utilities.MeshSmoother).</span></span>
2. <span data-ttu-id="aecf9-249">Используются нормали по умолчанию, обратите внимание на артефакты вокруг углов Куба.</span><span class="sxs-lookup"><span data-stu-id="aecf9-249">Default normals used, notice the artifacts around the cube corners.</span></span>

### <a name="stencil-testing"></a><span data-ttu-id="aecf9-250">Тестирование набора элементов</span><span class="sxs-lookup"><span data-stu-id="aecf9-250">Stencil testing</span></span>

<span data-ttu-id="aecf9-251">Встроенная поддержка тестирования трафаретов для достижения широкого спектра эффектов.</span><span class="sxs-lookup"><span data-stu-id="aecf9-251">Built in configurable stencil test support to achieve a wide array of effects.</span></span> <span data-ttu-id="aecf9-252">Например порталы:</span><span class="sxs-lookup"><span data-stu-id="aecf9-252">Such as portals:</span></span>

![тест набора элементов](../images/mrtk-standard-shader/MRTK_StencilTest.gif)

### <a name="instanced-color-support"></a><span data-ttu-id="aecf9-254">Поддержка экземплярного цвета</span><span class="sxs-lookup"><span data-stu-id="aecf9-254">Instanced color support</span></span>

<span data-ttu-id="aecf9-255">Поддержка экземпляров с экземплярами, позволяющая тысячам экземпляров GPU заменять уникальные свойства материала:</span><span class="sxs-lookup"><span data-stu-id="aecf9-255">Instanced color support to give thousands of GPU instanced meshes unique material properties:</span></span>

![свойства экземпляра](../images/mrtk-standard-shader/MRTK_InstancedProperties.gif)

### <a name="triplanar-mapping"></a><span data-ttu-id="aecf9-257">Сопоставление трипланар</span><span class="sxs-lookup"><span data-stu-id="aecf9-257">Triplanar mapping</span></span>

<span data-ttu-id="aecf9-258">Сопоставление трипланар — это методика программной текстуры для сетки.</span><span class="sxs-lookup"><span data-stu-id="aecf9-258">Triplanar mapping is a technique to programmatically texture a mesh.</span></span> <span data-ttu-id="aecf9-259">Часто используется в ландшафта, в сетках без UVs или сложностях распаковки фигур.</span><span class="sxs-lookup"><span data-stu-id="aecf9-259">Often used in terrain, meshes without UVs, or difficult to unwrap shapes.</span></span> <span data-ttu-id="aecf9-260">Эта реализация поддерживает проекцию в мировом или локальном пространстве, спецификацию сглаживания смешения и стандартную поддержку карт.</span><span class="sxs-lookup"><span data-stu-id="aecf9-260">This implementation supports world or local space projection, the specification of blending smoothness, and normal map support.</span></span> <span data-ttu-id="aecf9-261">Обратите внимание, что каждая используемая текстура требует 3 образца текстуры, поэтому следует использовать их в критически важных для производительности ситуациях.</span><span class="sxs-lookup"><span data-stu-id="aecf9-261">Note, each texture used requires 3 texture samples, so use sparingly in performance critical situations.</span></span>

![трипланар](../images/mrtk-standard-shader/MRTK_TriplanarMapping.gif)

### <a name="vertex-extrusion"></a><span data-ttu-id="aecf9-263">Объемная вершина</span><span class="sxs-lookup"><span data-stu-id="aecf9-263">Vertex extrusion</span></span>

<span data-ttu-id="aecf9-264">Объемная вершина в мировом пространстве.</span><span class="sxs-lookup"><span data-stu-id="aecf9-264">Vertex extrusion in world space.</span></span> <span data-ttu-id="aecf9-265">Используется для визуализации вытянутых ограничивающих томов или переходов между и выходными сетками.</span><span class="sxs-lookup"><span data-stu-id="aecf9-265">Useful for visualizing extruded bounding volumes or transitions in/out meshes.</span></span>

![Обычная шкала карт 1](../images/mrtk-standard-shader/MRTK_VertexExtrusion.gif)

### <a name="miscellaneous"></a><span data-ttu-id="aecf9-267">Разное</span><span class="sxs-lookup"><span data-stu-id="aecf9-267">Miscellaneous</span></span>

<span data-ttu-id="aecf9-268">Флажок для управления оптимизациями албедо.</span><span class="sxs-lookup"><span data-stu-id="aecf9-268">A checkbox to control albedo optimizations.</span></span> <span data-ttu-id="aecf9-269">Албедо операции оптимизации отключены, если текстура албедо не указана.</span><span class="sxs-lookup"><span data-stu-id="aecf9-269">As an optimization albedo operations are disabled when no albedo texture is specified.</span></span> <span data-ttu-id="aecf9-270">Это полезно для управления [загрузкой удаленной текстуры](http://dotnetbyexample.blogspot.com/2018/10/workaround-remote-texture-loading-does.html).</span><span class="sxs-lookup"><span data-stu-id="aecf9-270">This is useful for controlling [remote texture loading](http://dotnetbyexample.blogspot.com/2018/10/workaround-remote-texture-loading-does.html).</span></span>

<span data-ttu-id="aecf9-271">Просто установите этот флажок:</span><span class="sxs-lookup"><span data-stu-id="aecf9-271">Simply check this box:</span></span>

![Назначение албедо](../images/mrtk-standard-shader/MRTK_AlbedoAssignment.jpg)

<span data-ttu-id="aecf9-273">Для каждого пиксела вырезки текстуры, сглаживание на основе местного периметра и нормальное масштабирование карт поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="aecf9-273">Per pixel clipping textures, local edge based anti aliasing, and normal map scaling are supported.</span></span>

![нормальное масштабирование карт 2](../images/mrtk-standard-shader/MRTK_NormalMapScale.gif)

## <a name="see-also"></a><span data-ttu-id="aecf9-275">См. также</span><span class="sxs-lookup"><span data-stu-id="aecf9-275">See also</span></span>

* [<span data-ttu-id="aecf9-276">Интерактивный объект</span><span class="sxs-lookup"><span data-stu-id="aecf9-276">Interactable</span></span>](../ux-building-blocks/interactable.md)
* [<span data-ttu-id="aecf9-277">HoverLight</span><span class="sxs-lookup"><span data-stu-id="aecf9-277">Hover Light</span></span>](hover-light.md)
* [<span data-ttu-id="aecf9-278">ProximityLight</span><span class="sxs-lookup"><span data-stu-id="aecf9-278">Proximity Light</span></span>](proximity-light.md)
* [<span data-ttu-id="aecf9-279">ClippingPrimitive</span><span class="sxs-lookup"><span data-stu-id="aecf9-279">Clipping Primitive</span></span>](clipping-primitive.md)
