---
title: Окно оптимизации
description: Окно оптимизации документации в МРТК
author: keveleigh
ms.author: kurtie
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, смешанная реальность, разработка, MRTK
ms.openlocfilehash: f9f8ad638b8f7cb1007c923f6b568dffc4340360
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2021
ms.locfileid: "113177561"
---
# <a name="optimize-window"></a><span data-ttu-id="36921-104">Окно оптимизации</span><span class="sxs-lookup"><span data-stu-id="36921-104">Optimize window</span></span>

<span data-ttu-id="36921-105">Окно Оптимизация МРТК — это служебная программа, которая помогает автоматизировать и информировать процесс настройки проекта смешанной реальности для лучшей [производительности](../../performance/perf-getting-started.md) в Unity.</span><span class="sxs-lookup"><span data-stu-id="36921-105">The MRTK Optimize Window is a utility to help automate and inform in the process of configuring a mixed reality project for best [performance](../../performance/perf-getting-started.md) in Unity.</span></span> <span data-ttu-id="36921-106">Обычно это средство нацелено на конфигурации подготовки к просмотру, которые при задании правильной предустановки могут сэкономить миллисекунды обработки.</span><span class="sxs-lookup"><span data-stu-id="36921-106">This tool generally focuses on rendering configurations that when set to the correct preset can save milliseconds of processing.</span></span>

<span data-ttu-id="36921-107">*Активный целевой объект сборки* — это [платформа сборки, которая в настоящее время является целевой](https://docs.unity3d.com/Manual/BuildSettings.html) для проекта для компиляции.</span><span class="sxs-lookup"><span data-stu-id="36921-107">The *Active Build Target* is the [build platform currently targeted](https://docs.unity3d.com/Manual/BuildSettings.html) by the project for compiling.</span></span>

<span data-ttu-id="36921-108">*Цель производительности* указывает средству оптимизации, какой тип конечных точек устройства следует назначить.</span><span class="sxs-lookup"><span data-stu-id="36921-108">The *Performance Target* instructs the optimize tool on what kind of device endpoints to target.</span></span>

- <span data-ttu-id="36921-109">*Головные гарнитуры AR* — это мобильные устройства класса, например HoloLens</span><span class="sxs-lookup"><span data-stu-id="36921-109">*AR Headsets* are mobile-class devices, such as HoloLens</span></span>
- <span data-ttu-id="36921-110">*Автономная версия VR* — это мобильные устройства класса, например Окулус Go или Quest.</span><span class="sxs-lookup"><span data-stu-id="36921-110">*VR Standalone* are mobile-class devices, such as the Oculus Go or Quest</span></span>
- <span data-ttu-id="36921-111">*Модемы VR* являются устройствами на базе ПК, например Samsung Одиссэй, Окулус Рифт или HTC naopak и т. д.</span><span class="sxs-lookup"><span data-stu-id="36921-111">*VR Tethered* are PC-powered devices, such as the Samsung Odyssey, Oculus Rift or HTC Vive etc.</span></span>

![Целевое значение производительности окна оптимизации МРТК](../images/performance/OptimizeWindowPerformanceTarget.jpg)

## <a name="setting-optimizations"></a><span data-ttu-id="36921-113">Настройка оптимизации</span><span class="sxs-lookup"><span data-stu-id="36921-113">Setting optimizations</span></span>

<span data-ttu-id="36921-114">Вкладка оптимизация параметров охватывает некоторые важные конфигурации подготовки к просмотру для проекта Unity.</span><span class="sxs-lookup"><span data-stu-id="36921-114">The settings optimization tab covers some of the important rendering configurations for a Unity project.</span></span> <span data-ttu-id="36921-115">Этот раздел поможет автоматизировать и сообщить, какие параметры следует изменить для получения наилучших результатов.</span><span class="sxs-lookup"><span data-stu-id="36921-115">This section can help automate and inform you of which settings should be changed for the best performing results.</span></span>

<span data-ttu-id="36921-116">Зеленый значок галочки означает, что оптимальное значение было настроено в проекте или сцене для этого конкретного параметра.</span><span class="sxs-lookup"><span data-stu-id="36921-116">A green check icon means that an optimal value has been configured in the project/scene for this particular setting.</span></span> <span data-ttu-id="36921-117">Желтый значок предупреждения указывает, что текущую конфигурацию можно улучшить.</span><span class="sxs-lookup"><span data-stu-id="36921-117">A yellow warning icon indicates the current configuration can be improved.</span></span> <span data-ttu-id="36921-118">Нажатие соответствующей кнопки в заданном разделе приведет к автоматическому заданию значения этого параметра в проекте или сцене Unity.</span><span class="sxs-lookup"><span data-stu-id="36921-118">Clicking the associated button in a given section will auto-configure that setting in the Unity project/scene to a more optimal value.</span></span>

![Параметры оптимизации окна мртк](../images/performance/OptimizeWindow_Settings.png)

### <a name="single-pass-instanced-rendering"></a><span data-ttu-id="36921-120">Обработка экземпляров с одним проходом</span><span class="sxs-lookup"><span data-stu-id="36921-120">Single Pass Instanced rendering</span></span>

<span data-ttu-id="36921-121">[Однопроходная Визуализация с одним экземпляром](https://docs.unity3d.com/Manual/SinglePassInstancing.html) — это наиболее эффективный путь отрисовки для приложений смешанной реальности.</span><span class="sxs-lookup"><span data-stu-id="36921-121">[Single Pass instanced rendering](https://docs.unity3d.com/Manual/SinglePassInstancing.html) is the most efficient rendering path for mixed reality applications.</span></span> <span data-ttu-id="36921-122">Такая конфигурация гарантирует, что конвейер прорисовки будет выполняться только один раз для всех глаз и что вызовы Draw будут экземплярами обоих глаз.</span><span class="sxs-lookup"><span data-stu-id="36921-122">This configuration ensures the render pipeline is executed only once for both eyes and that draw calls are instanced across both eyes.</span></span>

### <a name="depth-buffer-sharing"></a><span data-ttu-id="36921-123">Общий доступ к буферу глубины</span><span class="sxs-lookup"><span data-stu-id="36921-123">Depth buffer sharing</span></span>

<span data-ttu-id="36921-124">Чтобы повысить [голограмму стабилизации](../../performance/hologram-Stabilization.md), разработчики могут совместно использовать буфер глубины приложения, который предоставляет сведения о платформе и о том, какие голограммы следует стабилизировать в визуализированной сцене.</span><span class="sxs-lookup"><span data-stu-id="36921-124">To improve [hologram stabilization](../../performance/hologram-Stabilization.md), developers can share the application's depth buffer which gives the platform information on where and what holograms to stabilize in the rendered scene.</span></span>

### <a name="depth-buffer-format"></a><span data-ttu-id="36921-125">Формат буфера глубины</span><span class="sxs-lookup"><span data-stu-id="36921-125">Depth buffer format</span></span>

<span data-ttu-id="36921-126">Кроме того, для *головных телефонов AR* рекомендуется использовать 16-разрядный формат глубины при включении общего доступа к буферу глубины по сравнению с 24-битным.</span><span class="sxs-lookup"><span data-stu-id="36921-126">Furthermore, for *AR Headsets*, it is recommended to utilize a 16-bit depth format when enabling depth buffer sharing compared to 24-bit.</span></span> <span data-ttu-id="36921-127">Это означает более низкую точность, но экономится на производительности.</span><span class="sxs-lookup"><span data-stu-id="36921-127">This means lower precision but saves on performance.</span></span> <span data-ttu-id="36921-128">Если [z-борьба](https://en.wikipedia.org/wiki/Z-fighting) происходит по причине меньшей точности при вычислении глубины для пикселей, рекомендуется переместить [далеко плоскость](https://docs.unity3d.com/Manual/class-Camera.html) , расположенную ближе к камере (например, 50 млн, а не 1000m).</span><span class="sxs-lookup"><span data-stu-id="36921-128">If [z-fighting](https://en.wikipedia.org/wiki/Z-fighting) occurs because there is less precision in calculating depth for pixels, then it is recommended to move the [far clip plane](https://docs.unity3d.com/Manual/class-Camera.html) closer to the camera (ex: 50m instead of 1000m).</span></span>

> [!NOTE]
> <span data-ttu-id="36921-129">Если используется *16-разрядный формат глубины*, требуемые эффекты для буфера набора элементов не будут работать, так как [Unity не создает буфер шаблона](https://docs.unity3d.com/ScriptReference/RenderTexture-depth.html) в этом параметре.</span><span class="sxs-lookup"><span data-stu-id="36921-129">If using *16-bit depth format*, stencil buffer required effects will not work because [Unity does not create a stencil buffer](https://docs.unity3d.com/ScriptReference/RenderTexture-depth.html) in this setting.</span></span> <span data-ttu-id="36921-130">Если выбрать *24-разрядный формат глубины* , то, как правило, будет создавать [8-разрядный буфер трафаретов](https://docs.unity3d.com/Manual/SL-Stencil.html), если это применимо на графической платформе конечной платформы.</span><span class="sxs-lookup"><span data-stu-id="36921-130">Selecting *24-bit depth format* conversely will generally create an [8-bit stencil buffer](https://docs.unity3d.com/Manual/SL-Stencil.html), if applicable on the endpoint graphics platform.</span></span>
>
> <span data-ttu-id="36921-131">При использовании [компонента маски](https://docs.unity3d.com/Manual/script-Mask.html) , для которого требуется буфер шаблона, рассмотрите возможность использования [RectMask2D](https://docs.unity3d.com/Manual/script-RectMask2D.html) вместо того, что не требует буфера шаблона и, таким же, можно использовать в сочетании с *16-разрядным форматом глубины*.</span><span class="sxs-lookup"><span data-stu-id="36921-131">If using a [Mask component](https://docs.unity3d.com/Manual/script-Mask.html) which requires the stencil buffer, consider using [RectMask2D](https://docs.unity3d.com/Manual/script-RectMask2D.html) instead, which does not require the stencil buffer and thus can be used in conjunction with a *16-bit depth format*.</span></span>

### <a name="real-time-global-illumination"></a><span data-ttu-id="36921-132">Глобальная освещения в режиме реального времени</span><span class="sxs-lookup"><span data-stu-id="36921-132">Real-time Global Illumination</span></span>

<span data-ttu-id="36921-133">[Глобальные освещения в режиме реального времени](https://docs.unity3d.com/Manual/GIIntro.html) в Unity могут предоставить более высокие результаты Aesthetic, но с большой ценой.</span><span class="sxs-lookup"><span data-stu-id="36921-133">[Real-time Global illumination](https://docs.unity3d.com/Manual/GIIntro.html) in Unity can provide fantastic aesthetic results but at a very high cost.</span></span> <span data-ttu-id="36921-134">Глобальное освещения освещение очень дорого в смешанной реальности, поэтому рекомендуется отключить эту функцию в разработке.</span><span class="sxs-lookup"><span data-stu-id="36921-134">Global illumination lighting is very expensive in mixed reality and thus it is recommended to disable this feature in development.</span></span>

> [!NOTE]
> <span data-ttu-id="36921-135">Глобальные параметры освещения в Unity задаются на сцене, а не один раз во всем проекте.</span><span class="sxs-lookup"><span data-stu-id="36921-135">Global illumination settings in Unity are set per-scene and not once across the entire project.</span></span>

## <a name="scene-analysis"></a><span data-ttu-id="36921-136">Анализ сцены</span><span class="sxs-lookup"><span data-stu-id="36921-136">Scene analysis</span></span>

<span data-ttu-id="36921-137">Вкладка « *анализ сцены* » предназначена для информирования разработчиков о том, какие элементы в данный момент в сцене, скорее всего, будут повлиять на производительность.</span><span class="sxs-lookup"><span data-stu-id="36921-137">The *Scene Analysis* tab is designed to inform developers on which elements currently in the scene will likely have the most impact on performance.</span></span>

![анализ мртк Параметры окна оптимизации сцены](../images/performance/OptimizeWindow_SceneAnalysis.png)

### <a name="lighting-analysis"></a><span data-ttu-id="36921-139">Анализ освещения</span><span class="sxs-lookup"><span data-stu-id="36921-139">Lighting analysis</span></span>

<span data-ttu-id="36921-140">В этом разделе будет рассмотрено количество источников света, находящихся в сцене, а также все индикаторы, которые должны отключить тени.</span><span class="sxs-lookup"><span data-stu-id="36921-140">This section will examine the number of lights currently in the scene, as well as any lights that should disable shadows.</span></span> <span data-ttu-id="36921-141">Приведение тени — очень ресурсоемкая операция.</span><span class="sxs-lookup"><span data-stu-id="36921-141">Shadow casting is a very expensive operation.</span></span>

### <a name="polygon-count-analysis"></a><span data-ttu-id="36921-142">Анализ числа многоугольников</span><span class="sxs-lookup"><span data-stu-id="36921-142">Polygon count analysis</span></span>

<span data-ttu-id="36921-143">Средство также предоставляет статистику количества многоугольников.</span><span class="sxs-lookup"><span data-stu-id="36921-143">The tool also provides polygon count statistics.</span></span> <span data-ttu-id="36921-144">Это может быть очень полезно для быстрого определения того, какие объекты gameobject имеют наивысшую сложность многоугольника в заданной сцене для оптимизации.</span><span class="sxs-lookup"><span data-stu-id="36921-144">It can be very helpful to quickly identify which GameObjects have the highest polygon complexity in a given scene to target for optimizations.</span></span>

### <a name="unity-ui-raycast-analysis"></a><span data-ttu-id="36921-145">Анализ райкаст пользовательского интерфейса Unity</span><span class="sxs-lookup"><span data-stu-id="36921-145">Unity UI raycast analysis</span></span>

<span data-ttu-id="36921-146">Графические райкаст операции выполняются для каждого указателя в МРТК, чтобы определить, находятся ли в фокусе какие бы то ни было элементы пользовательского интерфейса Unity.</span><span class="sxs-lookup"><span data-stu-id="36921-146">Graphics raycast operations are performed per pointer in MRTK to determine if any Unity UI elements are in focus.</span></span> <span data-ttu-id="36921-147">Эти райкастс могут быть достаточно ресурсоемкими и помочь повысить производительность, элементы пользовательского интерфейса, которые не должны возвращаться в результатах, должны быть отключены в качестве целевых объектов райкаст.</span><span class="sxs-lookup"><span data-stu-id="36921-147">These raycasts can be quite expensive and to help improve performance, UI elements that do not need to be returned in the results should be disabled as raycast targets.</span></span> <span data-ttu-id="36921-148">Каждый [графический](https://docs.unity3d.com/2018.4/Documentation/ScriptReference/UI.Graphic.html) элемент имеет [`Graphic.raycastTarget`](https://docs.unity3d.com/2018.4/Documentation/ScriptReference/UI.Graphic-raycastTarget.html) свойство.</span><span class="sxs-lookup"><span data-stu-id="36921-148">Every [Graphic](https://docs.unity3d.com/2018.4/Documentation/ScriptReference/UI.Graphic.html) element has a [`Graphic.raycastTarget`](https://docs.unity3d.com/2018.4/Documentation/ScriptReference/UI.Graphic-raycastTarget.html) property.</span></span> <span data-ttu-id="36921-149">Это средство будет искать текстовые элементы пользовательского интерфейса, для которых включено это свойство, и, скорее всего, потенциальные кандидаты будут отключены.</span><span class="sxs-lookup"><span data-stu-id="36921-149">This tool will search for text UI elements that have this property enabled and thus are likely candidates to be disabled.</span></span>

## <a name="shader-analysis"></a><span data-ttu-id="36921-150">Анализ шейдера</span><span class="sxs-lookup"><span data-stu-id="36921-150">Shader analysis</span></span>

<span data-ttu-id="36921-151">[Стандартный шейдер Unity](https://docs.unity3d.com/Manual/shader-StandardShader.html) может создавать высококачественные визуальные результаты для игр, но обычно не лучше всего подходит для повышения производительности приложений смешанной реальности, особенно так как такие приложения обычно ограничены GPU.</span><span class="sxs-lookup"><span data-stu-id="36921-151">The [Unity Standard shader](https://docs.unity3d.com/Manual/shader-StandardShader.html) can produce very high quality visual results for games but is not generally best suited for the performance needs of mixed reality applications, especially since such applications are generally GPU bounded.</span></span> <span data-ttu-id="36921-152">Поэтому рекомендуется, чтобы разработчики использовали [стандартный шейдер мртк](../rendering/mrtk-standard-shader.md) для балансировки эстетичность & графических функций с производительностью.</span><span class="sxs-lookup"><span data-stu-id="36921-152">Thus, it is recommended to developers to utilize the [MRTK Standard shader](../rendering/mrtk-standard-shader.md) to balance aesthetics & graphical features with performance.</span></span>

<span data-ttu-id="36921-153">вкладка « *анализ шейдера* » сканирует папку ресурсов текущего проекта на предмет наличия материалов, использующих стандартный шейдер Unity, или при необходимости все материалы, не использующие смешанную реальность, набор средств предоставленные шейдеры.</span><span class="sxs-lookup"><span data-stu-id="36921-153">The *Shader Analysis* tab scans the current project's Asset folder for materials using the Unity Standard shader or if desired, all materials not using Mixed Reality Toolkit provided shaders.</span></span> <span data-ttu-id="36921-154">После обнаружения разработчики могут преобразовать все материалы или преобразовать их по отдельности с помощью соответствующих кнопок.</span><span class="sxs-lookup"><span data-stu-id="36921-154">Once discovered, developers can convert all materials or convert individually using the appropriate buttons.</span></span>

![анализ шейдера мртк окна оптимизатора Параметры](../images/performance/OptimizeWindow_ShaderAnalysis.png)

## <a name="see-also"></a><span data-ttu-id="36921-156">См. также статью</span><span class="sxs-lookup"><span data-stu-id="36921-156">See also</span></span>

- [<span data-ttu-id="36921-157">Производительность</span><span class="sxs-lookup"><span data-stu-id="36921-157">Performance</span></span>](../../performance/perf-getting-started.md)
- [<span data-ttu-id="36921-158">Стабилизация голограмм</span><span class="sxs-lookup"><span data-stu-id="36921-158">Hologram Stabilization</span></span>](../../performance/hologram-stabilization.md)
