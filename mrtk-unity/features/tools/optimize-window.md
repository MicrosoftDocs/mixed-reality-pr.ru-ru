---
title: Окно оптимизации
description: Окно оптимизации документации в МРТК
author: keveleigh
ms.author: kurtie
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, смешанная реальность, разработка, MRTK
ms.openlocfilehash: 8b8928e9c723ffa9fd08d22866b8ee5748e38ace
ms.sourcegitcommit: 78746bef0e1ffe1480e89fed8cd30f6f8b389e8d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2021
ms.locfileid: "114713574"
---
# <a name="optimize-window"></a>Окно оптимизации

Окно Оптимизация МРТК — это служебная программа, которая помогает автоматизировать и информировать процесс настройки проекта смешанной реальности для лучшей [производительности](../../performance/perf-getting-started.md) в Unity. Обычно это средство нацелено на конфигурации подготовки к просмотру, которые при задании правильной предустановки могут сэкономить миллисекунды обработки.

> [!NOTE]
> **Окно оптимизировать** можно открыть, перейдя в окно Оптимизация служебных программ **смешанной реальности**  >    >   из меню верхнего уровня в редакторе Unity.

*Активный целевой объект сборки* — это [платформа сборки, которая в настоящее время является целевой](https://docs.unity3d.com/Manual/BuildSettings.html) для проекта для компиляции.

*Цель производительности* указывает средству оптимизации, какой тип конечных точек устройства следует назначить.

- *Головные гарнитуры AR* — это мобильные устройства класса, например HoloLens
- *Автономная версия VR* — это мобильные устройства класса, например Окулус Go или Quest.
- *Модемы VR* являются устройствами на базе ПК, например Samsung Одиссэй, Окулус Рифт или HTC naopak и т. д.

![Целевое значение производительности окна оптимизации МРТК](../images/performance/OptimizeWindowPerformanceTarget.jpg)

## <a name="setting-optimizations"></a>Настройка оптимизации

Вкладка оптимизация параметров охватывает некоторые важные конфигурации подготовки к просмотру для проекта Unity. Этот раздел поможет автоматизировать и сообщить, какие параметры следует изменить для получения наилучших результатов.

Зеленый значок галочки означает, что оптимальное значение было настроено в проекте или сцене для этого конкретного параметра. Желтый значок предупреждения указывает, что текущую конфигурацию можно улучшить. Нажатие соответствующей кнопки в заданном разделе приведет к автоматическому заданию значения этого параметра в проекте или сцене Unity.

![Параметры оптимизации окна мртк](../images/performance/OptimizeWindow_Settings.png)

### <a name="single-pass-instanced-rendering"></a>Обработка экземпляров с одним проходом

[Однопроходная Визуализация с одним экземпляром](https://docs.unity3d.com/Manual/SinglePassInstancing.html) — это наиболее эффективный путь отрисовки для приложений смешанной реальности. Такая конфигурация гарантирует, что конвейер прорисовки будет выполняться только один раз для всех глаз и что вызовы Draw будут экземплярами обоих глаз.

### <a name="depth-buffer-sharing"></a>Общий доступ к буферу глубины

Чтобы повысить [голограмму стабилизации](../../performance/hologram-Stabilization.md), разработчики могут совместно использовать буфер глубины приложения, который предоставляет сведения о платформе и о том, какие голограммы следует стабилизировать в визуализированной сцене.

### <a name="depth-buffer-format"></a>Формат буфера глубины

Кроме того, для *головных телефонов AR* рекомендуется использовать 16-разрядный формат глубины при включении общего доступа к буферу глубины по сравнению с 24-битным. Это означает более низкую точность, но экономится на производительности. Если [z-борьба](https://en.wikipedia.org/wiki/Z-fighting) происходит по причине меньшей точности при вычислении глубины для пикселей, рекомендуется переместить [далеко плоскость](https://docs.unity3d.com/Manual/class-Camera.html) , расположенную ближе к камере (например, 50 млн, а не 1000m).

> [!NOTE]
> Если используется *16-разрядный формат глубины*, требуемые эффекты для буфера набора элементов не будут работать, так как [Unity не создает буфер шаблона](https://docs.unity3d.com/ScriptReference/RenderTexture-depth.html) в этом параметре. Если выбрать *24-разрядный формат глубины* , то, как правило, будет создавать [8-разрядный буфер трафаретов](https://docs.unity3d.com/Manual/SL-Stencil.html), если это применимо на графической платформе конечной платформы.
>
> При использовании [компонента маски](https://docs.unity3d.com/Manual/script-Mask.html) , для которого требуется буфер шаблона, рассмотрите возможность использования [RectMask2D](https://docs.unity3d.com/Manual/script-RectMask2D.html) вместо того, что не требует буфера шаблона и, таким же, можно использовать в сочетании с *16-разрядным форматом глубины*.

### <a name="real-time-global-illumination"></a>Глобальная освещения в режиме реального времени

[Глобальные освещения в режиме реального времени](https://docs.unity3d.com/Manual/GIIntro.html) в Unity могут предоставить более высокие результаты Aesthetic, но с большой ценой. Глобальное освещения освещение очень дорого в смешанной реальности, поэтому рекомендуется отключить эту функцию в разработке.

> [!NOTE]
> Глобальные параметры освещения в Unity задаются на сцене, а не один раз во всем проекте.

## <a name="scene-analysis"></a>Анализ сцены

Вкладка « *анализ сцены* » предназначена для информирования разработчиков о том, какие элементы в данный момент в сцене, скорее всего, будут повлиять на производительность.

![анализ мртк Параметры окна оптимизации сцены](../images/performance/OptimizeWindow_SceneAnalysis.png)

### <a name="lighting-analysis"></a>Анализ освещения

В этом разделе будет рассмотрено количество источников света, находящихся в сцене, а также все индикаторы, которые должны отключить тени. Приведение тени — очень ресурсоемкая операция.

### <a name="polygon-count-analysis"></a>Анализ числа многоугольников

Средство также предоставляет статистику количества многоугольников. Это может быть очень полезно для быстрого определения того, какие объекты gameobject имеют наивысшую сложность многоугольника в заданной сцене для оптимизации.

### <a name="unity-ui-raycast-analysis"></a>Анализ райкаст пользовательского интерфейса Unity

Графические райкаст операции выполняются для каждого указателя в МРТК, чтобы определить, находятся ли в фокусе какие бы то ни было элементы пользовательского интерфейса Unity. Эти райкастс могут быть достаточно ресурсоемкими и помочь повысить производительность, элементы пользовательского интерфейса, которые не должны возвращаться в результатах, должны быть отключены в качестве целевых объектов райкаст. Каждый [графический](https://docs.unity3d.com/2018.4/Documentation/ScriptReference/UI.Graphic.html) элемент имеет [`Graphic.raycastTarget`](https://docs.unity3d.com/2018.4/Documentation/ScriptReference/UI.Graphic-raycastTarget.html) свойство. Это средство будет искать текстовые элементы пользовательского интерфейса, для которых включено это свойство, и, скорее всего, потенциальные кандидаты будут отключены.

## <a name="shader-analysis"></a>Анализ шейдера

[Стандартный шейдер Unity](https://docs.unity3d.com/Manual/shader-StandardShader.html) может создавать высококачественные визуальные результаты для игр, но обычно не лучше всего подходит для повышения производительности приложений смешанной реальности, особенно так как такие приложения обычно ограничены GPU. Поэтому рекомендуется, чтобы разработчики использовали [стандартный шейдер мртк](../rendering/mrtk-standard-shader.md) для балансировки эстетичность & графических функций с производительностью.

вкладка « *анализ шейдера* » сканирует папку ресурсов текущего проекта на предмет наличия материалов, использующих стандартный шейдер Unity, или при необходимости все материалы, не использующие смешанную реальность, набор средств предоставленные шейдеры. После обнаружения разработчики могут преобразовать все материалы или преобразовать их по отдельности с помощью соответствующих кнопок.

![анализ шейдера мртк окна оптимизатора Параметры](../images/performance/OptimizeWindow_ShaderAnalysis.png)

## <a name="see-also"></a>См. также статью

- [Производительность](../../performance/perf-getting-started.md)
- [Голограмма стабилизации](../../performance/hologram-stabilization.md)
