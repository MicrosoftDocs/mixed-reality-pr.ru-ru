---
title: Служба моделирования ввода
description: Документация по службе моделирования ввода в МРТК
author: CDiaz-MS
ms.author: cadia
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, смешанная реальность, разработка, MRTK
ms.openlocfilehash: 66b79c14bbd0ea8c188aba684b9bd1034de31bf9
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2021
ms.locfileid: "113176961"
---
# <a name="input-simulation-service"></a>Служба моделирования ввода

![Имитация ввода МРТК](../images/input-simulation/MRTK_InputSimulation_Hero.jpg)

С помощью имитации ввода МРТК можно тестировать различные типы взаимодействий в редакторе Unity, не создавая и не развертывая их на устройстве. Это позволяет быстро перебирать свои идеи в процессе разработки и разработки. Использование сочетаний клавиш и мыши для управления имитацией входных данных.

Служба моделирования ввода эмулирует поведение устройств и платформ, которые могут быть недоступны в редакторе Unity. Примеры приведены ниже.

* отслеживание головного устройства HoloLens или VR
* жесты HoloLens руки
* отслеживание HoloLens 2 с неуправляемыми манипуляторами
* отслеживание HoloLens 2 глаз
* Контроллеры устройств VR

> [!WARNING]
> Это не работает при использовании одноXRной эмуляции Unity > режим эмуляции = "имитировать в редакторе". Имитация в редакторе Unity будет управляться от имитации ввода МРТК. Чтобы использовать службу имитации ввода МРТК, необходимо установить XR holographic Emulator в режим эмуляции = *"нет"*

## <a name="how-to-use-mrtk-input-simulation"></a>Как использовать моделирование ввода МРТК 

Имитация ввода включена по умолчанию в профилях, поставляемых с МРТК. Можно просто нажать кнопку **воспроизвести** , чтобы запустить сцену с поддержкой имитации ввода.

* Для перемещения камеры нажмите клавиши **W, A, S, D, Q, E** .
* Удерживайте **правую кнопку мыши** и наведите указатель мыши на нужное место.
* Чтобы открыть имитацию руки, нажмите клавишу **пробела (справа)** или **клавишу SHIFT слева (слева)** .
* Чтобы имитировать имитацию действий в представлении, нажмите клавишу **T** или **Y** .
* Чтобы повернуть смоделированные руки, нажмите и удерживайте клавишу **CTRL** и переместите указатель мыши

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RE4OYrm]

## <a name="in-editor-input-simulation-cheat-sheet"></a>Лист Памятка по с имитацией входных данных редактора

Нажмите **левую клавишу CTRL + H** в сцене хандинтерактионексамплес, чтобы открыть лист Памятка по с элементами управления имитацией входных данных.

> ![Лист Памятка по МРТК моделирования входных данных](../images/input-simulation/MRTK_InputSimulation_CheatSheet.png)


## <a name="enabling-the-input-simulation-service"></a>Включение службы моделирования ввода

В конфигурации поставщика входных системных данных для службы моделирования ввода можно настроить следующие параметры.

* **тип** должен быть *Microsoft. микседреалити. набор средств. Входные > Инпутсимулатионсервице*.
* **Поддерживаемые платформы (-ы)** по умолчанию включают все платформы *редактора* , так как служба использует ввод с клавиатуры и с помощью мыши.

> [!NOTE]
> Службу моделирования ввода можно использовать на других конечных точках платформы, например в автономном режиме, изменив свойство **Supported Platform (s)** , включив в него нужные целевые объекты.
> <br/><img src="../images/input-simulation/InputSimulationSupportedPlatforms.gif" alt="Input Simulation Supported Platforms" width="550px">

## <a name="camera-control"></a>Элемент управления камерой

Головное перемещение может эмулироваться службой моделирования ввода.

### <a name="rotating-the-camera"></a>Вращение камеры

1. Наведите указатель мыши на окно редактора окна просмотра.
    *Может потребоваться щелкнуть окно, чтобы задать фокус ввода, если нажатие кнопки не работают.*
1. Нажмите и удерживайте **кнопку мыши** (по умолчанию — правая кнопка мыши).
1. Переместите указатель мыши в окне просмотра, чтобы повернуть камеру.
1. Используйте колесо прокрутки для поворота камеры вокруг направления представления.

Скорость вращения камеры можно настроить, изменив параметр **скорость отображения мыши** в профиле эмуляции ввода.

Кроме того, можно использовать / **вертикальные** горизонтальные оси для поворота камеры (по умолчанию: игровое устройство — аналоговый стик).

### <a name="moving-the-camera"></a>Перемещение камеры

Используйте вертикальные оси перемещение по **горизонтали** /  для перемещения камеры (по умолчанию — трассе Keys или игровой контроллер — левый аналоговый стик).

Расположение и угол поворота камеры можно задать явным образом в окне "средства". Камеру можно сбросить до ее значения по умолчанию с помощью кнопки **Сброс** .

<iframe width="560" height="315" src="https://www.youtube.com/embed/Z7L4I1ET7GU" class="center" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## <a name="controller-simulation"></a>Моделирование контроллера

Имитация ввода поддерживает эмулированные устройства контроллера (т. е. контроллеры движения и руки). Эти виртуальные контроллеры могут взаимодействовать с любым объектом, поддерживающим обычные контроллеры, например кнопками или объектами, которые можно использовать.

### <a name="controller-simulation-mode"></a>Режим моделирования контроллера

В [окне средства моделирования ввода](#input-simulation-tools-window) в **режиме моделирования контроллера по умолчанию** переключается между тремя различными входными моделями. Этот режим по умолчанию также можно задать в профиле имитации ввода.

* *Руки*: имитирует полностью обозначающий устройство с данными о размещении.

   эмулирует модель взаимодействия HoloLens 2.

   В этом режиме можно имитировать взаимодействия, основанные на точном положении руки или использовании касания.

* *Жесты руки*: имитирует упрощенную модель с помощью воздушного касания и основных жестов.

   эмулирует [модель взаимодействия HoloLens](/windows/mixed-reality/gestures).

   Управление фокусом осуществляется с помощью указателя взгляните. Жест *касания* используется для взаимодействия с кнопками.

* *Контроллер движения*. имитирует контроллер движения, используемый с наушниками VR, которые работают аналогично дальнему взаимодействию с четко написанными руки.

   Эмулирует гарнитуру VR с моделью взаимодействия контроллеров.

   Клавиши триггера, захвата и меню моделируются с помощью ввода с клавиатуры и мыши.

### <a name="simulating-controller-movement"></a>Имитация перемещения контроллера

Нажмите и удерживайте клавишу **управления для левого и правого контроллера** (по умолчанию *сдвиг* для левого контроллера и *пространства* для правого контроллера), чтобы получить контроль над любым контроллером. При нажатии клавиши манипуляции контроллер появится в окне просмотра. После освобождения ключа манипуляции контроллеры исчезают после того, как короткий **контроллер не сможет скрыть время ожидания**.

Контроллеры можно переключать и закрепить относительно камеры во [входном окне средства моделирования](#input-simulation-tools-window) или путем нажатия клавиши "переключить **левый/правый контроллер** " (по умолчанию: *T* для Left и *Y* для прав). Снова нажмите клавишу Toggle, чтобы снова скрыть контроллеры. Для управления контроллерами необходимо удерживать **левый или правый ключ манипуляции с контроллером** . Двойное касание **ключа манипуляции с левым или правым контроллером** также может включать и отключать контроллеры.

Перемещение мыши переместит контроллер на плоскости просмотра. Контроллеры можно перемещать на камеру или ближе к камере с помощью **колесика мыши**.

Чтобы поворачивать контроллеры с помощью мыши, удерживайте нажатой **левый/правый ключ манипуляции** (*сдвиг влево* или *пробел*) *и* **кнопку вращения контроллера** (по умолчанию — кнопка с *левой* кнопкой мыши), а затем передвиньте мышь, чтобы повернуть контроллер. Скорость смены контроллера можно настроить, изменив параметр **скорость вращения контроллера мыши** в профиле моделирования ввода.

Кроме того, размещение можно изменить в [окне средства моделирования ввода](#input-simulation-tools-window), включая сброс настроек по умолчанию.

### <a name="additional-profile-settings"></a>Дополнительные параметры профиля

* **Множитель глубины контроллера** управляет чувствительностью перемещения колесика мыши к прокрутке. Чем больше значение, тем ускоряется увеличение масштаба контроллера.
* **Расстояние по контроллеру по умолчанию** — это начальное расстояние контроллеров от камеры. При нажатии кнопки **Сброс** контроллеры также будут размещаться контроллеры на этом расстоянии.
* **Величина колебаний контроллера** добавляет случайное движение к контроллерам. Эта функция может использоваться для имитации неточного отслеживания контроллеров на устройстве и обеспечения удобного взаимодействия с шумами ввода.

<iframe width="560" height="315" src="https://www.youtube.com/embed/uRYfwuqsjBQ" class="center" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

### <a name="hand-gestures"></a>Жесты руками

Также можно имитировать жесты, такие как сжатие, броские, знакомство и т. д.

1. Включение элемента управления "рука" с помощью **ключа манипуляции с левым или правым контроллером** (*сдвиг влево* или *пробел*)

2. При манипуляции нажмите и удерживайте кнопку мыши, чтобы выполнить жест руки.

Каждая кнопка мыши может быть сопоставлена с преобразованием формы руки в другой жест, используя параметры *левого или среднего или правого жеста мыши* . *По умолчанию используется жест* руки, если кнопка не нажата.

> [!NOTE]
> Жест *сжатия* — это единственный жест, выполняющий действие "Select" на этом этапе.

### <a name="one-hand-manipulation"></a>Односторонняя манипуляция

1. Нажмите и удерживайте клавишу **управления "левый/правый" контроллер** (*сдвиг влево* или *пробел*)
2. Точка на объекте
3. Удерживайте кнопку мыши для сжатия
4. Перемещение объекта с помощью мыши
5. Отпустите кнопку мыши, чтобы прекратить взаимодействие

<iframe width="560" height="315" src="https://www.youtube.com/embed/rM0xaHam6wM" class="center" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

### <a name="two-hand-manipulation"></a>Манипуляция с двумя рукой

Для манипулирования объектами с двумя практическими операциями рекомендуется использовать режим постоянной обработки.

1. Переключитесь в обе руки, нажав клавиши переключения (*T/Y*).
1. Управлять одной рукой за раз:
    1. Удержание **пространства** для управления правой рукой
    1. Переместить руку в то место, куда нужно захватить объект
    1. Нажмите **левую кнопку мыши** , чтобы активировать жест *сжатия* .
    1. **Место** выпуска для отмены управления правой стороны. Рука будет зафиксирована и заблокирована для жеста *сжатия* , так как он больше не обрабатывается.
1. Повторите процесс с другой стороны, извлеките один и тот же объект во вторую точку.
1. Теперь, когда обе руки изменяют один и тот же объект, можно переместить любой из них, чтобы выполнить двустороннюю манипуляцию.

<iframe width="560" height="315" src="https://www.youtube.com/embed/Qol5OFNfN14" class="center" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

### <a name="ggv-gaze-gesture-and-voice-interaction"></a>Взаимодействие ГГВ (взгляд, жест и речь)

По умолчанию взаимодействие ГГВ включено в редакторе, в то время как в сцене отсутствуют четко сформулированные руки.

1. Повернуть камеру, чтобы она указывала курсор взгляда на взаимодействующий объект (правая кнопка мыши)
1. Нажмите и удерживайте **левую кнопку мыши** для взаимодействия
1. Снова поверните камеру для работы с объектом

Это можно отключить, включив параметр " *доступно без поддержки ввода* " в профиле эмуляции ввода.

Кроме того, можно использовать смоделированные руки для взаимодействия ГГВ.

1. Включение имитации ГГВ путем переключения **режима моделирования вручную** на *жесты* в [профиле моделирования ввода](#enabling-the-input-simulation-service)
1. Повернуть камеру, чтобы она указывала курсор взгляда на взаимодействующий объект (правая кнопка мыши)
1. Удержание **пространства** для управления правой рукой
1. Нажмите и удерживайте **левую кнопку мыши** для взаимодействия
1. Перемещение объекта с помощью мыши
1. Отпустите кнопку мыши, чтобы прекратить взаимодействие

<iframe width="560" height="315" src="https://www.youtube.com/embed/6841rRMdqWw" class="center" frameborder="0" allow="accelerometer; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

### <a name="raising-teleport-events"></a>Создание событий телепортируйтесь

чтобы вызвать событие телепортируйтесь во время моделирования ввода, настройте жест руки Параметры в профиле имитации ввода, чтобы он выполнял жест **запуска телепортируйтесь** , а другой выполняет жест **конца телепортируйтесь** . Жест **запуска телепортируйтесь** выводит указатель телепортируйтесь, а **Окончание** жесуреа телепортируйтесь завершит действие телепортируйтесь и переместит пользователя.

Y-расположение полученного телепортировать зависит от смещения камеры вдоль оси y. В редакторе по умолчанию это 0, поэтому используйте клавиши **Q** и **E** , чтобы изменить высоту.

![моделирование входных данных телепортируйтесь Параметры](../images/input-simulation/InputSimulationTeleport.gif)

### <a name="motion-controller-interaction"></a>Взаимодействие с контроллером движения

Смоделированные контроллеры движения можно манипулировать так же, как и руки. Модель взаимодействия схожа с назначением руки, когда ключи триггера, сочетания клавиш и меню сопоставлены с *левой кнопкой мыши*, *G* и *M* соответственно.

### <a name="eye-tracking"></a>Отслеживание взгляда

[Моделирование отслеживания глаз](../input/eye-tracking/eye-tracking-basic-setup.md#simulating-eye-tracking-in-the-unity-editor) можно включить, установив флажок **имитировать глаз** в [профиле имитации ввода](#enabling-the-input-simulation-service). Его не следует использовать с ГГВ или взаимодействия с стилем контроллера движения (поэтому убедитесь, что для **режима имитации контроллера по умолчанию** задано значение " *руки*").

## <a name="input-simulation-tools-window"></a>Окно средств моделирования ввода

включите окно средства моделирования входных данных из   >    >  меню "имитация" набор средств **служебных программ** смешанной реальности  >   . Это окно предоставляет доступ к состоянию имитации ввода в режиме воспроизведения.

## <a name="viewport-buttons-optional"></a>Кнопки окна просмотра (необязательно)

Prefab для кнопок в редакторе, позволяющих управлять базовым размещением вручную, можно указать в профиле моделирования ввода в разделе **индикаторы prefab**. Это необязательная служебная программа. к тем же функциям можно обращаться в [окне средства моделирования ввода](#input-simulation-tools-window).

> [!NOTE]
> Индикаторы окна просмотра по умолчанию отключены, так как в настоящее время они могут мешать взаимодействию с ИП Unity. См. раздел Issue [#6106](https://github.com/microsoft/MixedRealityToolkit-Unity/issues/6106). Чтобы включить, добавьте Инпутсимулатиониндикаторс prefab в **индикаторы prefab**.

Значки руки показывают состояние имитации руки:

* ![Значок незаписанного руки](../images/input-simulation/MRTK_InputSimulation_HandIndicator_Untracked.png) Рука не отслеживается. Щелкните, чтобы включить руку.
* ![Значок с изображением руки](../images/input-simulation/MRTK_InputSimulation_HandIndicator_Tracked.png "Значок с изображением руки") Рука передается, но не контролируется пользователем. Щелкните, чтобы скрыть руку.
* ![Управляемый значок руки](../images/input-simulation/MRTK_InputSimulation_HandIndicator_Controlled.png "Управляемый значок руки") Рука и контролируется пользователем. Щелкните, чтобы скрыть руку.
* ![Значок сброса руки](../images/input-simulation/MRTK_InputSimulation_HandIndicator_Reset.png "Значок сброса руки") Щелкните, чтобы сбросить руку на стандартное расположение.


## <a name="see-also"></a>См. также:

* [Входной системный профиль](../input/input-providers.md).
