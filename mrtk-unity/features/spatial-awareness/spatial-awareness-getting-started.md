---
title: Отслеживание пространственного положения
description: сведения о пространственной осведомленности в МРТК
author: davidkline-ms
ms.author: davidkl
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, смешанная реальность, разработка, MRTK
ms.openlocfilehash: 776033dbb4736ccaa44cdb683c4fce284758a51c
ms.sourcegitcommit: c0ba7d7bb57bb5dda65ee9019229b68c2ee7c267
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/19/2021
ms.locfileid: "110144460"
---
# <a name="spatial-awareness"></a>Отслеживание пространственного положения

![Отслеживание пространственного положения](../images/spatial-awareness/MRTK_SpatialAwareness_Main.png)

Система пространственной осведомленности обеспечивает реальную осведомленность окружающей среды в приложениях смешанной реальности. При появилось в Microsoft HoloLens служба пространственной осведомленности предоставил коллекцию сеток, представляющую геометрию среды, которая допускает привлекательное взаимодействие между голограммами и реальными.

> [!NOTE]
> В настоящее время набор средств Mixed Reality не поставляется с пространственными знаниями о алгоритмах, изначально упакованных в Холотулкит. Пространственное понимание обычно включает преобразование данных пространственной сетки для создания упрощенных и/или сгруппированных данных сетки, таких как плоскости, стены, пол, цеилингс и т. д.

## <a name="getting-started"></a>Начало работы

Для добавления поддержки пространственной осведомленности требуется два ключевых компонента набора средств Mixed Reality: система пространственной осведомленности и поддерживаемый поставщик платформы.

1. [Включение](#enable-the-spatial-awareness-system) системы распознавания пространственных
2. [Регистрация](#register-observers) и [Настройка](configuring-spatial-awareness-mesh-observer.md) одного или нескольких пространственных наблюдателей для предоставления данных сетки
3. [Сборка и развертывание](#build-and-deploy) на платформе, поддерживающей пространственное распознавание

### <a name="enable-the-spatial-awareness-system"></a>Включение системы распознавания пространственных

Система пространственной осведомленности управляется объектом Микседреалититулкит (или другим компонентом [регистратора служб](xref:Microsoft.MixedReality.Toolkit.IMixedRealityServiceRegistrar) ). Выполните следующие действия, чтобы включить или отключить *систему пространственного отслеживания* в профиле *микседреалититулкит* .

Набор средств Mixed Reality поставляется с несколькими предварительно настроенными профилями по умолчанию. В некоторых из них по умолчанию включена или отключена система пространственной осведомленности. Цель этой предварительной настройки, особенно для отключенной, заключается в предотвращении визуальных издержек при вычислении и визуализации сеток.

| Профиль | Система включена по умолчанию |
| --- | --- |
| `DefaultHoloLens1ConfigurationProfile` (Assets/МРТК/SDK/Profiles/HoloLens1) | False |
| `DefaultHoloLens2ConfigurationProfile` (Assets/МРТК/SDK/Profiles/HoloLens2) | False |
| `DefaultMixedRealityToolkitConfigurationProfile` (Assets/МРТК/SDK/Profiles) | True |

1. Выберите объект Микседреалититулкит в иерархии сцены, чтобы открыть его на панели инспектора.

    ![МРТК настроенная иерархия сцены](../images/MRTK_ConfiguredHierarchy.png)

1. Перейдите к разделу " *система пространственных* сведений" и установите флажок " *включить систему пространственного отслеживания* ".

    ![Включить поддержку пространственного расположения](../images/spatial-awareness/MRTKConfig_SpatialAwareness.png)

1. Выберите нужный тип реализации системы пространственного отслеживания. По [`MixedRealitySpatialAwarenessSystem`](xref:Microsoft.MixedReality.Toolkit.SpatialAwareness.MixedRealitySpatialAwarenessSystem) умолчанию задано значение.

    ![Выберите реализацию системы пространственного отслеживания](../images/spatial-awareness/SpatialAwarenessSelectSystemType.png)

### <a name="register-observers"></a>Регистрация наблюдателей

Службы в наборе Mixed Reality могут иметь [службы поставщика данных](../../architecture/systems-extensions-providers.md) , которые дополняют основную службу данными и элементами управления реализацией, связанными с платформой. Примером этого является система ввода смешанной реальности, которая имеет [несколько поставщиков данных](../input/input-providers.md) для получения контроллера и других связанных входных данных из различных интерфейсных API для конкретной платформы.

Система пространственной информации похожа на то, что поставщики данных предоставляют систему с данными сетки о реальном мире. В профиле поддержки пространственных должно быть зарегистрировано по крайней мере один пространственный наблюдатель. Пространственные наблюдатели обычно являются компонентами платформы, которые действуют как поставщик для отображая различных типов данных сетки из конечной точки конкретной платформы (т. е. HoloLens).

1. Открыть или развернуть *системный профиль пространственного отслеживания*

    ![Системный профиль пространственного отслеживания](../images/spatial-awareness/SpatialAwarenessProfile.png)

1. Нажмите кнопку *"добавить пространственный наблюдатель"*
1. Выбор требуемого *типа реализации пространственного наблюдателя*

    ![Выбор реализации пространственного наблюдателя](../images/spatial-awareness/SpatialAwarenessSelectObserver.png)

1. [Изменение свойств конфигурации наблюдателя](configuring-spatial-awareness-mesh-observer.md) при необходимости

> [!NOTE]
> `DefaultMixedRealityToolkitConfigurationProfile`У пользователей (Assets/мртк/SDK/Profiles) будет предварительно настроена система пространственной осведомленности для платформы Windows Mixed Reality, которая использует [`WindowsMixedRealitySpatialMeshObserver`](xref:Microsoft.MixedReality.Toolkit.WindowsMixedReality.SpatialAwareness.WindowsMixedRealitySpatialMeshObserver) класс.

### <a name="build-and-deploy"></a>Сборка и развертывание

После настройки системы пространственной информации с нужными наблюдателями проект можно построить и развернуть на целевой платформе.

> [!IMPORTANT]
> Если вы намерены ориентироваться на платформу Windows Mixed Reality (например, HoloLens), важно убедиться, что [функция пространственного восприятия](/windows/mixed-reality/spatial-mapping-in-unity) включена, чтобы использовать систему пространственного отслеживания на устройстве.

> [!WARNING]
> Некоторые платформы, включая Microsoft HoloLens, обеспечивают поддержку удаленного выполнения в Unity. Эта функция обеспечивает быструю разработку и тестирование без необходимости выполнять этап сборки и развертывания. Обязательно выполните окончательное приемочное тестирование с помощью созданной и развернутой версии приложения, работающей на целевом оборудовании и платформе.

## <a name="next-steps"></a>Следующие шаги

После выполнения описанных выше процедур для включения системы пространственной информации система может настраиваться и контролироваться более подробно.

Сведения о настройке наблюдателей в инспекторе:

- [Настройка наблюдателей для использования на устройствах](configuring-spatial-awareness-mesh-observer.md)
- [Настройка наблюдателей для использования в редакторе](spatial-object-mesh-observer.md)

Сведения для управления и расширения наблюдателей с помощью кода:

- [Настройка наблюдателей с помощью кода](usage-guide.md)
- [Создание пользовательского наблюдателя](create-data-provider.md)

## <a name="see-also"></a>См. также

- [Документация по API пространственной осведомленности](xref:Microsoft.MixedReality.Toolkit.SpatialAwareness)
- [Общие сведения о пространственном сопоставлении ВМР](/windows/mixed-reality/spatial-mapping)
- [Пространственное сопоставление в Unity ВМР](/windows/mixed-reality/spatial-mapping-in-unity)