---
title: Oculus Quest — MRTK
description: Документация по настройке Окулус Quest в МРТК
author: RogPodge
ms.author: roliu
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, Смешанная реальность, разработка, МРТК, Окулус Quest,
ms.openlocfilehash: 0892e0d416cd07d1bedbeea0ddb316e3eb012b94
ms.sourcegitcommit: 4c1dd5c22af69eeb192425118c2bfb95344b8dd9
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/25/2021
ms.locfileid: "110441177"
---
# <a name="building-and-deploying-mrtk-to-oculus-quest-using-the-xr-sdk-pipeline"></a>Создание и развертывание МРТК в Окулус Quest с помощью конвейера XR SDK

Требуется [окулусный Quest](https://www.oculus.com/quest/) .

Поддержка МРТК для Окулус Quest предоставляется через два разных источника: конвейер XR пакета SDK Unity и пакет Unity интеграции Окулус. **Поставщик данных Окулус ксрсдк** позволяет использовать оба источника и должен использоваться для развертывания Мртк в Окулус Quest.

[Конвейер пакета SDK для Unity XR](https://docs.unity3d.com/Manual/XR.html) позволяет использовать сенсорные контроллеры Окулус и головное отслеживание с помощью Окулус Quest.
Этот конвейер является стандартом для разработки XR приложений в Unity 2019,3 и более поздних версиях. Чтобы использовать этот конвейер, убедитесь, что используется **Unity 2019,3 или более поздней версии**. **Это необходимо для развертывания** мртк приложений в Окулус Quest. 

[Пакет Unity для интеграции Окулус](https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022) позволяет использовать **Отслеживание вручную** с помощью Окулус Quest. Этот поставщик данных **не** использует **конвейер пакета SDK для XR** Unity или **устаревший конвейер XR**.

## <a name="setting-up-project-for-the-oculus-quest"></a>Настройка проекта для Окулус Quest

1. Выполните следующие [действия](https://developer.oculus.com/documentation/unity/book-unity-gsg/) , чтобы убедиться, что проект готов к развертыванию в Окулус Quest.

1. Убедитесь, что на устройстве включен [режим разработчика](https://developer.oculus.com/documentation/native/android/mobile-device-setup/) . Установка драйверов Окулус ADB является необязательной.

## <a name="setting-up-the-xr-sdk-pipeline-for-oculus-quest"></a>Настройка конвейера XR SDK для Окулус Quest

1. Убедитесь, что **подключаемый модуль Окулус XR** установлен в **окне "окно" — > диспетчер пакетов**

    ![Пакет подключаемого модуля Окулус XR](../images/cross-platform/oculus-quest/OculusXRPluginPackage.png)

1. Убедитесь, что поставщик подключаемого модуля Окулус включен в проект, выбрав " **Изменить"--> "Параметры проекта"--> "Управление подключаемыми модулями"-->** подключаемых модулей

    ![Поставщик подключаемого модуля Окулус](../images/cross-platform/oculus-quest/OculusPluginProvider.png)

## <a name="setting-up-the-oculus-integration-unity-package-to-enable-handtracking"></a>Настройка пакета Unity для интеграции Окулус для включения хандтраккинг

1. Скачайте и импортируйте [интеграцию Окулус](https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022) из магазина активов Unity. Последняя версия, протестированная на работу, — это 20.0.0. Более старые версии можно найти в этом [архиве](https://developer.oculus.com/downloads/package/unity-integration-archive/) .

1. Перейдите к набору средств Mixed Reality Toolkit > служебные программы > Окулус > интеграция модулей Unity Окулус Integration. Это приведет к обновлению асмдефс с определениями и ссылками, необходимыми для работы соответствующего кода Окулус Quest. Также будет обновлен файл CSC для фильтрации устаревших предупреждений, созданных ресурсами интеграции Окулус. Репозиторий МРТК содержит файл CSC, который преобразует предупреждения в ошибки. это преобразование прерывает процесс настройки MRTK-Quest.

    ![Асмдеф интеграция Окулус](../images/cross-platform/oculus-quest/OculusIntegrationAsmdef.png)

1. В импортированной папке Окулус (она должна быть найдена в Assets/Окулус) имеется объект, поддерживающий скрипт, именуемый Окулуспрожектконфиг. В этом файле конфигурации необходимо задать для Хандтраккингсуппорт значение "Controllers and руки".

    ![Контроллер интеграции Окулус и руки](../images/cross-platform/oculus-quest/OculusIntegrationControllerAndHands.png)

## <a name="setting-up-the-scene"></a>Настройка сцены

1. Создание новой сцены Unity или открытие уже существующей сцены, например Хандинтерактионексамплес
1. Добавьте мртк в сцену, перейдя к **набору средств Mixed Reality**  >  **Добавить в сцену и настроить** .

## <a name="using-the-oculus-xr-sdk-data-provider"></a>Использование поставщика данных Окулус XR SDK

1. Настройка профиля для использования **поставщика данных Окулус XR SDK**
    - Если не планируется изменять профили конфигурации
        - Измените профиль на Дефаултксрсдкконфигуратионпрофиле и перейдите к разделу [Сборка и развертывание проекта в Окулус Quest](oculus-quest-mrtk.md#build-and-deploy-your-project-to-oculus-quest) .

    - В противном случае выполните следующие действия.
        - Выберите в иерархии объект Game Микседреалититулкит и выберите **Копировать и настроить** , чтобы клонировать профиль смешанной реальности по умолчанию.

        ![Клонировать профиль](../images/cross-platform/CloneProfile.png)

        - Выберите профиль **входной** конфигурации

        ![Профиль входной конфигурации](../images/cross-platform/InputConfigurationProfile.png)

        - Выберите **клон** во входном системном профиле, чтобы разрешить изменение.

        ![Клонировать входной системный профиль](../images/cross-platform/CloneInputSystemProfile.png)

        - Откройте раздел **поставщики входных данных** , выберите **Добавить поставщик данных** в верхней части, и новый поставщик данных будет добавлен в конец списка.  Откройте новый поставщик данных и задайте для него **тип** **Microsoft. микседреалити. Toolkit. ксрсдк. Окулус > окулусксрсдкдевицеманажер**

        ![Окулус добавить поставщик данных КСРСДК](../images/cross-platform/oculus-quest/OculusAddDataXRSDKProvider.png)

1. Поставщик данных Окулус XR SDK включает в себя ОВРную платформу камеры, prefab которая автоматически настраивает проект с помощью платформы ОВР Camera и ОВР для правильного направления входных данных. Чтобы вручную добавить на сцену платформу камеры ОВР, потребуется настройка параметров и входных данных вручную.

## <a name="build-and-deploy-your-project-to-oculus-quest"></a>Создание и развертывание проекта в Окулус Quest

1. Подключайте свой Окулусный Quest через 3,0 USB-> USB с кабелем
1. Выберите **файл > параметры сборки**
1. Изменение развертывания на **Android**
1. Убедитесь, что в качестве подходящего устройства запуска выбран Окулус Quest.

    ![Окулус запустить устройство](../images/cross-platform/oculus-quest/OculusRunDevice.png)

1. Выбор сборки и запуска
    - При выборе *сборки и запуска* в первый раз, скорее всего, будет появляться следующий набор ошибок сборки. Вы можете успешно выполнить развертывание после выбора *сборки и запуска* .

    ![Окулус ожидаемые ошибки сборки](../images/cross-platform/oculus-quest/OculusExpectedBuildErrors.png)

1. Принятие запроса на _отладку по USB-порту_ в приглашении
1. Просмотр сцены в Окулус Quest

## <a name="removing-oculus-integration-from-the-project"></a>Удаление интеграции Окулус из проекта

1. Перейдите к набору средств Mixed Reality > Окулус > отдельных модулей Unity для интеграции Окулус  ![ Окулус разделение асмдеф](../images/cross-platform/oculus-quest/OculusSeparationAsmdef.png)
1. Разрешите обновление Unity в виде ссылок в файле Microsoft. Микседреалити. Toolkit. Providers. Окулус. асмдеф и других файлах, которые будут изменены на этом шаге.
1. Закрыть Unity
1. Закрыть Visual Studio, если она открыта
1. Откройте проводник и перейдите к корню проекта Unity МРТК.
1. Удаление каталога Унитипрожектнаме/Library
1. Удаление каталога Унитипрожектнаме/Assets/Окулус
1. Удаление файла Унитипрожектнаме/Assets/Окулус. meta
1. Повторное открытие Unity

## <a name="common-errors"></a>Распространенные ошибки

### <a name="quest-not-recognized-by-unity"></a>Не удается распознать поручение Unity

Убедитесь, что правильно настроены пути Android. Если проблемы продолжают возникать, [следуйте указаниям в этом разделе](https://developer.oculus.com/documentation/unity/book-unity-gsg/#install-android-tools) .

**Изменение настроек > > внешних инструментов > Android**

![Конфигурация инструментов Android](../images/cross-platform/oculus-quest/AndroidToolsConfig.png)
