---
title: Развертывание в Oculus Quest
description: Документация по настройке Окулус Quest в МРТК
author: RogPodge
ms.author: roliu
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, смешанная реальность, разработка, мртк, окулус Quest
ms.openlocfilehash: d910f26374b21be26377bd40b9be0d45872e007a
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2021
ms.locfileid: "113177456"
---
# <a name="deploying-to-oculus-quest"></a>Развертывание в Oculus Quest

Требуется [окулусный Quest](https://www.oculus.com/quest/) .

Поддержка МРТК для Окулус Quest предоставляется через два разных источника: конвейер XR пакета SDK Unity и пакет Unity интеграции Окулус. **Поставщик данных Окулус ксрсдк** позволяет использовать оба источника и должен использоваться для развертывания Мртк в Окулус Quest.

[Конвейер пакета SDK для Unity XR](https://docs.unity3d.com/Manual/XR.html) позволяет использовать сенсорные контроллеры Окулус и головное отслеживание с помощью Окулус Quest.
Этот конвейер является стандартом для разработки XR приложений в Unity 2019,3 и более поздних версиях. Чтобы использовать этот конвейер, убедитесь, что используется **Unity 2019,3 или более поздней версии**. **Это необходимо для развертывания** мртк приложений в Окулус Quest.

[Пакет Unity для интеграции Окулус](https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022) позволяет использовать **Отслеживание вручную** с помощью Окулус Quest. Этот поставщик данных **не** использует **конвейер пакета SDK для XR** Unity или **устаревший конвейер XR**.

## <a name="setting-up-project-for-the-oculus-quest"></a>Настройка проекта для Окулус Quest

1. Выполните следующие [действия](https://developer.oculus.com/documentation/unity/book-unity-gsg/) , чтобы убедиться, что проект готов к развертыванию в Окулус Quest.

1. Убедитесь, что на устройстве включен [режим разработчика](https://developer.oculus.com/documentation/native/android/mobile-device-setup/) . Установка драйверов Окулус ADB является необязательной.

## <a name="setting-up-the-xr-sdk-pipeline-for-oculus-quest"></a>Настройка конвейера XR SDK для Окулус Quest

1. убедитесь, что **подключаемый модуль окулус XR** установлен в разделе **Window--> диспетчер пакетов**

    ![Пакет подключаемого модуля Окулус XR](../images/cross-platform/oculus-quest/OculusXRPluginPackage.png)

1. убедитесь, что поставщик подключаемого модуля окулус включен в проект, выбрав " **изменить"--> Project Параметры--> "управление подключаемыми модулями XR"--> поставщиков подключаемых модулей**

    ![Поставщик подключаемого модуля Окулус](../images/cross-platform/oculus-quest/OculusPluginProvider.png)

## <a name="setting-up-the-oculus-integration-unity-package-to-enable-handtracking"></a>Настройка пакета Unity для интеграции Окулус для включения хандтраккинг

1. Скачайте и импортируйте [интеграцию Окулус](https://assetstore.unity.com/packages/tools/integration/oculus-integration-82022) из магазина активов Unity. Последняя версия, протестированная на работу, — это 20.0.0. Более старые версии можно найти в этом [архиве](https://developer.oculus.com/downloads/package/unity-integration-archive/).

1. перейдите в раздел смешанная реальность набор средств > служебные программы > окулус > интеграция модулей Unity для интеграции окулус. Это приведет к обновлению асмдефс с определениями и ссылками, необходимыми для работы соответствующего кода Окулус Quest. Также будет обновлен файл CSC для фильтрации устаревших предупреждений, созданных ресурсами интеграции Окулус. Репозиторий МРТК содержит файл CSC, который преобразует предупреждения в ошибки. это преобразование прерывает процесс настройки MRTK-Quest.

    ![Асмдеф интеграция Окулус](../images/cross-platform/oculus-quest/OculusIntegrationAsmdef.png)

1. В импортированной папке Окулус (она должна быть найдена в Assets/Окулус) имеется объект, поддерживающий скрипт, именуемый Окулуспрожектконфиг. В этом файле конфигурации необходимо задать для Хандтраккингсуппорт значение "Controllers and руки".

    ![Контроллер интеграции Окулус и руки](../images/cross-platform/oculus-quest/OculusIntegrationControllerAndHands.png)

## <a name="setting-up-the-scene"></a>Настройка сцены

1. Создайте новую сцену или откройте уже существующую сцену, например Хандинтерактионексамплес.
1. добавьте мртк в сцену, перейдя к " **смешанная реальность" набор средств**  >  **добавить в сцену и настроить**.

## <a name="using-the-oculus-xr-sdk-data-provider"></a>Использование поставщика данных Окулус XR SDK

::: moniker range=">= mrtkunity-2021-05"

1. Настройка профиля для использования **поставщика данных Окулус XR SDK**
    - Если не планируется изменять профили конфигурации
        - Используйте любой из профилей МРТК по умолчанию, которые настроены для всех конвейеров XR Unity. Предыдущая Дефаултксрсдкконфигуратионпрофиле теперь помечена как устаревшая.
        - Перейдите к разделу [Сборка и развертывание проекта в Окулус Quest](oculus-quest-mrtk.md#build-and-deploy-your-project-to-oculus-quest).
    - В противном случае выполните следующие действия.
        - Выберите в иерархии объект Game Микседреалититулкит и выберите **Копировать и настроить** , чтобы клонировать профиль смешанной реальности по умолчанию.

        ![Клонировать профиль](../images/cross-platform/CloneProfile.png)

        - Выберите профиль **входной** конфигурации.

        ![Профиль входной конфигурации](../images/cross-platform/InputConfigurationProfile.png)

        - Выберите **клон** во входном системном профиле, чтобы разрешить изменение.

        ![Клонировать входной системный профиль](../images/cross-platform/CloneInputSystemProfile.png)

        - Откройте раздел **поставщики входных данных** , выберите **Добавить поставщик данных** в верхней части, и новый поставщик данных будет добавлен в конец списка.  откройте новый поставщик данных и задайте для него **тип** **Microsoft. микседреалити. набор средств. КСРСДК. Окулус > Окулусксрсдкдевицеманажер**.

        ![Окулус добавить поставщик данных КСРСДК](../images/cross-platform/oculus-quest/OculusAddDataXRSDKProvider.png)
::: moniker-end
::: moniker range="< mrtkunity-2021-05"

1. Настройка профиля для использования **поставщика данных Окулус XR SDK**
    - Если не планируется изменять профили конфигурации
        - Измените профиль на Дефаултксрсдкконфигуратионпрофиле.
        - Перейдите к разделу [Сборка и развертывание проекта в Окулус Quest](oculus-quest-mrtk.md#build-and-deploy-your-project-to-oculus-quest).
    - В противном случае выполните следующие действия.
        - Выберите в иерархии объект Game Микседреалититулкит и выберите **Копировать и настроить** , чтобы клонировать профиль смешанной реальности по умолчанию.

        ![Клонировать профиль](../images/cross-platform/CloneProfile.png)

        - Выберите профиль **входной** конфигурации.

        ![Профиль входной конфигурации](../images/cross-platform/InputConfigurationProfile.png)

        - Выберите **клон** во входном системном профиле, чтобы разрешить изменение.

        ![Клонировать входной системный профиль](../images/cross-platform/CloneInputSystemProfile.png)

        - Откройте раздел **поставщики входных данных** , выберите **Добавить поставщик данных** в верхней части, и новый поставщик данных будет добавлен в конец списка.  откройте новый поставщик данных и задайте для него **тип** **Microsoft. микседреалити. набор средств. КСРСДК. Окулус > Окулусксрсдкдевицеманажер**.

        ![Окулус добавить поставщик данных КСРСДК](../images/cross-platform/oculus-quest/OculusAddDataXRSDKProvider.png)
::: moniker-end

1. Поставщик данных Окулус XR SDK включает в себя ОВРную платформу камеры, prefab которая автоматически настраивает проект с помощью платформы ОВР Camera и ОВР для правильного направления входных данных. Чтобы вручную добавить на сцену платформу камеры ОВР, потребуется настройка параметров и входных данных вручную.

## <a name="build-and-deploy-your-project-to-oculus-quest"></a>Создание и развертывание проекта в Окулус Quest

1. Подключайте свой Окулусный Quest через 3,0 USB-> USB с кабелем
1. выберите **файл > сборка Параметры**
1. Изменение развертывания на **Android**
1. Убедитесь, что в качестве подходящего устройства запуска выбран Окулус Quest.

    ![Окулус запустить устройство](../images/cross-platform/oculus-quest/OculusRunDevice.png)

1. Выбор сборки и запуска
    - При выборе *сборки и запуска* в первый раз, скорее всего, будет появляться следующий набор ошибок сборки. Вы можете успешно выполнить развертывание после выбора *сборки и запуска* .

    ![Окулус ожидаемые ошибки сборки](../images/cross-platform/oculus-quest/OculusExpectedBuildErrors.png)

1. Принятие запроса на _отладку по USB-порту_ в приглашении
1. Просмотр сцены в Окулус Quest

## <a name="removing-oculus-integration-from-the-project"></a>Удаление интеграции Окулус из Project

1. перейдите к набор средств смешанной реальности > окулус > отдельных модулей Unity окулус Integration ![ окулус разделение асмдеф](../images/cross-platform/oculus-quest/OculusSeparationAsmdef.png)
1. Разрешить обновление Unity в виде ссылок в Microsoft. Микседреалити. набор средств. На этом шаге изменяются поставщики. Окулус. асмдеф и другие файлы.
1. Закрыть Unity
1. закрыть Visual Studio, если он открыт
1. Откройте проводник и перейдите к корню проекта Unity МРТК.
1. Удаление каталога Унитипрожектнаме/Library
1. Удаление каталога Унитипрожектнаме/Assets/Окулус
1. Удаление файла Унитипрожектнаме/Assets/Окулус. meta
1. Повторное открытие Unity

## <a name="common-errors"></a>Распространенные ошибки

### <a name="quest-not-recognized-by-unity"></a>Не удается распознать поручение Unity

Убедитесь, что правильно настроены пути Android. Если проблемы продолжают возникать, [следуйте указаниям в этом разделе](https://developer.oculus.com/documentation/unity/book-unity-gsg/#install-android-tools) .

**Изменение настроек > > внешних инструментов > Android**

![Конфигурация инструментов Android](../images/cross-platform/oculus-quest/AndroidToolsConfig.png)
