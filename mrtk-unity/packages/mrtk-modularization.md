---
title: Модульная МРТК
description: Описывает компоненты в МРТК.
author: davidkline-ms
ms.author: davidkl
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, смешанная реальность, разработка, MRTK
ms.openlocfilehash: eac96e309afc21f9a2b6efe9c3aef5975e4f0dff
ms.sourcegitcommit: f338b1f121a10577bcce08a174e462cdc86d5874
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/01/2021
ms.locfileid: "113177012"
---
# <a name="mrtk-modularization"></a>Модульная МРТК

одной из замечательных новых функций смешанной реальности набор средств v2 является улучшение компонентов. Везде, где это возможно, отдельные компоненты изолированы от всех основных уровней фундамента.

## <a name="minimized-dependencies"></a>Минимальные зависимости

МРТК v2 была специально разработана для того, чтобы быть модульными и минимальными зависимостями между системными службами (например, сведения о пространственной поддержке).

Из-за особенностей некоторых системных служб (например, входных и телепортов) существует небольшое количество зависимостей.

Хотя предполагается, что службам потребуется один или несколько компонентов поставщика данных, между ними нет прямых связей. Это справедливо и для функций пакета SDK (например, компонентов пользовательского интерфейса).

## <a name="component-communication"></a>Взаимодействие компонентов

Чтобы обеспечить отсутствие прямых связей между компонентами, МРТК v2 использует интерфейсы для взаимодействия между службами, поставщиками данных и кодом приложения. эти интерфейсы определяются в, и все коммуникации направляются через компонент набор средств ядра "смешанная реальность".

![Использование системы пространственного отслеживания через интерфейсы](../features/images/packaging/AccessingViaInterfaces.png)

## <a name="minimizing-mrtk-import-footprint"></a>Минимизация объема МРТК импорта

В данный момент МРТК импортируется как единый базовый пакет (без учета примеров пакета, который является полностью необязательным пакетом). Вы можете уменьшить размер этого места, выполнив ручную отработку на импортированные файлы, хотя это очень просто процесс, который не имеет четко определенного руководства.

При импорте пакета Foundation можно снять флажки для произвольных элементов. Однако не рекомендуется делать это на раннем этапе разработки, так как это может привести к нарушению функциональности. После выяснения итогового набора функций приложения Удаление ненужных поставщиков и служб может выполняться в следующих папках:

- МРТК и службы
- МРТК и поставщики
- МРТК/SDK/компоненты

> [!NOTE]
> Для МРТК версии 2. x **_требуется_** содержимое папки Assets/Мртк/Core.

## <a name="upcoming-features"></a>Предстоящие функции

### <a name="application-architecture"></a>Архитектура приложения

МРТК будет поддерживать сборку приложений с использованием различных архитектур, в том числе:

- [Локатор службы Микседреалититулкит](#mixedrealitytoolkit-service-locator)
- [Отдельные службы](#individual-service-components)
- [Пользовательский указатель службы](#custom-service-locator)
- [Гибридная архитектура](#hybrid-architecture)

При выборе архитектуры приложения важно учитывать гибкость проектирования и производительность приложений. Описанные здесь архитектуры не должны подойти для каждого приложения.

#### <a name="mixedrealitytoolkit-service-locator"></a>Локатор службы Микседреалититулкит

МРТК включает (и автоматически настраивает) сцены приложений для использования [`MixedRealityToolkit`](xref:Microsoft.MixedReality.Toolkit.MixedRealityToolkit) компонента локатора служб по умолчанию. Этот компонент включает поддержку настройки систем и поставщиков данных МРТК через инспекторы конфигураций и управляет сроком существования компонентов и основными характеристиками (например, при обновлении).

Все системы представлены в основном инспекторе конфигураций, независимо от того, есть они или нет в проекте. Дополнительные сведения см. в разделе с [руководством по настройке смешанной реальности](../configuration/mixed-reality-configuration-guide.md) .

#### <a name="individual-service-components"></a>Отдельные компоненты службы

Некоторые разработчики выражают желание включить отдельные компоненты службы в иерархию Application сцены. Чтобы включить это использование, необходимо инкапсулировать службы в настраиваемом регистраторе или выполнить самостоятельную регистрацию или самостоятельное управление.

Самостоятельная служба реализует [`IMixedRealityServiceRegistrar`](xref:Microsoft.MixedReality.Toolkit.IMixedRealityServiceRegistrar) и регистрирует саму себя, чтобы код приложения мог обнаружить экземпляр службы через реестр.

Самостоятельно управляемая служба может быть реализована как одноэлементный объект в иерархии сцены. Этот объект предоставляет и свойство экземпляра, которые код приложения может использовать для прямого доступа к функциональным возможностям службы.

#### <a name="custom-service-locator"></a>Пользовательский указатель службы

Некоторые разработчики запросили возможность создания пользовательского компонента локатора служб. Пользовательские указатели служб реализуют [`IMixedRealityServiceRegistrar`](xref:Microsoft.MixedReality.Toolkit.IMixedRealityServiceRegistrar) интерфейс и управляют жизненным циклом и основными поведениями активных служб.

#### <a name="hybrid-architecture"></a>Гибридная архитектура

МРТК будет поддерживать гибридную архитектуру, в которой разработчики могут комбинировать предыдущие подходы по мере необходимости или нужным образом. Например, разработчик может начать с [`MixedRealityToolkit`](xref:Microsoft.MixedReality.Toolkit.MixedRealityToolkit) локатора службы и добавить собственную службу регистрации.

> [!NOTE]
> При продолжении использования гибридной архитектуры важно быть учитыватьм любого дублирования работы (например, получение данных контроллера из нескольких компонентов).
