---
title: Стабилизация голограмм
description: Производительность голограмм в разных условиях и частоте кадров.
author: keveleigh
ms.author: kurtie
ms.date: 01/12/2021
keywords: Unity, HoloLens, HoloLens 2, Mixed Reality, разработка, МРТК, отслеживание среды, TMP,
ms.openlocfilehash: 338ae2719764b84b7c58c1422e08fe02176eccf0
ms.sourcegitcommit: b195b82f7e83e2ac4f5d8937d169e9dcb865d46d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 05/24/2021
ms.locfileid: "110333436"
---
# <a name="hologram-stabilization"></a><span data-ttu-id="c52b3-104">Голограмма стабилизации</span><span class="sxs-lookup"><span data-stu-id="c52b3-104">Hologram stabilization</span></span>

## <a name="performance"></a><span data-ttu-id="c52b3-105">Производительность</span><span class="sxs-lookup"><span data-stu-id="c52b3-105">Performance</span></span>

<span data-ttu-id="c52b3-106">Чтобы базовая платформа и устройство смешанной реальности могли добиться наилучших результатов, важно достичь частоты кадров.</span><span class="sxs-lookup"><span data-stu-id="c52b3-106">In order for the underlying mixed reality platform and device to produce the best results, it is important to achieve performing frame rates.</span></span> <span data-ttu-id="c52b3-107">Целевая частота кадров (например, 60 кадров/с/90 кадров/с) различается для разных платформ и устройств.</span><span class="sxs-lookup"><span data-stu-id="c52b3-107">The target framerate (ex: 60 FPS or 90 FPS) will vary across platforms and devices.</span></span> <span data-ttu-id="c52b3-108">Однако у приложений смешанной реальности частота кадров будет стабильной, а также эффективным отслеживанием головок, отслеживанием и многое другое.</span><span class="sxs-lookup"><span data-stu-id="c52b3-108">However, mixed reality applications meeting framerate will have stable holograms as well as efficient head tracking, hand tracking and more.</span></span>  

## <a name="environment-tracking"></a><span data-ttu-id="c52b3-109">Отслеживание окружения</span><span class="sxs-lookup"><span data-stu-id="c52b3-109">Environment tracking</span></span>

<span data-ttu-id="c52b3-110">Стабильная Визуализация с интенсивной обработкой в значительной степени полагается на устройство & платформы.</span><span class="sxs-lookup"><span data-stu-id="c52b3-110">Stable holographic rendering heavily relies on head-pose tracking by the platform & device.</span></span> <span data-ttu-id="c52b3-111">Unity выполнит визуализацию сцены каждый кадр из фотоаппарата, выдаваемый базовой платформой.</span><span class="sxs-lookup"><span data-stu-id="c52b3-111">Unity will render the scene every frame from the camera pose estimated and supplied by the underlying platform.</span></span> <span data-ttu-id="c52b3-112">Если отслеживание не соответствует фактическому перемещению головного, то голограммы будут отображаться визуально неточно.</span><span class="sxs-lookup"><span data-stu-id="c52b3-112">If this tracking does not correctly follow actual head movement, then holograms will appear visually inaccurate.</span></span> <span data-ttu-id="c52b3-113">Это особенно очевидно и важно для устройств AR, таких как HoloLens, где пользователи могут связывать виртуальные голограммы с реальным миром.</span><span class="sxs-lookup"><span data-stu-id="c52b3-113">This is especially evident and important for AR devices like HoloLens where users can relate virtual holograms to the real world.</span></span> <span data-ttu-id="c52b3-114">Производительность важна для надежного отслеживания головок, но также могут существовать и [другие важные функции](/windows/mixed-reality/environment-considerations-for-hololens).</span><span class="sxs-lookup"><span data-stu-id="c52b3-114">Performance is significant for reliable head tracking, but there can be [other important features](/windows/mixed-reality/environment-considerations-for-hololens), as well.</span></span> <span data-ttu-id="c52b3-115">Типы элементов среды, влияющие на взаимодействие с пользователем, зависят от конкретной платформы.</span><span class="sxs-lookup"><span data-stu-id="c52b3-115">The types of environment elements impacting user experience will depend on the targeted platform specifics.</span></span>

## <a name="windows-mixed-reality"></a><span data-ttu-id="c52b3-116">Windows Mixed Reality</span><span class="sxs-lookup"><span data-stu-id="c52b3-116">Windows Mixed Reality</span></span>

<span data-ttu-id="c52b3-117">Платформа Windows Mixed Reality предоставляет некоторые [Справочные материалы](/windows/mixed-reality/hologram-stability) по стабилизации голограмм на платформе.</span><span class="sxs-lookup"><span data-stu-id="c52b3-117">The Windows Mixed Reality platform provides some [reference material](/windows/mixed-reality/hologram-stability) for stabilizing holograms on the platform.</span></span> <span data-ttu-id="c52b3-118">Существует несколько ключевых средств, которые разработчики могут использовать для улучшения визуальной визуализации пользователей.</span><span class="sxs-lookup"><span data-stu-id="c52b3-118">There are a handful of key tools though that developers can utilize to improve the hologram visual experience for users.</span></span>

### <a name="depth-buffer-sharing"></a><span data-ttu-id="c52b3-119">Общий доступ к буферу глубины</span><span class="sxs-lookup"><span data-stu-id="c52b3-119">Depth buffer sharing</span></span>

<span data-ttu-id="c52b3-120">Разработчики Unity имеют возможность совместно использовать буфер глубины приложения с платформой.</span><span class="sxs-lookup"><span data-stu-id="c52b3-120">Unity developers have the option of sharing the application's depth buffer with the platform.</span></span> <span data-ttu-id="c52b3-121">Это предоставляет сведения, в которых существует голограмма для текущего кадра, которую платформа может использовать для стабилизации голограмм с помощью процесса аппаратной поддержки, известного как Late-Stage переработка.</span><span class="sxs-lookup"><span data-stu-id="c52b3-121">This provides information, where holograms exist for a current frame, that the platform can utilize to stabilize holograms via a hardware-assisted process known as Late-Stage Reprojection.</span></span>

#### <a name="late-stage-reprojection"></a><span data-ttu-id="c52b3-122">Перепроецирование с поздним этапом</span><span class="sxs-lookup"><span data-stu-id="c52b3-122">Late-stage reprojection</span></span>

<span data-ttu-id="c52b3-123">По завершении отрисовки рамки платформа Windows Mixed Reality принимает цветовые &ные целевые объекты рендеринга глубины, созданные приложением, и преобразует окончательный вывод на экран, чтобы учитывать любое небольшое перемещение по головному плану с момента последнего прогнозирования.</span><span class="sxs-lookup"><span data-stu-id="c52b3-123">At the end of rendering a frame, the Windows Mixed Reality platform takes the color & depth render targets produced by the application and transforms the final screen output to account for any slight head movement since the last head pose prediction.</span></span> <span data-ttu-id="c52b3-124">Для выполнения цикла игры приложения требуется время.</span><span class="sxs-lookup"><span data-stu-id="c52b3-124">An application's game loop takes time to execute.</span></span> <span data-ttu-id="c52b3-125">Например, в 60/с, это означает, что приложение занимает ~ 16.667 MS для отрисовки кадра.</span><span class="sxs-lookup"><span data-stu-id="c52b3-125">For example, at 60 FPS, this means the application is taking ~16.667ms to render a frame.</span></span> <span data-ttu-id="c52b3-126">Несмотря на то, что это может показаться считанные мгновениям временем, положение и ориентация пользователя в голову изменятся в результате создания матрицы проекции для камеры в процессе подготовки к просмотру.</span><span class="sxs-lookup"><span data-stu-id="c52b3-126">Even though this may seem like a miniscule amount of time, the user's position and orientation of their head will change resulting in new projection matrices for the camera in rendering.</span></span> <span data-ttu-id="c52b3-127">Переработка с поздним этапом переводит пикселы в окончательном изображении, чтобы учитывать эту новую перспективу.</span><span class="sxs-lookup"><span data-stu-id="c52b3-127">Late-stage reprojection transforms the pixels in the final image to account for this new perspective.</span></span>

#### <a name="per-pixel-vs-stabilization-plane-lsr"></a><span data-ttu-id="c52b3-128">Стабилизации плоскость на уровне пикселов и ЛСР</span><span class="sxs-lookup"><span data-stu-id="c52b3-128">Per-pixel vs stabilization plane LSR</span></span>

<span data-ttu-id="c52b3-129">В зависимости от конечной точки устройства и версии ОС, работающей на устройстве Windows Mixed Reality, Late-Stage алгоритм РЕПРОЕКЦИИ будет выполняться на пиксель или с помощью [плоскости стабилизации](/windows/mixed-reality/hologram-stability#stabilization-plane).</span><span class="sxs-lookup"><span data-stu-id="c52b3-129">Depending on the device endpoint and OS version running on a Windows Mixed Reality device, the Late-Stage Reprojection algorithm will either be performed per-pixel or via a [stabilization plane](/windows/mixed-reality/hologram-stability#stabilization-plane).</span></span>

##### <a name="per-pixel-depth-based"></a><span data-ttu-id="c52b3-130">На основе глубины на пиксель</span><span class="sxs-lookup"><span data-stu-id="c52b3-130">Per-pixel depth-based</span></span>

<span data-ttu-id="c52b3-131">Изменение на основе глубины на уровне пикселя предполагает использование буфера глубины для изменения выходных данных изображения на пиксель и, таким образом, приводит к стабилизации голограмм на различных расстояниях.</span><span class="sxs-lookup"><span data-stu-id="c52b3-131">Per-pixel depth-based reprojection involves utilizing the depth buffer to modify the image output per pixel and thus stabilize holograms at various distances.</span></span> <span data-ttu-id="c52b3-132">Например, сфера 1м может находиться перед основополагающей стороной, 10 миллионов.</span><span class="sxs-lookup"><span data-stu-id="c52b3-132">For example, a sphere 1m away may be in front of a pillar that is 10m away.</span></span> <span data-ttu-id="c52b3-133">Пиксели, представляющие сферу, будут иметь другое преобразование, чем далеко пикселы, представляющие основополагающий аспект, если пользователь немного наклонен его заголовок.</span><span class="sxs-lookup"><span data-stu-id="c52b3-133">The pixels representing the sphere will have a different transform than the far away pixels representing the pillar if the user has tilted their head slightly.</span></span> <span data-ttu-id="c52b3-134">При перепроецировании на каждый пиксель будет учитывать это различие расстояния на каждом пикселе для более точной реорганизации.</span><span class="sxs-lookup"><span data-stu-id="c52b3-134">Per-pixel reprojection will take into account this distance difference at every pixel for more accurate reprojection.</span></span>

##### <a name="stabilization-plane"></a><span data-ttu-id="c52b3-135">Плоскость стабилизации</span><span class="sxs-lookup"><span data-stu-id="c52b3-135">Stabilization plane</span></span>

<span data-ttu-id="c52b3-136">Если невозможно создать точный буфер глубины для совместного использования с платформой, в другой форме ЛСР используется плоскость стабилизации.</span><span class="sxs-lookup"><span data-stu-id="c52b3-136">If it is not possible to create an accurate depth buffer to share with the platform, another form of LSR utilizes a stabilization plane.</span></span> <span data-ttu-id="c52b3-137">Все голограммы в сцене получат некоторые стабилизации, но самые отдаленные области будут иметь максимальный стабилизации оборудования.</span><span class="sxs-lookup"><span data-stu-id="c52b3-137">All holograms in a scene will receive some stabilization, but holograms lying in the desired plane will receive the maximum hardware stabilization.</span></span> <span data-ttu-id="c52b3-138">Точка и нормальный уровень плоскости можно предоставить платформе через API *холографиксеттингс. сетфокуспоинтфорфраме* [, предоставляемый Unity](/windows/mixed-reality/focus-point-in-unity).</span><span class="sxs-lookup"><span data-stu-id="c52b3-138">The point and normal for the plane can be supplied to the platform via the *HolographicSettings.SetFocusPointForFrame* [API provided by Unity](/windows/mixed-reality/focus-point-in-unity).</span></span>

#### <a name="depth-buffer-format"></a><span data-ttu-id="c52b3-139">Формат буфера глубины</span><span class="sxs-lookup"><span data-stu-id="c52b3-139">Depth buffer format</span></span>

<span data-ttu-id="c52b3-140">При нацеливании на HoloLens для разработки настоятельно рекомендуется использовать формат буфера 16-разрядной глубины по сравнению с 24-битным.</span><span class="sxs-lookup"><span data-stu-id="c52b3-140">If targeting HoloLens for development, it is highly recommended to utilize the 16-bit depth buffer format compared to 24-bit.</span></span> <span data-ttu-id="c52b3-141">Это может сэкономить невероятно на производительности, хотя значения глубины будут иметь меньшую точность.</span><span class="sxs-lookup"><span data-stu-id="c52b3-141">This can save tremendously on performance although depth values will have less precision.</span></span> <span data-ttu-id="c52b3-142">Чтобы компенсировать меньшую точность и избежать [борьбы с z](https://en.wikipedia.org/wiki/Z-fighting), рекомендуется уменьшить [далеко плоскость отсечения](https://docs.unity3d.com/Manual/class-Camera.html) от 1000m значения по умолчанию, установленного Unity.</span><span class="sxs-lookup"><span data-stu-id="c52b3-142">To compensate for the lower precision and avoid [z-fighting](https://en.wikipedia.org/wiki/Z-fighting), it is recommended to reduce the [far clip plane](https://docs.unity3d.com/Manual/class-Camera.html) from the 1000m default value set by Unity.</span></span>

> [!NOTE]
> <span data-ttu-id="c52b3-143">Если используется *16-разрядный формат глубины*, требуемые эффекты для буфера набора элементов не будут работать, так как [Unity не создает буфер шаблона](https://docs.unity3d.com/ScriptReference/RenderTexture-depth.html) в этом параметре.</span><span class="sxs-lookup"><span data-stu-id="c52b3-143">If using *16-bit depth format*, stencil buffer required effects will not work because [Unity does not create a stencil buffer](https://docs.unity3d.com/ScriptReference/RenderTexture-depth.html) in this setting.</span></span> <span data-ttu-id="c52b3-144">Если выбрать *24-разрядный формат глубины* , то, как правило, будет создавать [8-разрядный буфер трафаретов](https://docs.unity3d.com/Manual/SL-Stencil.html), если это применимо на графической платформе конечной платформы.</span><span class="sxs-lookup"><span data-stu-id="c52b3-144">Selecting *24-bit depth format* conversely will generally create an [8-bit stencil buffer](https://docs.unity3d.com/Manual/SL-Stencil.html), if applicable on the endpoint graphics platform.</span></span>

#### <a name="depth-buffer-sharing-in-unity"></a><span data-ttu-id="c52b3-145">Совместное использование буфера глубины в Unity</span><span class="sxs-lookup"><span data-stu-id="c52b3-145">Depth buffer sharing in Unity</span></span>

<span data-ttu-id="c52b3-146">Для использования ЛСР на основе глубины необходимо выполнить два важных действия, которые требуются разработчикам.</span><span class="sxs-lookup"><span data-stu-id="c52b3-146">In order to utilize depth-based LSR, there are two important steps that developers need to take.</span></span>

1. <span data-ttu-id="c52b3-147">В разделе **изменить**  >  **Параметры проекта**  >  **проигрыватель**  >  **XR параметры**  >  **пакеты SDK для Virtual Reality** > включить **общий доступ к буферу глубины** .</span><span class="sxs-lookup"><span data-stu-id="c52b3-147">Under **Edit** > **Project Settings** > **Player** > **XR Settings** > **Virtual Reality SDKs** > Enable **Depth Buffer Sharing**</span></span>
    1. <span data-ttu-id="c52b3-148">Если нацеливание на HoloLens, рекомендуется также выбрать **16-разрядный формат глубины** .</span><span class="sxs-lookup"><span data-stu-id="c52b3-148">If targeting HoloLens, it is recommended to select **16-bit depth format** as well.</span></span>
1. <span data-ttu-id="c52b3-149">При отрисовке цвета на экране также отображается глубина изображения.</span><span class="sxs-lookup"><span data-stu-id="c52b3-149">When rendering color on screen, render depth as well</span></span>

<span data-ttu-id="c52b3-150">[Непрозрачные объекты gameobject](https://docs.unity3d.com/Manual/StandardShaderMaterialParameterRenderingMode.html) в Unity обычно автоматически записываются в глубину.</span><span class="sxs-lookup"><span data-stu-id="c52b3-150">[Opaque GameObjects](https://docs.unity3d.com/Manual/StandardShaderMaterialParameterRenderingMode.html) in Unity will generally write to depth automatically.</span></span> <span data-ttu-id="c52b3-151">Однако прозрачные & текстовые объекты, как правило, не записываются в глубину по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c52b3-151">However, transparent & text objects will generally not write to depth by default.</span></span> <span data-ttu-id="c52b3-152">При использовании шейдера МРТК Standard или в текстовой сетке для Pro это легко исправлено.</span><span class="sxs-lookup"><span data-stu-id="c52b3-152">If utilizing the MRTK Standard Shader or Text Mesh Pro, this can be easily remedied.</span></span>

> [!NOTE]
> <span data-ttu-id="c52b3-153">Чтобы быстро определить, какие объекты в сцене не записываются визуально в буфер глубины, один из них может использовать [служебную программу *буфера глубины рендеринга*](../configuration/mixed-reality-configuration-guide.md#editor-utilities) в *параметрах редактора* в профиле конфигурации мртк.</span><span class="sxs-lookup"><span data-stu-id="c52b3-153">To quickly determine which objects in a scene do not write to the depth buffer visually, one can use the [*Render Depth Buffer* utility](../configuration/mixed-reality-configuration-guide.md#editor-utilities) under the *Editor Settings* in the MRTK Configuration profile.</span></span>

##### <a name="transparent-mrtk-standard-shader"></a><span data-ttu-id="c52b3-154">Прозрачный МРТК Стандартный шейдер</span><span class="sxs-lookup"><span data-stu-id="c52b3-154">Transparent MRTK Standard shader</span></span>

<span data-ttu-id="c52b3-155">Для прозрачных материалов, использующих [стандартный шейдер мртк](../features/rendering/MRTK-standard-shader.md), выберите материал для просмотра в окне *инспектора* .</span><span class="sxs-lookup"><span data-stu-id="c52b3-155">For transparent materials using the [MRTK Standard shader](../features/rendering/MRTK-standard-shader.md), select the material to view it in the *Inspector* window.</span></span> <span data-ttu-id="c52b3-156">Затем нажмите кнопку *исправить сейчас* , чтобы преобразовать материал для записи в глубину (т. е.</span><span class="sxs-lookup"><span data-stu-id="c52b3-156">Then click the *Fix Now* button to convert the material to write to depth (i.e</span></span> <span data-ttu-id="c52b3-157">Z-Write On).</span><span class="sxs-lookup"><span data-stu-id="c52b3-157">Z-Write On).</span></span>

<span data-ttu-id="c52b3-158">До</span><span class="sxs-lookup"><span data-stu-id="c52b3-158">Before</span></span>

![Буфер глубины перед исправлением стандартного шейдера МРТК](../features/images/performance/DepthBufferFixNow_Before.PNG)

<span data-ttu-id="c52b3-160">После</span><span class="sxs-lookup"><span data-stu-id="c52b3-160">After</span></span>

![Фиксированный буфер глубины fixed МРТК Стандартный шейдер](../features/images/performance/DepthBufferFixNow_After.PNG)

##### <a name="text-mesh-pro"></a><span data-ttu-id="c52b3-162">Сетка текста Pro</span><span class="sxs-lookup"><span data-stu-id="c52b3-162">Text Mesh Pro</span></span>

<span data-ttu-id="c52b3-163">Для объектов "сетка текста" Pro выберите GameObject TMP, чтобы просмотреть его в инспекторе.</span><span class="sxs-lookup"><span data-stu-id="c52b3-163">For Text Mesh Pro objects, select the TMP GameObject to view it in the inspector.</span></span> <span data-ttu-id="c52b3-164">В разделе «материал» переключите шейдер для назначенного материала, чтобы использовать шейдер МРТК Текстмешпро.</span><span class="sxs-lookup"><span data-stu-id="c52b3-164">Under the material component, switch the shader for the assigned material to use the MRTK TextMeshPro shader.</span></span>

![Исправление буфера глубины текстовой сетки Pro](../features/images/performance/TextMeshPro-DepthBuffer-Fix.PNG)

##### <a name="custom-shader"></a><span data-ttu-id="c52b3-166">Пользовательский шейдер</span><span class="sxs-lookup"><span data-stu-id="c52b3-166">Custom shader</span></span>

<span data-ttu-id="c52b3-167">При написании пользовательского шейдера добавьте [флаг зврите](https://docs.unity3d.com/Manual/SL-CullAndDepth.html) в начало определения блока *Pass* , чтобы настроить шейдер для записи в буфер глубины.</span><span class="sxs-lookup"><span data-stu-id="c52b3-167">If writing a custom shader, add the [ZWrite flag](https://docs.unity3d.com/Manual/SL-CullAndDepth.html) to the top of the *Pass* block definition to configure the shader to write to the depth buffer.</span></span>

```
Shader "Custom/MyShader"
{
    SubShader
    {
        Pass
        {
            ...
            ZWrite On
            ...
        }
    }
}
```

##### <a name="opaque-backings"></a><span data-ttu-id="c52b3-168">Непрозрачные резервные копии</span><span class="sxs-lookup"><span data-stu-id="c52b3-168">Opaque backings</span></span>

<span data-ttu-id="c52b3-169">Если указанные выше методы не работают в данном сценарии (т. е.</span><span class="sxs-lookup"><span data-stu-id="c52b3-169">If the above methods do not work for a given scenario (i.e</span></span> <span data-ttu-id="c52b3-170">с помощью пользовательского интерфейса Unity можно записать другой объект в буфер глубины.</span><span class="sxs-lookup"><span data-stu-id="c52b3-170">using Unity UI), it is possible to have another object write to the depth buffer.</span></span> <span data-ttu-id="c52b3-171">Распространенным примером является использование текста пользовательского интерфейса Unity на плавающей панели в сцене.</span><span class="sxs-lookup"><span data-stu-id="c52b3-171">A common example is using Unity UI Text on a floating panel in a scene.</span></span> <span data-ttu-id="c52b3-172">Сделав панель непрозрачной или по крайней мере запись глубиной, текст & панели будет стабилизироваться платформой, так как их значения z близки друг к другу.</span><span class="sxs-lookup"><span data-stu-id="c52b3-172">By making the panel opaque or at least writing to depth, then both the text & the panel will be stabilized by the platform since their z-values are so close to each other.</span></span>

### <a name="worldanchors-hololens"></a><span data-ttu-id="c52b3-173">Ворлданчорс (HoloLens)</span><span class="sxs-lookup"><span data-stu-id="c52b3-173">WorldAnchors (HoloLens)</span></span>

<span data-ttu-id="c52b3-174">Наряду с соблюдением правильных конфигураций для обеспечения стабильности визуальной системы важно обеспечить стабильность работы голограмм на правильных физических местоположениях.</span><span class="sxs-lookup"><span data-stu-id="c52b3-174">Along with ensuring the correct configurations are met to ensure visual stability, it is important to ensure holograms remain stable at their correct physical locations.</span></span> <span data-ttu-id="c52b3-175">Чтобы сообщить платформе о важных расположениях в физическом пространстве, разработчики могут использовать [ворлданчорс](https://docs.unity3d.com/ScriptReference/XR.WSA.WorldAnchor.html) на объекты gameobject, которые должны остаться в одном месте.</span><span class="sxs-lookup"><span data-stu-id="c52b3-175">To inform the platform on important locations in a physical space, developers can leverage [WorldAnchors](https://docs.unity3d.com/ScriptReference/XR.WSA.WorldAnchor.html) on GameObjects that need to stay in one place.</span></span> <span data-ttu-id="c52b3-176">[Ворлданчор](https://docs.unity3d.com/ScriptReference/XR.WSA.WorldAnchor.html) — это компонент, добавленный в GameObject, который получает абсолютный контроль над преобразованием этого объекта.</span><span class="sxs-lookup"><span data-stu-id="c52b3-176">A [WorldAnchor](https://docs.unity3d.com/ScriptReference/XR.WSA.WorldAnchor.html) is a component added to a GameObject that takes absolute control over that object's transform.</span></span>

<span data-ttu-id="c52b3-177">Такие устройства, как HoloLens, постоянно проводят проверку и изучение среды.</span><span class="sxs-lookup"><span data-stu-id="c52b3-177">Devices such as HoloLens are constantly scanning and learning about the environment.</span></span> <span data-ttu-id="c52b3-178">Таким образом, так как HoloLens отслеживает перемещение & положение в пространстве, его оценки будут обновлены, а [система координат Unity будет скорректирована](/windows/mixed-reality/coordinate-systems-in-unity).</span><span class="sxs-lookup"><span data-stu-id="c52b3-178">Thus, as the HoloLens tracks movement & position in space, its estimates will be updated and the [Unity coordinate system adjusted](/windows/mixed-reality/coordinate-systems-in-unity).</span></span> <span data-ttu-id="c52b3-179">Например, если GameObject помещается в 1 МБ с камеры при запуске, так как HoloLens отслеживает среду, может быть, что физическим местом, где находится GameObject, является действительно 1,1.</span><span class="sxs-lookup"><span data-stu-id="c52b3-179">For example, if a GameObject is placed 1m from the camera at start, as the HoloLens tracks the environment, it may realize the physical point where the GameObject is located is actually 1.1m away.</span></span> <span data-ttu-id="c52b3-180">Это приведет к смещению голограммы.</span><span class="sxs-lookup"><span data-stu-id="c52b3-180">This would result in the hologram drifting.</span></span> <span data-ttu-id="c52b3-181">Применение Ворлданчор к GameObject включит привязку для управления преобразованием объекта, чтобы объект оставался в правильном физическом расположении (т. е.</span><span class="sxs-lookup"><span data-stu-id="c52b3-181">Applying a WorldAnchor to a GameObject will enable the anchor to control the object's transform so that the object will remain at the correct physical location (i.e</span></span> <span data-ttu-id="c52b3-182">Обновление до версии 1.1 вместо 1м в среде выполнения.</span><span class="sxs-lookup"><span data-stu-id="c52b3-182">update to 1.1m away instead of 1m at runtime).</span></span> <span data-ttu-id="c52b3-183">Чтобы сохранить [ворлданчорс](https://docs.unity3d.com/ScriptReference/XR.WSA.WorldAnchor.html) в сеансах приложений, разработчики могут использовать [ворлданчорсторе](https://docs.unity3d.com/ScriptReference/XR.WSA.Persistence.WorldAnchorStore.html) для [сохранения и загрузки ворлданчорс](/windows/mixed-reality/persistence-in-unity).</span><span class="sxs-lookup"><span data-stu-id="c52b3-183">To persist [WorldAnchors](https://docs.unity3d.com/ScriptReference/XR.WSA.WorldAnchor.html) across app sessions, developers can employ the [WorldAnchorStore](https://docs.unity3d.com/ScriptReference/XR.WSA.Persistence.WorldAnchorStore.html) to [save and load WorldAnchors](/windows/mixed-reality/persistence-in-unity).</span></span>

> [!NOTE]
> <span data-ttu-id="c52b3-184">После добавления компонента Ворлданчор в GameObject невозможно изменить преобразование GameObject (т. е.</span><span class="sxs-lookup"><span data-stu-id="c52b3-184">Once a WorldAnchor component has been added to a GameObject, it is not possible to modify that GameObject's transform (i.e</span></span> <span data-ttu-id="c52b3-185">Transform. Disposition = x).</span><span class="sxs-lookup"><span data-stu-id="c52b3-185">transform.position = x).</span></span> <span data-ttu-id="c52b3-186">Разработчик должен удалить Ворлданчор, чтобы изменить преобразование.</span><span class="sxs-lookup"><span data-stu-id="c52b3-186">A developer must remove the WorldAnchor to edit the transform.</span></span>

```c#
WorldAnchor m_anchor;

public void AddAnchor()
{
    this.m_anchor = this.gameObject.AddComponent<WorldAnchor>();
}

public void RemoveAnchor()
{
    DestroyImmediate(m_anchor);
}
```

<span data-ttu-id="c52b3-187">Если требуется альтернатива ручной работе с привязками, ознакомьтесь со средствами Microsoft World Lock Tools.</span><span class="sxs-lookup"><span data-stu-id="c52b3-187">If you want an alternative to manually working with Anchors, check out the Microsoft World Locking Tools.</span></span> 

> [!div class="nextstepaction"]
> [<span data-ttu-id="c52b3-188">Установка с помощью средства «MR»</span><span class="sxs-lookup"><span data-stu-id="c52b3-188">Install with the MR Feature Tool</span></span>](https://microsoft.github.io/MixedReality-WorldLockingTools-Unity/DocGen/Documentation/HowTos/WLTviaMRFeatureTool.html)

## <a name="see-also"></a><span data-ttu-id="c52b3-189">См. также статью</span><span class="sxs-lookup"><span data-stu-id="c52b3-189">See also</span></span>

- [<span data-ttu-id="c52b3-190">Производительность</span><span class="sxs-lookup"><span data-stu-id="c52b3-190">Performance</span></span>](../performance/perf-getting-started.md)
- [<span data-ttu-id="c52b3-191">Рекомендации по среде для HoloLens</span><span class="sxs-lookup"><span data-stu-id="c52b3-191">Environment Considerations for HoloLens</span></span>](/windows/mixed-reality/environment-considerations-for-hololens)
- [<span data-ttu-id="c52b3-192">Голограмма стабильной работы Windows Mixed Reality</span><span class="sxs-lookup"><span data-stu-id="c52b3-192">Hologram Stability Windows Mixed Reality</span></span>](/windows/mixed-reality/hologram-stability)
- [<span data-ttu-id="c52b3-193">Точка фокусировки в Unity</span><span class="sxs-lookup"><span data-stu-id="c52b3-193">Focus point in Unity</span></span>](/windows/mixed-reality/focus-point-in-unity)
- [<span data-ttu-id="c52b3-194">Системы координат в Unity</span><span class="sxs-lookup"><span data-stu-id="c52b3-194">Coordinate systems in Unity</span></span>](/windows/mixed-reality/coordinate-systems-in-unity)
- [<span data-ttu-id="c52b3-195">Сохраняемость в Unity</span><span class="sxs-lookup"><span data-stu-id="c52b3-195">Persistence in Unity</span></span>](/windows/mixed-reality/persistence-in-unity)
- [<span data-ttu-id="c52b3-196">Основные сведения о производительности смешанной реальности</span><span class="sxs-lookup"><span data-stu-id="c52b3-196">Understanding Performance for Mixed Reality</span></span>](/windows/mixed-reality/understanding-performance-for-mixed-reality)
- [<span data-ttu-id="c52b3-197">Рекомендации по производительности для Unity</span><span class="sxs-lookup"><span data-stu-id="c52b3-197">Performance recommendations for Unity</span></span>](/windows/mixed-reality/performance-recommendations-for-unity)